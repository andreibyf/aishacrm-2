[{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\add-account-revenue.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\add-metadata-helpers.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\apply-email-optional-migration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\apply-migration-031.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\apply-rls-policies.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\apply-single-sql.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\apply-supabase-migrations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\audit-field-mismatches.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\audit-routes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\bulk-delete-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-admin-role.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-andrei-user.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-auth-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-bad-lead-dates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-cash-flow-table.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-cron-status.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-duplicates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-employees-schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-field-locations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-field-mismatches.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-labor-depot.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-leads-fixed.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-nav-perms.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-opportunity-accounts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-orphaned-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-regression-lead.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-rls-simple.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-tables.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\check-user-tenants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\clean-orphaned-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\create-system-settings-table.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\create-test-logs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\create-test-user.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\debug-activity-links.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\delete-orphaned-employees.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\delete-unknown-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\dev-server.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\find-missing-columns.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\fix-lead-dates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\fix-user-tenant-id.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\jobs\\memoryArchiveJob.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\aiProvider.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\auditLogger.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\braid-loader.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\braid-tools.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\braidIntegration-v2.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\braidIntegration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\cronExecutors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\memoryClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\perfLogBatcher.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\requestContext.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\supabase-db.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\supabaseAuth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\swagger.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\tenantCanonicalResolver.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\tenantHelpers.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\tenantResolver.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\transitions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\lib\\validation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\list-all-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\middleware\\intrusionDetection.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\middleware\\performanceLogger.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getSupabaseClient' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"getSupabaseClient"},"fix":{"range":[150,208],"text":""},"desc":"Remove unused variable 'getSupabaseClient'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Performance Logging Middleware\r\n * Tracks API request performance metrics\r\n */\r\nimport { getRequestDbTime } from '../lib/requestContext.js';\r\nimport { getSupabaseClient } from '../lib/supabase-db.js';\r\nimport { enqueuePerformanceLog } from '../lib/perfLogBatcher.js';\r\n\r\nexport function performanceLogger(pgPool) {\r\n  console.log('[Performance Logger] Middleware initialized with pgPool:', !!pgPool);\r\n  return async (req, res, next) => {\r\n    const startTime = Date.now();\r\n    // Time to first byte (TTFB) tracking\r\n    let headersSentAt = null;\r\n    const markHeadersSent = () => { if (!headersSentAt) headersSentAt = Date.now(); };\r\n    const originalWriteHead = res.writeHead;\r\n    res.writeHead = function (...args) {\r\n      markHeadersSent();\r\n      return originalWriteHead.apply(this, args);\r\n    };\r\n    const originalWrite = res.write;\r\n    res.write = function (chunk, encoding, cb) {\r\n      markHeadersSent();\r\n      return originalWrite.call(this, chunk, encoding, cb);\r\n    };\r\n    // DB query time is accumulated per request via AsyncLocalStorage in requestContext\r\n    const originalSend = res.send;\r\n    const originalJson = res.json;\r\n\r\n    // Capture response\r\n    let responseBody;\r\n    res.send = function (body) {\r\n      responseBody = body;\r\n      return originalSend.call(this, body);\r\n    };\r\n    res.json = function (body) {\r\n      responseBody = body;\r\n      return originalJson.call(this, body);\r\n    };\r\n\r\n    // Wait for response to complete\r\n    res.on('finish', async () => {\r\n      console.log(`[Performance Logger] Finish event for ${req.method} ${req.originalUrl || req.url}`);\r\n      try {\r\n        const duration = Date.now() - startTime;\r\n        \r\n        // Skip logging for health checks and static assets\r\n        if (req.path === '/health' || req.path.startsWith('/assets/')) {\r\n          return;\r\n        }\r\n\r\n        // Extract tenant_id from query, body, or user context\r\n        const tenant_id =\r\n          req.headers?.['x-tenant-id'] ||\r\n          req.query?.tenant_id ||\r\n          req.body?.tenant_id ||\r\n          req.user?.tenant_id ||\r\n          'unknown';\r\n\r\n        // Extract error info if present\r\n        let error_message = null;\r\n        let error_stack = null;\r\n        if (res.statusCode >= 400 && responseBody) {\r\n          try {\r\n            const body = typeof responseBody === 'string' ? JSON.parse(responseBody) : responseBody;\r\n            error_message = body.error || body.message || `HTTP ${res.statusCode}`;\r\n            error_stack = body.stack;\r\n          } catch {\r\n            // Ignore parse errors\r\n          }\r\n        }\r\n\r\n        // Log to database (non-blocking)\r\n        setImmediate(async () => {\r\n          try {\r\n            const dbTime = getRequestDbTime(req);\r\n            const ttfb = headersSentAt ? Math.max(0, headersSentAt - startTime) : duration; // fallback to total if headers never explicitly sent\r\n            // Prefer Supabase client insert to avoid direct Postgres dependency\r\n            enqueuePerformanceLog({\r\n              tenant_id,\r\n              method: req.method,\r\n              endpoint: req.originalUrl || req.url || req.path,\r\n              status_code: res.statusCode,\r\n              duration_ms: duration,\r\n              response_time_ms: ttfb,\r\n              db_query_time_ms: dbTime,\r\n              user_email: req.user?.email || null,\r\n              ip_address: req.ip || req.connection?.remoteAddress || null,\r\n              user_agent: req.get('user-agent'),\r\n              error_message,\r\n              error_stack\r\n            });\r\n          } catch (dbError) {\r\n            // Don't throw - logging failure shouldn't break the app\r\n            // Always log errors so we can debug\r\n            console.error('[Performance Logger] Failed to log:', dbError.message);\r\n            console.error('[Performance Logger] Stack:', dbError.stack);\r\n          }\r\n        });\r\n      } catch (error) {\r\n        // Swallow errors - performance logging is non-critical\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          console.error('[Performance Logger] Error:', error.message);\r\n        }\r\n      }\r\n    });\r\n\r\n    next();\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\middleware\\productionSafetyGuard.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\middleware\\tenantScopedId.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\middleware\\validateTenant.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\query-400-errors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\remove-duplicates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\reset-password-interactive.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\restore-andrei-user.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\accounts.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'buildGetByIdSQL' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"buildGetByIdSQL"},"fix":{"range":[243,260],"text":""},"desc":"Remove unused variable 'buildGetByIdSQL'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Account Routes\r\n * Full CRUD operations with PostgreSQL database\r\n */\r\n\r\nimport express from \"express\";\r\nimport {\r\n  enforceEmployeeDataScope,\r\n  validateTenantAccess,\r\n} from \"../middleware/validateTenant.js\";\r\nimport { tenantScopedId, buildGetByIdSQL } from \"../middleware/tenantScopedId.js\";\r\n\r\nexport default function createAccountRoutes(_pgPool) {\r\n  const router = express.Router();\r\n  /**\r\n   * @openapi\r\n   * /api/accounts:\r\n   *   get:\r\n   *     summary: List accounts\r\n   *     tags: [accounts]\r\n   *     parameters:\r\n   *       - in: query\r\n   *         name: tenant_id\r\n   *         schema: { type: string, nullable: true }\r\n   *       - in: query\r\n   *         name: type\r\n   *         schema: { type: string, nullable: true }\r\n   *       - in: query\r\n   *         name: limit\r\n   *         schema: { type: integer, default: 50 }\r\n   *       - in: query\r\n   *         name: offset\r\n   *         schema: { type: integer, default: 0 }\r\n   *     responses:\r\n   *       200:\r\n   *         description: Accounts list\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               type: object\r\n   *               properties:\r\n   *                 status:\r\n   *                   type: string\r\n   *                   example: success\r\n   *                 data:\r\n   *                   type: object\r\n   *                   properties:\r\n   *                     accounts:\r\n   *                       type: array\r\n   *                       items:\r\n   *                         type: object\r\n   *                         properties:\r\n   *                           id:\r\n   *                             type: string\r\n   *                           tenant_id:\r\n   *                             type: string\r\n   *                             format: uuid\r\n   *                           name:\r\n   *                             type: string\r\n   *                           type:\r\n   *                             type: string\r\n   *                             example: customer\r\n   *                           industry:\r\n   *                             type: string\r\n   *                           website:\r\n   *                             type: string\r\n   *                           created_at:\r\n   *                             type: string\r\n   *                             format: date-time\r\n   *                           updated_at:\r\n   *                             type: string\r\n   *                             format: date-time\r\n   *   post:\r\n   *     summary: Create account\r\n   *     tags: [accounts]\r\n   *     requestBody:\r\n   *       required: true\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *             required: [tenant_id, name]\r\n   *             properties:\r\n   *               tenant_id: { type: string }\r\n   *               name: { type: string }\r\n   *               type: { type: string }\r\n   *               industry: { type: string }\r\n   *               website: { type: string }\r\n   *           example:\r\n   *             tenant_id: \"550e8400-e29b-41d4-a716-446655440000\"\r\n   *             name: \"Acme Corporation\"\r\n   *             type: \"customer\"\r\n   *             industry: \"Technology\"\r\n   *             website: \"https://acme.example.com\"\r\n   *     responses:\r\n   *       200:\r\n   *         description: Account created\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               type: object\r\n   *               properties:\r\n   *                 status:\r\n   *                   type: string\r\n   *                   example: success\r\n   *                 data:\r\n   *                   type: object\r\n   *                   properties:\r\n   *                     id:\r\n   *                       type: string\r\n   *                     tenant_id:\r\n   *                       type: string\r\n   *                       format: uuid\r\n   *                     name:\r\n   *                       type: string\r\n   *                     type:\r\n   *                       type: string\r\n   *                     industry:\r\n   *                       type: string\r\n   *                     website:\r\n   *                       type: string\r\n   *                     created_at:\r\n   *                       type: string\r\n   *                       format: date-time\r\n   */\r\n\r\n  // Apply tenant validation and employee data scope to all routes\r\n  router.use(validateTenantAccess);\r\n  router.use(enforceEmployeeDataScope);\r\n\r\n  // Helper function to expand metadata fields to top-level properties\r\n  const expandMetadata = (record) => {\r\n    if (!record) return record;\r\n    const { metadata = {}, ...rest } = record;\r\n    return {\r\n      ...rest,\r\n      ...metadata, // Spread all metadata fields to top level\r\n      metadata, // Keep original for backwards compatibility\r\n    };\r\n  };\r\n\r\n  // GET /api/accounts - List accounts\r\n  router.get(\"/\", async (req, res) => {\r\n    try {\r\n      let { tenant_id, type } = req.query;\r\n      const limit = parseInt(req.query.limit || '50', 10);\r\n      const offset = parseInt(req.query.offset || '0', 10);\r\n\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      let q = supabase.from('accounts').select('*', { count: 'exact' });\r\n      if (tenant_id) q = q.eq('tenant_id', tenant_id);\r\n      if (type) q = q.eq('type', type);\r\n      q = q.order('created_at', { ascending: false }).range(offset, offset + limit - 1);\r\n\r\n      const { data, error, count } = await q;\r\n      if (error) throw new Error(error.message);\r\n\r\n      const accounts = (data || []).map(expandMetadata);\r\n\r\n      res.json({\r\n        status: \"success\",\r\n        data: {\r\n          accounts,\r\n          total: count || 0,\r\n          limit,\r\n          offset,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error listing accounts:\", error);\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // POST /api/accounts - Create account\r\n  router.post(\"/\", async (req, res) => {\r\n    try {\r\n      const { tenant_id, name, type, industry, website } = req.body;\r\n\r\n      if (!tenant_id) {\r\n        return res.status(400).json({\r\n          status: \"error\",\r\n          message: \"tenant_id is required\",\r\n        });\r\n      }\r\n\r\n      if (!name) {\r\n        return res.status(400).json({\r\n          status: \"error\",\r\n          message: \"name is required\",\r\n        });\r\n      }\r\n\r\n      const nowIso = new Date().toISOString();\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      const { data, error } = await supabase\r\n        .from('accounts')\r\n        .insert([{\r\n          tenant_id,\r\n          name,\r\n          type,\r\n          industry,\r\n          website,\r\n          created_at: nowIso,\r\n          updated_at: nowIso,\r\n        }])\r\n        .select('*')\r\n        .single();\r\n      if (error) throw new Error(error.message);\r\n\r\n      res.json({\r\n        status: \"success\",\r\n        message: \"Account created\",\r\n        data,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating account:\", error);\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // GET /api/accounts/:id - Get single account (centralized tenant/id scoping)\r\n  /**\r\n   * @openapi\r\n   * /api/accounts/{id}:\r\n   *   get:\r\n   *     summary: Get account by ID\r\n   *     tags: [accounts]\r\n   *     parameters:\r\n   *       - in: path\r\n   *         name: id\r\n   *         required: true\r\n   *         schema: { type: string }\r\n   *       - in: query\r\n   *         name: tenant_id\r\n   *         schema: { type: string, nullable: true }\r\n   *     responses:\r\n   *       200:\r\n   *         description: Account details\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   *   put:\r\n   *     summary: Update account\r\n   *     tags: [accounts]\r\n   *     parameters:\r\n   *       - in: path\r\n   *         name: id\r\n   *         required: true\r\n   *         schema: { type: string }\r\n   *     requestBody:\r\n   *       required: false\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *     responses:\r\n   *       200:\r\n   *         description: Account updated\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   *   delete:\r\n   *     summary: Delete account\r\n   *     tags: [accounts]\r\n   *     parameters:\r\n   *       - in: path\r\n   *         name: id\r\n   *         required: true\r\n   *         schema: { type: string }\r\n   *     responses:\r\n   *       200:\r\n   *         description: Account deleted\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   */\r\n  router.get(\"/:id\", tenantScopedId(), async (req, res) => {\r\n    try {\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      let q = supabase.from('accounts').select('*').eq('id', req.idScope.id);\r\n      if (req.idScope.tenant_id) q = q.eq('tenant_id', req.idScope.tenant_id);\r\n      const { data, error } = await q.single();\r\n      if (error?.code === 'PGRST116') {\r\n        return res.status(404).json({\r\n          status: \"error\",\r\n          message: \"Account not found\",\r\n        });\r\n      }\r\n      if (error) throw new Error(error.message);\r\n\r\n      const account = expandMetadata(data);\r\n      res.json({ status: \"success\", data: account });\r\n    } catch (error) {\r\n      console.error(\"Error fetching account:\", error);\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // GET /api/accounts/:id/related-people - Contacts and Leads under the Account\r\n  router.get('/:id/related-people', async (req, res) => {\r\n    try {\r\n      const { id } = req.params;\r\n      const { tenant_id } = req.query || {};\r\n      if (!tenant_id) {\r\n        return res.status(400).json({ status: 'error', message: 'tenant_id is required' });\r\n      }\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      const { data, error } = await supabase\r\n        .from('v_account_related_people')\r\n        .select('*')\r\n        .eq('tenant_id', tenant_id)\r\n        .eq('account_id', id)\r\n        .order('created_at', { ascending: false });\r\n      if (error) throw new Error(error.message);\r\n      return res.json({ status: 'success', data: { people: data || [] } });\r\n    } catch (error) {\r\n      console.error('[Accounts] related-people error:', error);\r\n      return res.status(500).json({ status: 'error', message: error.message });\r\n    }\r\n  });\r\n\r\n  // PUT /api/accounts/:id - Update account\r\n  router.put(\"/:id\", async (req, res) => {\r\n    try {\r\n      const { id } = req.params;\r\n      const { name, type, industry, website, metadata, ...otherFields } =\r\n        req.body;\r\n\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      const { data: current, error: fetchErr } = await supabase\r\n        .from('accounts')\r\n        .select('metadata')\r\n        .eq('id', id)\r\n        .single();\r\n      if (fetchErr?.code === 'PGRST116') {\r\n        return res.status(404).json({\r\n          status: \"error\",\r\n          message: \"Account not found\",\r\n        });\r\n      }\r\n      if (fetchErr) throw new Error(fetchErr.message);\r\n\r\n      const currentMetadata = current?.metadata || {};\r\n      const updatedMetadata = {\r\n        ...currentMetadata,\r\n        ...(metadata || {}),\r\n        ...otherFields,\r\n      };\r\n\r\n      const payload = { metadata: updatedMetadata, updated_at: new Date().toISOString() };\r\n      if (name !== undefined) payload.name = name;\r\n      if (type !== undefined) payload.type = type;\r\n      if (industry !== undefined) payload.industry = industry;\r\n      if (website !== undefined) payload.website = website;\r\n\r\n      const { data, error } = await supabase\r\n        .from('accounts')\r\n        .update(payload)\r\n        .eq('id', id)\r\n        .select('*')\r\n        .single();\r\n      if (error?.code === 'PGRST116') {\r\n        return res.status(404).json({\r\n          status: \"error\",\r\n          message: \"Account not found\",\r\n        });\r\n      }\r\n      if (error) throw new Error(error.message);\r\n\r\n      const updatedAccount = expandMetadata(data);\r\n\r\n      res.json({\r\n        status: \"success\",\r\n        message: \"Account updated\",\r\n        data: updatedAccount,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error updating account:\", error);\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // DELETE /api/accounts/:id - Delete account\r\n  router.delete(\"/:id\", async (req, res) => {\r\n    try {\r\n      const { id } = req.params;\r\n\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      const { data, error } = await supabase\r\n        .from('accounts')\r\n        .delete()\r\n        .eq('id', id)\r\n        .select('id')\r\n        .maybeSingle();\r\n      if (error && error.code !== 'PGRST116') throw new Error(error.message);\r\n      if (!data) return res.status(404).json({\r\n        status: \"error\",\r\n        message: \"Account not found\",\r\n      });\r\n\r\n      res.json({\r\n        status: \"success\",\r\n        message: \"Account deleted\",\r\n        data: { id: data.id },\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error deleting account:\", error);\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  return router;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\activities.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\ai.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\aicampaigns.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\announcements.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\apikeys.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\assistant.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\audit-logs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\billing.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\bizdev.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\bizdevsources.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\cashflow.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\clients.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\contacts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\cron.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\database.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\documentationfiles.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\documents.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\employees.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\integrations.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":90,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":90,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":168,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":168,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Integration Routes\r\n * N8N, OpenAI, Stripe, Twilio, Slack, etc.\r\n */\r\n\r\nimport express from 'express';\r\n\r\nexport default function createIntegrationRoutes(_pgPool) {\r\n  const router = express.Router();\r\n\r\n  // ---- n8n helpers ----\r\n  function requireSuperadmin(req, res, next) {\r\n    // Dev-friendly fallback like validateTenantAccess: create mock superadmin when unauthenticated in dev\r\n    if (!req.user && process.env.NODE_ENV === 'development') {\r\n      req.user = { id: 'local-dev-superadmin', email: 'dev@localhost', role: 'superadmin', tenant_id: null };\r\n    }\r\n    const role = req.user?.role;\r\n    if (role !== 'superadmin') {\r\n      return res.status(403).json({ status: 'error', message: 'Superadmin access required' });\r\n    }\r\n    return next();\r\n  }\r\n  const getN8nConfig = () => {\r\n    const baseUrl = process.env.N8N_BASE_URL || 'http://n8n:5678';\r\n    const apiKey = process.env.N8N_API_KEY || '';\r\n    const basicUser = process.env.N8N_BASIC_AUTH_USER || '';\r\n    const basicPass = process.env.N8N_BASIC_AUTH_PASSWORD || '';\r\n    return { baseUrl: baseUrl.replace(/\\/$/, ''), apiKey, basicUser, basicPass };\r\n  };\r\n\r\n  async function fetchFromN8n(path) {\r\n    const { baseUrl, apiKey, basicUser, basicPass } = getN8nConfig();\r\n    const url = `${baseUrl}${path}`;\r\n    const headers = { 'Content-Type': 'application/json' };\r\n    if (apiKey) headers['X-N8N-API-KEY'] = apiKey;\r\n    if (basicUser && basicPass) {\r\n      const token = Buffer.from(`${basicUser}:${basicPass}`).toString('base64');\r\n      headers['Authorization'] = `Basic ${token}`;\r\n    }\r\n    const res = await fetch(url, { headers });\r\n    if (!res.ok) {\r\n      const text = await res.text().catch(() => '');\r\n      throw new Error(`n8n request failed ${res.status}: ${text || res.statusText}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  function normalizeWorkflows(raw) {\r\n    // Support both Public API shape and legacy /rest shape\r\n    const list = Array.isArray(raw?.data) ? raw.data : Array.isArray(raw) ? raw : raw?.workflows || [];\r\n    return list.map((w) => ({\r\n      id: w.id ?? w?.id?.toString?.() ?? w?.workflowId ?? w?.staticData?.id ?? null,\r\n      name: w.name,\r\n      active: w.active ?? w?.active === true,\r\n      tags: w.tags || [],\r\n      createdAt: w.createdAt || w.createdAtUtc || w?.createdAt?.toString?.() || null,\r\n      updatedAt: w.updatedAt || w.updatedAtUtc || w?.updatedAt?.toString?.() || null,\r\n      versionId: w.versionId || w?.version || null,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/n8n/workflows:\r\n   *   get:\r\n   *     summary: List n8n workflows\r\n   *     description: Lists workflows from the configured n8n instance. Requires superadmin.\r\n   *     tags: [integrations]\r\n   *     responses:\r\n   *       200:\r\n   *         description: List of n8n workflows\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   *       403:\r\n   *         description: Superadmin required\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Error'\r\n   */\r\n  // GET /api/integrations/n8n/workflows - List workflows from n8n\r\n  router.get('/n8n/workflows', requireSuperadmin, async (_req, res) => {\r\n    try {\r\n      // Try modern Public API first, then legacy internal /rest\r\n      let raw;\r\n      try {\r\n        raw = await fetchFromN8n('/api/v1/workflows?limit=100');\r\n      } catch (_e) {\r\n        raw = await fetchFromN8n('/rest/workflows');\r\n      }\r\n      const workflows = normalizeWorkflows(raw);\r\n      res.json({ status: 'success', count: workflows.length, data: workflows });\r\n    } catch (error) {\r\n      res.status(502).json({ status: 'error', message: error.message });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/n8n/health:\r\n   *   get:\r\n   *     summary: n8n health\r\n   *     description: Checks connectivity to n8n health endpoint. Requires superadmin.\r\n   *     tags: [integrations]\r\n   *     responses:\r\n   *       200:\r\n   *         description: n8n health status\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   *       403:\r\n   *         description: Superadmin required\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Error'\r\n   */\r\n  // GET /api/integrations/n8n/health - Check n8n connectivity\r\n  router.get('/n8n/health', requireSuperadmin, async (_req, res) => {\r\n    try {\r\n      const { baseUrl } = getN8nConfig();\r\n      // health endpoint returns plain text \"ok\" in many n8n versions\r\n      const url = `${baseUrl}/healthz`;\r\n      const ping = await fetch(url).then(async (r) => ({ ok: r.ok, status: r.status, text: await r.text().catch(() => '') })).catch((e) => ({ ok: false, error: e.message }));\r\n      res.json({ status: 'success', data: { baseUrl, health: ping } });\r\n    } catch (error) {\r\n      res.status(502).json({ status: 'error', message: error.message });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/n8n/workflows/{id}:\r\n   *   get:\r\n   *     summary: Get n8n workflow\r\n   *     description: Fetches a single workflow by ID from n8n. Requires superadmin.\r\n   *     tags: [integrations]\r\n   *     parameters:\r\n   *       - in: path\r\n   *         name: id\r\n   *         required: true\r\n   *         schema:\r\n   *           type: string\r\n   *     responses:\r\n   *       200:\r\n   *         description: Workflow details\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   *       403:\r\n   *         description: Superadmin required\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Error'\r\n   */\r\n  // GET /api/integrations/n8n/workflows/:id - Get single workflow\r\n  router.get('/n8n/workflows/:id', requireSuperadmin, async (req, res) => {\r\n    try {\r\n      const { id } = req.params;\r\n      let raw;\r\n      try {\r\n        raw = await fetchFromN8n(`/api/v1/workflows/${encodeURIComponent(id)}`);\r\n      } catch (_e) {\r\n        raw = await fetchFromN8n(`/rest/workflows/${encodeURIComponent(id)}`);\r\n      }\r\n\r\n      // Normalize single item to match list shape fields\r\n      const [normalized] = normalizeWorkflows([raw?.data || raw]);\r\n      res.json({ status: 'success', data: normalized || null });\r\n    } catch (error) {\r\n      res.status(502).json({ status: 'error', message: error.message });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/n8n/trigger:\r\n   *   post:\r\n   *     summary: Trigger n8n workflow\r\n   *     description: Triggers a workflow by ID in n8n.\r\n   *     tags: [integrations]\r\n   *     requestBody:\r\n   *       required: true\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *             properties:\r\n   *               workflow_id:\r\n   *                 type: string\r\n   *               data:\r\n   *                 type: object\r\n   *     responses:\r\n   *       200:\r\n   *         description: Trigger acknowledged\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   */\r\n  // POST /api/integrations/n8n/trigger - Trigger N8N workflow\r\n  router.post('/n8n/trigger', requireSuperadmin, async (req, res) => {\r\n    try {\r\n      const { workflow_id, data: _data } = req.body;\r\n\r\n      res.json({\r\n        status: 'success',\r\n        message: 'N8N workflow triggered',\r\n        data: { workflow_id, timestamp: new Date().toISOString() },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/openai/chat:\r\n   *   post:\r\n   *     summary: OpenAI chat completion\r\n   *     description: Proxies a chat completion request to OpenAI (placeholder).\r\n   *     tags: [integrations]\r\n   *     requestBody:\r\n   *       required: true\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *             properties:\r\n   *               messages:\r\n   *                 type: array\r\n   *                 items:\r\n   *                   type: object\r\n   *               model:\r\n   *                 type: string\r\n   *                 default: gpt-4\r\n   *     responses:\r\n   *       200:\r\n   *         description: Placeholder response\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   */\r\n  // POST /api/integrations/openai/chat - OpenAI chat completion\r\n  router.post('/openai/chat', async (req, res) => {\r\n    try {\r\n      const { messages, model = 'gpt-4' } = req.body;\r\n\r\n      res.json({\r\n        status: 'success',\r\n        message: 'OpenAI chat not yet implemented',\r\n        data: { model, message_count: messages?.length || 0 },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/stripe/create-payment:\r\n   *   post:\r\n   *     summary: Create Stripe payment\r\n   *     description: Initiates a Stripe payment (placeholder).\r\n   *     tags: [integrations]\r\n   *     requestBody:\r\n   *       required: true\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *             properties:\r\n   *               amount:\r\n   *                 type: number\r\n   *               currency:\r\n   *                 type: string\r\n   *                 default: usd\r\n   *               customer_id:\r\n   *                 type: string\r\n   *     responses:\r\n   *       200:\r\n   *         description: Placeholder response\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   */\r\n  // POST /api/integrations/stripe/create-payment - Create Stripe payment\r\n  router.post('/stripe/create-payment', async (req, res) => {\r\n    try {\r\n      const { amount, currency = 'usd', customer_id } = req.body;\r\n\r\n      res.json({\r\n        status: 'success',\r\n        message: 'Stripe payment not yet implemented',\r\n        data: { amount, currency, customer_id },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/twilio/send-sms:\r\n   *   post:\r\n   *     summary: Send SMS via Twilio\r\n   *     description: Sends an SMS (placeholder).\r\n   *     tags: [integrations]\r\n   *     requestBody:\r\n   *       required: true\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *             properties:\r\n   *               to:\r\n   *                 type: string\r\n   *               message:\r\n   *                 type: string\r\n   *     responses:\r\n   *       200:\r\n   *         description: Placeholder response\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   */\r\n  // POST /api/integrations/twilio/send-sms - Send SMS via Twilio\r\n  router.post('/twilio/send-sms', async (req, res) => {\r\n    try {\r\n      const { to, message } = req.body;\r\n\r\n      res.json({\r\n        status: 'success',\r\n        message: 'Twilio SMS not yet implemented',\r\n        data: { to, message_length: message?.length || 0 },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @openapi\r\n   * /api/integrations/slack/send-message:\r\n   *   post:\r\n   *     summary: Send Slack message\r\n   *     description: Sends a Slack message (placeholder).\r\n   *     tags: [integrations]\r\n   *     requestBody:\r\n   *       required: true\r\n   *       content:\r\n   *         application/json:\r\n   *           schema:\r\n   *             type: object\r\n   *             properties:\r\n   *               channel:\r\n   *                 type: string\r\n   *               text:\r\n   *                 type: string\r\n   *     responses:\r\n   *       200:\r\n   *         description: Placeholder response\r\n   *         content:\r\n   *           application/json:\r\n   *             schema:\r\n   *               $ref: '#/components/schemas/Success'\r\n   */\r\n  // POST /api/integrations/slack/send-message - Send Slack message\r\n  router.post('/slack/send-message', async (req, res) => {\r\n    try {\r\n      const { channel, text } = req.body;\r\n\r\n      res.json({\r\n        status: 'success',\r\n        message: 'Slack integration not yet implemented',\r\n        data: { channel, text_length: text?.length || 0 },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  return router;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\leads.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'logEntityTransition' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"logEntityTransition"},"fix":{"range":[202,262],"text":""},"desc":"Remove unused variable 'logEntityTransition'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Lead Routes\n * Full CRUD operations with PostgreSQL database\n */\n\nimport express from 'express';\nimport { validateTenantAccess, enforceEmployeeDataScope } from '../middleware/validateTenant.js';\nimport { logEntityTransition } from '../lib/transitions.js';\n\nexport default function createLeadRoutes(_pgPool) {\n  const router = express.Router();\n  /**\n   * @openapi\n   * /api/leads:\n   *   get:\n   *     summary: List leads\n   *     tags: [leads]\n   *     parameters:\n   *       - in: query\n   *         name: tenant_id\n   *         required: true\n   *         schema: { type: string }\n   *       - in: query\n   *         name: status\n   *         schema: { oneOf: [ { type: string }, { type: object } ] }\n   *       - in: query\n   *         name: account_id\n   *         schema: { type: string, nullable: true }\n   *       - in: query\n   *         name: limit\n   *         schema: { type: integer, default: 50 }\n   *       - in: query\n   *         name: offset\n   *         schema: { type: integer, default: 0 }\n   *     responses:\n   *       200:\n   *         description: Leads list\n   *         content:\n   *           application/json:\n   *             schema:\n   *               type: object\n   *               properties:\n   *                 status:\n   *                   type: string\n   *                   example: success\n   *                 data:\n   *                   type: object\n   *                   properties:\n   *                     leads:\n   *                       type: array\n   *                       items:\n   *                         type: object\n   *                         properties:\n   *                           id:\n   *                             type: string\n   *                           tenant_id:\n   *                             type: string\n   *                             format: uuid\n   *                           first_name:\n   *                             type: string\n   *                           last_name:\n   *                             type: string\n   *                           email:\n   *                             type: string\n   *                             format: email\n   *                           phone:\n   *                             type: string\n   *                           company:\n   *                             type: string\n   *                           status:\n   *                             type: string\n   *                             example: new\n   *                           source:\n   *                             type: string\n   *                           account_id:\n   *                             type: string\n   *                             nullable: true\n   *                           created_at:\n   *                             type: string\n   *                             format: date-time\n   *   post:\n   *     summary: Create lead\n   *     tags: [leads]\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             required: [tenant_id, first_name, last_name]\n   *           example:\n   *             tenant_id: \"550e8400-e29b-41d4-a716-446655440000\"\n   *             first_name: \"John\"\n   *             last_name: \"Smith\"\n   *             email: \"john.smith@example.com\"\n   *             phone: \"+1-555-9876\"\n   *             company: \"Smith Industries\"\n   *             status: \"new\"\n   *             source: \"website\"\n   *     responses:\n   *       200:\n   *         description: Lead created\n   *         content:\n   *           application/json:\n   *             schema:\n   *               type: object\n   *               properties:\n   *                 status:\n   *                   type: string\n   *                   example: success\n   *                 data:\n   *                   type: object\n   *                   properties:\n   *                     id:\n   *                       type: string\n   *                     tenant_id:\n   *                       type: string\n   *                       format: uuid\n   *                     first_name:\n   *                       type: string\n   *                     last_name:\n   *                       type: string\n   *                     email:\n   *                       type: string\n   *                     phone:\n   *                       type: string\n   *                     company:\n   *                       type: string\n   *                     status:\n   *                       type: string\n   *                     created_at:\n   *                       type: string\n   *                       format: date-time\n   */\n\n  // Apply tenant validation and employee data scope to all routes\n  router.use(validateTenantAccess);\n  router.use(enforceEmployeeDataScope);\n\n// Helper function to expand metadata fields to top-level properties\n  const expandMetadata = (record) => {\n    if (!record) return record;\n    const { metadata = {}, ...rest } = record;\n    return {\n      ...rest,\n      ...metadata,\n      metadata,\n    };\n  };\n\n  // GET /api/leads - List leads\n  router.get('/', async (req, res) => {\n    try {\n      let { tenant_id, status, account_id } = req.query;\n      const limit = parseInt(req.query.limit || '50', 10);\n      const offset = parseInt(req.query.offset || '0', 10);\n\n      if (!tenant_id) {\n        return res.status(400).json({ status: 'error', message: 'tenant_id is required' });\n      }\n\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\n      const supabase = getSupabaseClient();\n      let q = supabase.from('leads').select('*', { count: 'exact' }).eq('tenant_id', tenant_id);\n\n      if (status) {\n        let parsedStatus = status;\n        if (typeof status === 'string' && status.startsWith('{')) {\n          try {\n            parsedStatus = JSON.parse(status);\n          } catch {\n            // treat as literal\n          }\n        }\n        if (typeof parsedStatus === 'object' && parsedStatus.$nin) {\n          // NOT IN: filter out these statuses\n          for (const s of parsedStatus.$nin) {\n            q = q.neq('status', s);\n          }\n        } else {\n          q = q.eq('status', status);\n        }\n      }\n      if (account_id) q = q.eq('account_id', account_id);\n      q = q.order('created_at', { ascending: false }).range(offset, offset + limit - 1);\n\n      const { data, error, count } = await q;\n      if (error) throw new Error(error.message);\n\n      const leads = (data || []).map(expandMetadata);\n\n      res.json({\n        status: 'success',\n        data: { leads, total: count || 0, status, limit, offset },\n      });\n    } catch (error) {\n      console.error('Error listing leads:', error);\n      res.status(500).json({ status: 'error', message: error.message });\n    }\n  });\n\n  // POST /api/leads - Create lead\n  router.post('/', async (req, res) => {\n    try {\n      const { tenant_id, first_name, last_name, email, phone, company, job_title, status = 'new', source, metadata, ...otherFields } = req.body;\n\n      if (!tenant_id) {\n        return res.status(400).json({ status: 'error', message: 'tenant_id is required' });\n      }\n\n      // Validate required name fields\n      if (!first_name || !first_name.trim()) {\n        return res.status(400).json({ \n          status: 'error', \n          message: 'first_name is required and cannot be empty',\n          field: 'first_name'\n        });\n      }\n\n      if (!last_name || !last_name.trim()) {\n        return res.status(400).json({ \n          status: 'error', \n          message: 'last_name is required and cannot be empty',\n          field: 'last_name'\n        });\n      }\n\n      const combinedMetadata = {\n        ...(metadata || {}),\n        ...otherFields\n      };\n\n      const nowIso = new Date().toISOString();\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\n      const supabase = getSupabaseClient();\n      const { data, error } = await supabase\n        .from('leads')\n        .insert([{\n          tenant_id,\n          first_name,\n          last_name,\n          email,\n          phone,\n          company,\n          job_title,\n          status,\n          source,\n          metadata: combinedMetadata,\n          created_at: nowIso,\n          updated_at: nowIso,\n        }])\n        .select('*')\n        .single();\n      if (error) throw new Error(error.message);\n\n      const lead = expandMetadata(data);\n\n      console.log('[Leads POST] Successfully created lead:', lead.id);\n      res.json({\n        status: 'success',\n        message: 'Lead created',\n        data: { lead },\n      });\n    } catch (error) {\n      console.error('Error creating lead:', error);\n      res.status(500).json({ status: 'error', message: error.message });\n    }\n  });\n\n  // GET /api/leads/:id - Get single lead (tenant required)\n  /**\n   * @openapi\n   * /api/leads/{id}:\n   *   get:\n   *     summary: Get lead by ID\n   *     tags: [leads]\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: string }\n   *       - in: query\n   *         name: tenant_id\n   *         required: true\n   *         schema: { type: string }\n   *     responses:\n   *       200:\n   *         description: Lead details\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/Success'\n   *   put:\n   *     summary: Update lead\n   *     tags: [leads]\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: string }\n   *     requestBody:\n   *       required: false\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *     responses:\n   *       200:\n   *         description: Lead updated\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/Success'\n   *   delete:\n   *     summary: Delete lead\n   *     tags: [leads]\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: string }\n   *     responses:\n   *       200:\n   *         description: Lead deleted\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/Success'\n   */\n  router.get('/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { tenant_id } = req.query || {};\n\n      if (!tenant_id) {\n        return res.status(400).json({ status: 'error', message: 'tenant_id is required' });\n      }\n\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\n      const supabase = getSupabaseClient();\n      const { data, error } = await supabase\n        .from('leads')\n        .select('*')\n        .eq('tenant_id', tenant_id)\n        .eq('id', id)\n        .single();\n      if (error?.code === 'PGRST116') {\n        return res.status(404).json({ status: 'error', message: 'Lead not found' });\n      }\n      if (error) throw new Error(error.message);\n\n      const lead = expandMetadata(data);\n\n      res.json({\n        status: 'success',\n        data: { lead },\n      });\n    } catch (error) {\n      console.error('Error fetching lead:', error);\n      res.status(500).json({ status: 'error', message: error.message });\n    }\n  });\n\n  // PUT /api/leads/:id - Update lead\n  router.put('/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { first_name, last_name, email, phone, company, job_title, status, source, metadata, ...otherFields } = req.body;\n\n      // Validate required name fields if provided\n      if (first_name !== undefined && (!first_name || !first_name.trim())) {\n        return res.status(400).json({ \n          status: 'error', \n          message: 'first_name cannot be empty',\n          field: 'first_name'\n        });\n      }\n\n      if (last_name !== undefined && (!last_name || !last_name.trim())) {\n        return res.status(400).json({ \n          status: 'error', \n          message: 'last_name cannot be empty',\n          field: 'last_name'\n        });\n      }\n\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\n      const supabase = getSupabaseClient();\n      const { data: current, error: fetchErr } = await supabase\n        .from('leads')\n        .select('metadata')\n        .eq('id', id)\n        .single();\n      if (fetchErr?.code === 'PGRST116') {\n        return res.status(404).json({ status: 'error', message: 'Lead not found' });\n      }\n      if (fetchErr) throw new Error(fetchErr.message);\n\n      const currentMetadata = current?.metadata || {};\n      const updatedMetadata = {\n        ...currentMetadata,\n        ...(metadata || {}),\n        ...otherFields,\n      };\n\n      const payload = { metadata: updatedMetadata, updated_at: new Date().toISOString() };\n      if (first_name !== undefined) payload.first_name = first_name;\n      if (last_name !== undefined) payload.last_name = last_name;\n      if (email !== undefined) payload.email = email;\n      if (phone !== undefined) payload.phone = phone;\n      if (company !== undefined) payload.company = company;\n      if (job_title !== undefined) payload.job_title = job_title;\n      if (status !== undefined) payload.status = status;\n      if (source !== undefined) payload.source = source;\n\n      const { data, error } = await supabase\n        .from('leads')\n        .update(payload)\n        .eq('id', id)\n        .select('*')\n        .single();\n      if (error?.code === 'PGRST116') {\n        return res.status(404).json({ status: 'error', message: 'Lead not found' });\n      }\n      if (error) throw new Error(error.message);\n\n      const updatedLead = expandMetadata(data);\n\n      res.json({\n        status: 'success',\n        message: 'Lead updated',\n        data: { lead: updatedLead },\n      });\n    } catch (error) {\n      console.error('Error updating lead:', error);\n      res.status(500).json({ status: 'error', message: error.message });\n    }\n  });\n\n  // DELETE /api/leads/:id - Delete lead\n  router.delete('/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\n      const supabase = getSupabaseClient();\n      const { data, error } = await supabase\n        .from('leads')\n        .delete()\n        .eq('id', id)\n        .select('id')\n        .maybeSingle();\n      if (error && error.code !== 'PGRST116') throw new Error(error.message);\n      if (!data) return res.status(404).json({ status: 'error', message: 'Lead not found' });\n\n      res.json({\n        status: 'success',\n        message: 'Lead deleted',\n        data: { id: data.id },\n      });\n    } catch (error) {\n      console.error('Error deleting lead:', error);\n      res.status(500).json({ status: 'error', message: error.message });\n    }\n  });\n\n  // POST /api/leads/:id/convert - Convert lead to contact/opportunity\n  /**\n   * @openapi\n   * /api/leads/{id}/convert:\n   *   post:\n   *     summary: Convert lead\n   *     description: Convert a lead into a contact and optionally create an account and opportunity.\n   *     tags: [leads]\n   *     parameters:\n   *       - in: path\n   *         name: id\n   *         required: true\n   *         schema: { type: string }\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           schema:\n   *             type: object\n   *             properties:\n   *               tenant_id: { type: string }\n   *               create_account: { type: boolean }\n   *               account_name: { type: string }\n   *               selected_account_id: { type: string, nullable: true }\n   *               create_opportunity: { type: boolean }\n   *               opportunity_name: { type: string }\n   *               opportunity_amount: { type: number }\n   *     responses:\n   *       200:\n   *         description: Lead converted\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/Success'\n   */\n  router.post('/:id/convert', async (req, res) => {\n    try {\n      const { id } = req.params;\n      const {\n        tenant_id,\n        performed_by,\n        create_account = false,\n        account_name,\n        selected_account_id,\n        create_opportunity = false,\n        opportunity_name,\n        opportunity_amount,\n      } = req.body || {};\n\n      if (!tenant_id) {\n        return res.status(400).json({ status: 'error', message: 'tenant_id is required' });\n      }\n\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\n      const supabase = getSupabaseClient();\n\n      // Fetch the lead\n      const { data: lead, error: leadErr } = await supabase\n        .from('leads')\n        .select('*')\n        .eq('id', id)\n        .eq('tenant_id', tenant_id)\n        .single();\n      if (leadErr?.code === 'PGRST116') {\n        return res.status(404).json({ status: 'error', message: 'Lead not found' });\n      }\n      if (leadErr) throw new Error(leadErr.message);\n\n      // Prepare bookkeeping for compensating actions if something fails\n      let accountId = selected_account_id || null;\n      let newAccount = null;\n      let contact = null;\n      let opportunity = null;\n\n      try {\n        // Create account if requested\n        if (!accountId && create_account) {\n          const name = (account_name || lead.company || '').trim();\n          if (!name) throw new Error('Account name is required to create a new account');\n          const nowIso = new Date().toISOString();\n          const { data: acc, error: accErr } = await supabase\n            .from('accounts')\n            .insert([{\n              tenant_id,\n              name,\n              phone: lead.phone || null,\n              assigned_to: lead.assigned_to || performed_by || null,\n              created_at: nowIso,\n              updated_at: nowIso,\n            }])\n            .select('*')\n            .single();\n          if (accErr) throw new Error(accErr.message);\n          newAccount = acc;\n          accountId = newAccount.id;\n        }\n\n        // Create contact from lead\n        const nowIso = new Date().toISOString();\n        const { data: cont, error: contErr } = await supabase\n          .from('contacts')\n          .insert([{\n            tenant_id,\n            account_id: accountId || null,\n            first_name: lead.first_name,\n            last_name: lead.last_name,\n            email: lead.email,\n            phone: lead.phone,\n            job_title: lead.job_title,\n            status: 'prospect',\n            metadata: { converted_from_lead_id: lead.id, source: lead.source || null },\n            assigned_to: lead.assigned_to || performed_by || null,\n            created_at: nowIso,\n            updated_at: nowIso,\n          }])\n          .select('*')\n          .single();\n        if (contErr) throw new Error(contErr.message);\n        contact = cont;\n\n        // Optionally create Opportunity\n        if (create_opportunity) {\n          const oppName = (opportunity_name && opportunity_name.trim()) || `${lead.first_name || ''} ${lead.last_name || ''}`.trim() || 'New Opportunity';\n          const oppAmt = Number(opportunity_amount || lead.estimated_value || 0) || 0;\n          const closeDate = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().slice(0, 10);\n          const { data: opp, error: oppErr } = await supabase\n            .from('opportunities')\n            .insert([{\n              tenant_id,\n              name: oppName,\n              account_id: accountId || null,\n              contact_id: contact.id,\n              stage: 'prospecting',\n              amount: oppAmt,\n              probability: 25,\n              assigned_to: lead.assigned_to || performed_by || null,\n              close_date: closeDate,\n              created_at: nowIso,\n              updated_at: nowIso,\n            }])\n            .select('*')\n            .single();\n          if (oppErr) throw new Error(oppErr.message);\n          opportunity = opp;\n        }\n\n        // Re-link Activities from lead -> contact\n        await supabase\n          .from('activities')\n          .update({ related_to: 'contact', related_id: contact.id, updated_date: nowIso })\n          .eq('tenant_id', tenant_id)\n          .eq('related_to', 'lead')\n          .eq('related_id', lead.id);\n\n        // Re-link opportunities that reference this lead (best-effort)\n        try {\n          // TODO: PostgREST doesn't support jsonb ->> operator directly; skip metadata-based lookup\n          // Instead try description ILIKE\n          await supabase\n            .from('opportunities')\n            .update({\n              contact_id: contact.id,\n              account_id: accountId || null,\n              updated_at: nowIso,\n            })\n            .eq('tenant_id', tenant_id)\n            .ilike('description', `%[Lead:${lead.id}]%`);\n\n          console.log('[Leads] Converted: attempted to relink opportunities by description');\n        } catch (oppLinkErr) {\n          console.warn('[Leads] Failed to relink opportunities from lead', oppLinkErr);\n        }\n\n        // Record transition snapshot\n        const transLib = await import('../lib/transitions.js');\n        await transLib.logEntityTransition(supabase, {\n          tenant_id,\n          from_table: 'leads',\n          from_id: lead.id,\n          to_table: 'contacts',\n          to_id: contact.id,\n          action: 'convert',\n          performed_by,\n          snapshot: lead,\n        });\n\n        // Delete lead\n        await supabase.from('leads').delete().eq('id', lead.id).eq('tenant_id', tenant_id);\n\n        return res.json({\n          status: 'success',\n          message: 'Lead converted and moved to contacts',\n          data: { contact, account: newAccount, opportunity }\n        });\n\n      } catch (innerErr) {\n        // Compensate created records when running without DB transactions (best-effort)\n        console.error('[Leads] conversion inner error, attempting cleanup:', innerErr.message || innerErr);\n        try {\n          if (opportunity && opportunity.id) await supabase.from('opportunities').delete().eq('id', opportunity.id).eq('tenant_id', tenant_id);\n        } catch (e) { console.warn('Cleanup opportunity failed', e.message || e); }\n        try {\n          if (contact && contact.id) await supabase.from('contacts').delete().eq('id', contact.id).eq('tenant_id', tenant_id);\n        } catch (e) { console.warn('Cleanup contact failed', e.message || e); }\n        try {\n          if (newAccount && newAccount.id) await supabase.from('accounts').delete().eq('id', newAccount.id).eq('tenant_id', tenant_id);\n        } catch (e) { console.warn('Cleanup account failed', e.message || e); }\n\n        console.error('[Leads] convert error:', innerErr);\n        return res.status(500).json({ status: 'error', message: innerErr.message || String(innerErr) });\n      }\n    } catch (error) {\n      console.error('[Leads] convert error:', error);\n      return res.status(500).json({ status: 'error', message: error.message });\n    }\n  });\n\n  return router;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\mcp.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'pgPool' is defined but never used. Allowed unused args must match /^_/u.","line":11,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"pgPool"},"fix":{"range":[339,345],"text":""},"desc":"Remove unused variable 'pgPool'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * MCP (Model Context Protocol) Routes\r\n * Server discovery, tool execution, resource management\r\n */\r\n\r\nimport express from \"express\";\r\nimport fetch from \"node-fetch\";\r\nimport { getSupabaseClient } from \"../lib/supabase-db.js\";\r\nimport { createChatCompletion } from \"../lib/aiProvider.js\";\r\n\r\nexport default function createMCPRoutes(pgPool) {\r\n  const router = express.Router();\r\n  const supa = getSupabaseClient();\r\n\r\n  // Minimal OpenAI API key resolution for LLM MCP tools\r\n  const resolveOpenAIKey = async ({ explicitKey, tenantId }) => {\r\n    if (explicitKey) return explicitKey;\r\n    // Try tenant integration first (openai_llm)\r\n    if (tenantId) {\r\n      try {\r\n        const { data: ti, error } = await supa\r\n          .from(\"tenant_integrations\")\r\n          .select(\"api_credentials, integration_type\")\r\n          .eq(\"tenant_id\", tenantId)\r\n          .eq(\"is_active\", true)\r\n          .in(\"integration_type\", [\"openai_llm\"])\r\n          .order(\"updated_at\", { ascending: false, nullsFirst: false })\r\n          .order(\"created_at\", { ascending: false })\r\n          .limit(1);\r\n        if (error) throw error;\r\n        if (ti?.length) {\r\n          const creds = ti[0].api_credentials || {};\r\n          const k = creds.api_key || creds.apiKey || null;\r\n          if (k) return k;\r\n        }\r\n      } catch (e) {\r\n        // non-fatal\r\n        void e;\r\n      }\r\n    }\r\n    // Fallback to system settings table\r\n    try {\r\n      const { data, error } = await supa\r\n        .from(\"system_settings\")\r\n        .select(\"settings\")\r\n        .not(\"settings\", \"is\", null)\r\n        .limit(1);\r\n      if (error) throw error;\r\n      if (data?.length) {\r\n        const settings = data[0].settings;\r\n        const systemOpenAI = typeof settings === \"object\"\r\n          ? settings.system_openai_settings\r\n          : JSON.parse(settings || \"{}\").system_openai_settings;\r\n        if (systemOpenAI?.enabled && systemOpenAI?.openai_api_key) {\r\n          return systemOpenAI.openai_api_key;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      void e;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // GET /api/mcp/servers - List available MCP servers\r\n  router.get(\"/servers\", async (req, res) => {\r\n    try {\r\n      const servers = [];\r\n\r\n      // GitHub MCP server presence is inferred via env token. This is a lightweight proxy/health integration.\r\n      const githubToken = process.env.GITHUB_TOKEN || process.env.GH_TOKEN ||\r\n        null;\r\n      if (githubToken) {\r\n        // Attempt a fast health check against GitHub API\r\n        let healthy = false;\r\n        let identity = null;\r\n        try {\r\n          const resp = await fetch(\"https://api.github.com/user\", {\r\n            headers: {\r\n              \"Authorization\": `Bearer ${githubToken}`,\r\n              \"Accept\": \"application/vnd.github+json\",\r\n              \"User-Agent\": \"aishacrm-mcp-health\",\r\n            },\r\n          });\r\n          if (resp.ok) {\r\n            const json = await resp.json();\r\n            identity = { login: json.login, id: json.id };\r\n            healthy = true;\r\n          }\r\n        } catch (e) {\r\n          // leave healthy=false\r\n          void e;\r\n        }\r\n        servers.push({\r\n          id: \"github\",\r\n          name: \"GitHub MCP\",\r\n          type: \"mcp\",\r\n          transport: \"proxy\",\r\n          configured: true,\r\n          healthy,\r\n          identity,\r\n          docs: \"https://github.com/modelcontextprotocol/servers\",\r\n        });\r\n      } else {\r\n        servers.push({\r\n          id: \"github\",\r\n          name: \"GitHub MCP\",\r\n          type: \"mcp\",\r\n          transport: \"proxy\",\r\n          configured: false,\r\n          healthy: false,\r\n          identity: null,\r\n          missing: [\"GITHUB_TOKEN\"],\r\n        });\r\n      }\r\n\r\n      // Add a lightweight CRM MCP to expose core CRM tools over MCP\r\n      servers.push({\r\n        id: \"crm\",\r\n        name: \"CRM MCP\",\r\n        type: \"mcp\",\r\n        transport: \"proxy\",\r\n        configured: true,\r\n        healthy: true,\r\n        capabilities: [\r\n          \"crm.search_accounts\",\r\n          \"crm.search_contacts\",\r\n          \"crm.search_leads\",\r\n          \"crm.get_record\",\r\n          \"crm.create_activity\",\r\n          \"crm.get_tenant_stats\",\r\n          \"crm.list_workflows\",\r\n          \"crm.execute_workflow\",\r\n        ],\r\n      });\r\n\r\n      // Add a minimal Web Research MCP (Wikipedia only for now)\r\n      servers.push({\r\n        id: \"web\",\r\n        name: \"Web Research MCP\",\r\n        type: \"mcp\",\r\n        transport: \"proxy\",\r\n        configured: true,\r\n        healthy: true,\r\n        capabilities: [\"web.search_wikipedia\", \"web.get_wikipedia_page\"],\r\n      });\r\n\r\n      // Add LLM MCP facade\r\n      servers.push({\r\n        id: \"llm\",\r\n        name: \"LLM MCP\",\r\n        type: \"mcp\",\r\n        transport: \"proxy\",\r\n        configured: true,\r\n        healthy: true,\r\n        capabilities: [\"llm.generate_json\"],\r\n      });\r\n\r\n      res.json({ status: \"success\", data: { servers } });\r\n    } catch (error) {\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // POST /api/mcp/execute-tool - Execute MCP tool\r\n  router.post(\"/execute-tool\", async (req, res) => {\r\n    try {\r\n      const { server_id, tool_name, parameters } = req.body || {};\r\n\r\n      if (server_id === \"github\") {\r\n        const githubToken = process.env.GITHUB_TOKEN || process.env.GH_TOKEN ||\r\n          null;\r\n        if (!githubToken) {\r\n          return res.status(400).json({\r\n            status: \"error\",\r\n            message: \"GITHUB_TOKEN not configured\",\r\n          });\r\n        }\r\n        // Minimal demo tools to validate wiring without a full MCP gateway\r\n        if (tool_name === \"github.list_repos\") {\r\n          const per_page = Math.min(Number(parameters?.per_page) || 10, 100);\r\n          const resp = await fetch(\r\n            `https://api.github.com/user/repos?per_page=${per_page}`,\r\n            {\r\n              headers: {\r\n                \"Authorization\": `Bearer ${githubToken}`,\r\n                \"Accept\": \"application/vnd.github+json\",\r\n                \"User-Agent\": \"aishacrm-mcp-tools\",\r\n              },\r\n            },\r\n          );\r\n          const json = await resp.json();\r\n          return res.json({ status: \"success\", data: json });\r\n        }\r\n        if (tool_name === \"github.get_user\") {\r\n          const resp = await fetch(\"https://api.github.com/user\", {\r\n            headers: {\r\n              \"Authorization\": `Bearer ${githubToken}`,\r\n              \"Accept\": \"application/vnd.github+json\",\r\n              \"User-Agent\": \"aishacrm-mcp-tools\",\r\n            },\r\n          });\r\n          const json = await resp.json();\r\n          return res.json({ status: \"success\", data: json });\r\n        }\r\n        return res.status(400).json({\r\n          status: \"error\",\r\n          message: `Unknown tool for server 'github': ${tool_name}`,\r\n        });\r\n      }\r\n\r\n      // CRM MCP toolset\r\n      if (server_id === \"crm\") {\r\n        const { tenant_id } = parameters || {};\r\n        if (!tenant_id) {\r\n          return res.status(400).json({\r\n            status: \"error\",\r\n            message: \"tenant_id is required\",\r\n          });\r\n        }\r\n\r\n        // Helper: safe paging\r\n        const limit = Math.min(Number(parameters?.limit) || 10, 100);\r\n        const offset = Math.max(Number(parameters?.offset) || 0, 0);\r\n\r\n        if (tool_name === \"crm.search_accounts\") {\r\n          const q = String(parameters?.q || \"\").trim();\r\n          const { data, error } = await supa\r\n            .from('accounts')\r\n            .select('*')\r\n            .eq('tenant_id', tenant_id)\r\n            .order('created_at', { ascending: false })\r\n            .range(offset, offset + limit - 1);\r\n\r\n          if (error) throw error;\r\n\r\n          // Client-side ILIKE filtering\r\n          let filtered = data || [];\r\n          if (q) {\r\n            const qLower = q.toLowerCase();\r\n            filtered = filtered.filter(row => {\r\n              const name = (row.name || '').toLowerCase();\r\n              const industry = (row.industry || '').toLowerCase();\r\n              const website = (row.website || '').toLowerCase();\r\n              return name.includes(qLower) || industry.includes(qLower) || website.includes(qLower);\r\n            });\r\n          }\r\n\r\n          return res.json({ status: \"success\", data: filtered });\r\n        }\r\n\r\n        if (tool_name === \"crm.search_contacts\") {\r\n          const q = String(parameters?.q || \"\").trim();\r\n          const { data, error } = await supa\r\n            .from('contacts')\r\n            .select('*')\r\n            .eq('tenant_id', tenant_id)\r\n            .order('created_at', { ascending: false })\r\n            .range(offset, offset + limit - 1);\r\n\r\n          if (error) throw error;\r\n\r\n          // Client-side ILIKE filtering\r\n          let filtered = data || [];\r\n          if (q) {\r\n            const qLower = q.toLowerCase();\r\n            filtered = filtered.filter(row => {\r\n              const first_name = (row.first_name || '').toLowerCase();\r\n              const last_name = (row.last_name || '').toLowerCase();\r\n              const email = (row.email || '').toLowerCase();\r\n              return first_name.includes(qLower) || last_name.includes(qLower) || email.includes(qLower);\r\n            });\r\n          }\r\n\r\n          return res.json({ status: \"success\", data: filtered });\r\n        }\r\n\r\n        if (tool_name === \"crm.search_leads\") {\r\n          const q = String(parameters?.q || \"\").trim();\r\n          const { data, error } = await supa\r\n            .from('leads')\r\n            .select('*')\r\n            .eq('tenant_id', tenant_id)\r\n            .order('created_at', { ascending: false })\r\n            .range(offset, offset + limit - 1);\r\n\r\n          if (error) throw error;\r\n\r\n          // Client-side ILIKE filtering\r\n          let filtered = data || [];\r\n          if (q) {\r\n            const qLower = q.toLowerCase();\r\n            filtered = filtered.filter(row => {\r\n              const first_name = (row.first_name || '').toLowerCase();\r\n              const last_name = (row.last_name || '').toLowerCase();\r\n              const email = (row.email || '').toLowerCase();\r\n              const company = (row.company || '').toLowerCase();\r\n              return first_name.includes(qLower) || last_name.includes(qLower) || email.includes(qLower) || company.includes(qLower);\r\n            });\r\n          }\r\n\r\n          return res.json({ status: \"success\", data: filtered });\r\n        }\r\n\r\n        if (tool_name === \"crm.get_record\") {\r\n          const entity = String(parameters?.entity || \"\").toLowerCase();\r\n          const id = String(parameters?.id || \"\").trim();\r\n          const table = {\r\n            account: \"accounts\",\r\n            accounts: \"accounts\",\r\n            contact: \"contacts\",\r\n            contacts: \"contacts\",\r\n            lead: \"leads\",\r\n            leads: \"leads\",\r\n            opportunity: \"opportunities\",\r\n            opportunities: \"opportunities\",\r\n            activity: \"activities\",\r\n            activities: \"activities\",\r\n          }[entity];\r\n          if (!table) {\r\n            return res.status(400).json({\r\n              status: \"error\",\r\n              message: `Unsupported entity: ${entity}`,\r\n            });\r\n          }\r\n          const { data, error } = await supa\r\n            .from(table)\r\n            .select('*')\r\n            .eq('id', id)\r\n            .eq('tenant_id', tenant_id)\r\n            .maybeSingle();\r\n\r\n          if (error) throw error;\r\n\r\n          return res.json({ status: \"success\", data: data || null });\r\n        }\r\n\r\n        if (tool_name === \"crm.create_activity\") {\r\n          const { type, subject, body, related_id, metadata } = parameters ||\r\n            {};\r\n          if (!type) {\r\n            return res.status(400).json({\r\n              status: \"error\",\r\n              message: \"type is required\",\r\n            });\r\n          }\r\n          const { data, error } = await supa\r\n            .from('activities')\r\n            .insert({\r\n              tenant_id,\r\n              type,\r\n              subject: subject || null,\r\n              body: body || null,\r\n              related_id: related_id || null,\r\n              metadata: metadata || {},\r\n              created_at: new Date().toISOString()\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n          if (error) throw error;\r\n\r\n          return res.json({ status: \"success\", data });\r\n        }\r\n\r\n        if (tool_name === \"crm.get_tenant_stats\") {\r\n          const [accounts, contacts, leads, opps, activities] = await Promise\r\n            .all([\r\n              supa.from('accounts').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant_id),\r\n              supa.from('contacts').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant_id),\r\n              supa.from('leads').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant_id),\r\n              supa.from('opportunities').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant_id),\r\n              supa.from('activities').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant_id),\r\n            ]);\r\n          return res.json({\r\n            status: \"success\",\r\n            data: {\r\n              accounts: accounts.count || 0,\r\n              contacts: contacts.count || 0,\r\n              leads: leads.count || 0,\r\n              opportunities: opps.count || 0,\r\n              activities: activities.count || 0,\r\n            },\r\n          });\r\n        }\r\n\r\n        if (tool_name === \"crm.list_workflows\") {\r\n          const active_only = parameters?.active_only !== false;\r\n          let query = supa\r\n            .from('workflows')\r\n            .select('id, name, description, trigger, is_active, created_at, updated_at')\r\n            .eq('tenant_id', tenant_id)\r\n            .order('updated_at', { ascending: false });\r\n          \r\n          if (active_only) {\r\n            query = query.eq('is_active', true);\r\n          }\r\n\r\n          const { data, error } = await query;\r\n          if (error) throw error;\r\n\r\n          return res.json({ status: \"success\", data: data || [] });\r\n        }\r\n\r\n        if (tool_name === \"crm.execute_workflow\") {\r\n          const { workflow_id, trigger_data } = parameters || {};\r\n          if (!workflow_id) {\r\n            return res.status(400).json({\r\n              status: \"error\",\r\n              message: \"workflow_id is required\",\r\n            });\r\n          }\r\n\r\n          // Verify workflow exists and belongs to tenant\r\n          const { data: workflow, error: wErr } = await supa\r\n            .from('workflows')\r\n            .select('id, name, is_active, trigger, nodes, connections')\r\n            .eq('id', workflow_id)\r\n            .eq('tenant_id', tenant_id)\r\n            .maybeSingle();\r\n\r\n          if (wErr) throw wErr;\r\n          if (!workflow) {\r\n            return res.status(404).json({\r\n              status: \"error\",\r\n              message: \"Workflow not found\",\r\n            });\r\n          }\r\n\r\n          if (!workflow.is_active) {\r\n            return res.status(400).json({\r\n              status: \"error\",\r\n              message: \"Workflow is not active\",\r\n            });\r\n          }\r\n\r\n          // Execute workflow using the existing executor\r\n          // Import executeWorkflowById dynamically to avoid circular dependencies\r\n          const triggerPayload = trigger_data || {};\r\n          \r\n          // Create execution record\r\n          const { data: execution, error: exErr } = await supa\r\n            .from('workflow_executions')\r\n            .insert({\r\n              workflow_id,\r\n              trigger_data: triggerPayload,\r\n              status: 'running',\r\n              execution_log: [],\r\n              created_at: new Date().toISOString(),\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n          if (exErr) throw exErr;\r\n\r\n          try {\r\n            // Execute workflow nodes\r\n            const context = {\r\n              variables: {},\r\n              payload: triggerPayload,\r\n            };\r\n\r\n            const nodes = workflow.nodes || [];\r\n            const connections = workflow.connections || [];\r\n            const executionLog = [];\r\n\r\n            // Helper function to get next node\r\n            const getNextNode = (currentNodeId, branchType = null) => {\r\n              const conn = connections.find(c => \r\n                c.from === currentNodeId && \r\n                (!branchType || c.type === branchType)\r\n              );\r\n              return conn ? nodes.find(n => n.id === conn.to) : null;\r\n            };\r\n\r\n            // Execute nodes sequentially starting after trigger\r\n            let currentNode = nodes.find(n => n.type !== 'webhook_trigger');\r\n            \r\n            while (currentNode) {\r\n              executionLog.push({\r\n                node_id: currentNode.id,\r\n                node_type: currentNode.type,\r\n                timestamp: new Date().toISOString(),\r\n                status: 'executing',\r\n              });\r\n\r\n              try {\r\n                // Execute based on node type (simplified version)\r\n                if (currentNode.type === 'find_lead') {\r\n                  const email = currentNode.config?.email || '';\r\n                  const { data } = await supa\r\n                    .from('leads')\r\n                    .select('*')\r\n                    .eq('tenant_id', tenant_id)\r\n                    .eq('email', email)\r\n                    .maybeSingle();\r\n                  context.variables.found_lead = data || null;\r\n                  executionLog[executionLog.length - 1].result = { found: !!data };\r\n                } else if (currentNode.type === 'condition') {\r\n                  const field = currentNode.config?.field || '';\r\n                  const operator = currentNode.config?.operator || '==';\r\n                  const value = currentNode.config?.value || '';\r\n                  const fieldValue = context.variables[field] || context.payload[field];\r\n                  let conditionMet = false;\r\n                  \r\n                  if (operator === '==' || operator === 'equals') conditionMet = fieldValue == value;\r\n                  else if (operator === '!=' || operator === 'not_equals') conditionMet = fieldValue != value;\r\n                  else if (operator === 'contains') conditionMet = String(fieldValue).includes(value);\r\n                  else if (operator === 'exists') conditionMet = fieldValue != null;\r\n                  \r\n                  executionLog[executionLog.length - 1].result = { condition_met: conditionMet };\r\n                  currentNode = getNextNode(currentNode.id, conditionMet ? 'TRUE' : 'FALSE');\r\n                  continue;\r\n                }\r\n\r\n                executionLog[executionLog.length - 1].status = 'completed';\r\n              } catch (nodeError) {\r\n                executionLog[executionLog.length - 1].status = 'failed';\r\n                executionLog[executionLog.length - 1].error = nodeError.message;\r\n                throw nodeError;\r\n              }\r\n\r\n              currentNode = getNextNode(currentNode.id);\r\n            }\r\n\r\n            // Update execution record with success\r\n            await supa\r\n              .from('workflow_executions')\r\n              .update({\r\n                status: 'success',\r\n                execution_log: executionLog,\r\n                completed_at: new Date().toISOString(),\r\n              })\r\n              .eq('id', execution.id);\r\n\r\n            return res.json({\r\n              status: \"success\",\r\n              data: {\r\n                execution_id: execution.id,\r\n                workflow_id,\r\n                workflow_name: workflow.name,\r\n                status: 'success',\r\n                execution_log: executionLog,\r\n              },\r\n            });\r\n          } catch (execError) {\r\n            // Update execution record with failure\r\n            await supa\r\n              .from('workflow_executions')\r\n              .update({\r\n                status: 'failed',\r\n                execution_log: executionLog,\r\n                error_message: execError.message,\r\n                completed_at: new Date().toISOString(),\r\n              })\r\n              .eq('id', execution.id);\r\n\r\n            return res.status(500).json({\r\n              status: \"error\",\r\n              message: `Workflow execution failed: ${execError.message}`,\r\n              execution_id: execution.id,\r\n            });\r\n          }\r\n        }\r\n\r\n        return res.status(400).json({\r\n          status: \"error\",\r\n          message: `Unknown CRM tool: ${tool_name}`,\r\n        });\r\n      }\r\n\r\n      // Web Research MCP (Wikipedia only, no external keys required)\r\n      if (server_id === \"web\") {\r\n        if (tool_name === \"web.search_wikipedia\") {\r\n          const q = String(parameters?.q || \"\").trim();\r\n          if (!q) {\r\n            return res.status(400).json({\r\n              status: \"error\",\r\n              message: \"q is required\",\r\n            });\r\n          }\r\n          const resp = await fetch(\r\n            `https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srlimit=5&srsearch=${\r\n              encodeURIComponent(q)\r\n            }`,\r\n          );\r\n          const json = await resp.json();\r\n          return res.json({\r\n            status: \"success\",\r\n            data: json?.query?.search || [],\r\n          });\r\n        }\r\n        if (tool_name === \"web.get_wikipedia_page\") {\r\n          const pageid = String(parameters?.pageid || \"\").trim();\r\n          if (!pageid) {\r\n            return res.status(400).json({\r\n              status: \"error\",\r\n              message: \"pageid is required\",\r\n            });\r\n          }\r\n          const resp = await fetch(\r\n            `https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&format=json&pageids=${\r\n              encodeURIComponent(pageid)\r\n            }`,\r\n          );\r\n          const json = await resp.json();\r\n          return res.json({\r\n            status: \"success\",\r\n            data: json?.query?.pages?.[pageid] || null,\r\n          });\r\n        }\r\n        return res.status(400).json({\r\n          status: \"error\",\r\n          message: `Unknown Web tool: ${tool_name}`,\r\n        });\r\n      }\r\n\r\n      // LLM MCP facade\r\n      if (server_id === \"llm\") {\r\n        if (tool_name !== \"llm.generate_json\") {\r\n          return res.status(400).json({ status: \"error\", message: `Unknown LLM tool: ${tool_name}` });\r\n        }\r\n\r\n        const {\r\n          prompt = \"\",\r\n          schema = {},\r\n          context = null,\r\n          model = process.env.DEFAULT_OPENAI_MODEL || \"gpt-4o-mini\",\r\n          temperature = 0.2,\r\n          api_key,\r\n          tenant_id: tenantIdParam,\r\n        } = parameters || {};\r\n\r\n        // Resolve key: explicit > tenant integration > system settings\r\n        const apiKey = await resolveOpenAIKey({ explicitKey: api_key, tenantId: tenantIdParam });\r\n        if (!apiKey) {\r\n          return res.status(501).json({ status: \"error\", message: \"OpenAI API key not configured\" });\r\n        }\r\n\r\n        const SYSTEM_INSTRUCTIONS = `You are a strict JSON generator. Produce ONLY valid JSON that exactly matches the provided JSON Schema.\\n- Do not include any commentary or code fences.\\n- If you are unsure, return the closest valid JSON.\\n`;\r\n\r\n        const userContentParts = [];\r\n        if (prompt) userContentParts.push(String(prompt));\r\n        if (context) {\r\n          if (typeof context === \"string\") userContentParts.push(context);\r\n          else if (Array.isArray(context)) userContentParts.push(context.map((c) => (typeof c === \"string\" ? c : JSON.stringify(c))).join(\"\\n\\n\"));\r\n          else userContentParts.push(JSON.stringify(context));\r\n        }\r\n        if (schema && Object.keys(schema || {}).length) {\r\n          userContentParts.push(`JSON Schema:\\n${JSON.stringify(schema)}`);\r\n        }\r\n\r\n        const messages = [\r\n          { role: \"system\", content: SYSTEM_INSTRUCTIONS },\r\n          { role: \"user\", content: userContentParts.join(\"\\n\\n\") || \"Generate JSON.\" },\r\n        ];\r\n\r\n        const result = await createChatCompletion({ messages, model, temperature, apiKey });\r\n        if (result.status === \"error\") {\r\n          const http = /OPENAI_API_KEY|not configured/i.test(result.error || '') ? 501 : 500;\r\n          return res.status(http).json({ status: \"error\", message: result.error });\r\n        }\r\n        let jsonOut = null;\r\n        try {\r\n          jsonOut = JSON.parse(result.content || \"null\");\r\n        } catch {\r\n          // try to extract JSON block heuristically\r\n          const match = (result.content || \"\").match(/\\{[\\s\\S]*\\}\\s*$/);\r\n          if (match) {\r\n            try { jsonOut = JSON.parse(match[0]); } catch { jsonOut = null; }\r\n          }\r\n        }\r\n        return res.json({ status: \"success\", data: { json: jsonOut, raw: result.content, model: result.model, usage: result.usage } });\r\n      }\r\n\r\n      // Default stub\r\n      res.json({\r\n        status: \"success\",\r\n        message: \"MCP tool execution not yet implemented\",\r\n        data: { server_id, tool_name, parameters },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // GET /api/mcp/resources - Get MCP resources\r\n  router.get(\"/resources\", async (req, res) => {\r\n    try {\r\n      res.json({ status: \"success\", data: { resources: [] } });\r\n    } catch (error) {\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  // GET /api/mcp/github/health - explicit health endpoint for GitHub MCP\r\n  router.get(\"/github/health\", async (req, res) => {\r\n    try {\r\n      const githubToken = process.env.GITHUB_TOKEN || process.env.GH_TOKEN ||\r\n        null;\r\n      if (!githubToken) {\r\n        return res.json({\r\n          status: \"success\",\r\n          data: {\r\n            configured: false,\r\n            healthy: false,\r\n            reason: \"Missing GITHUB_TOKEN\",\r\n          },\r\n        });\r\n      }\r\n      const resp = await fetch(\"https://api.github.com/user\", {\r\n        headers: {\r\n          \"Authorization\": `Bearer ${githubToken}`,\r\n          \"Accept\": \"application/vnd.github+json\",\r\n          \"User-Agent\": \"aishacrm-mcp-health\",\r\n        },\r\n      });\r\n      if (!resp.ok) {\r\n        const text = await resp.text();\r\n        return res.json({\r\n          status: \"success\",\r\n          data: {\r\n            configured: true,\r\n            healthy: false,\r\n            http: resp.status,\r\n            message: text,\r\n          },\r\n        });\r\n      }\r\n      const json = await resp.json();\r\n      return res.json({\r\n        status: \"success\",\r\n        data: {\r\n          configured: true,\r\n          healthy: true,\r\n          identity: { login: json.login, id: json.id },\r\n        },\r\n      });\r\n    } catch (err) {\r\n      return res.json({\r\n        status: \"success\",\r\n        data: { configured: true, healthy: false, error: String(err) },\r\n      });\r\n    }\r\n  });\r\n\r\n  // POST /api/mcp/market-insights - Orchestrate web + CRM tools and summarize via LLM into JSON schema\r\n  router.post(\"/market-insights\", async (req, res) => {\r\n    try {\r\n      const body = req.body || {};\r\n      const tenantId = req.headers[\"x-tenant-id\"] || body.tenant_id || body.tenantId || null;\r\n      if (!tenantId) {\r\n        return res.status(400).json({ status: \"error\", message: \"tenant_id required\" });\r\n      }\r\n\r\n      // Load tenant profile for context\r\n      const { data: tenantRows, error: tErr } = await supa\r\n        .from(\"tenant\")\r\n        .select(\"id, tenant_id, name, industry, business_model, geographic_focus, country, major_city\")\r\n        .or(`tenant_id.eq.${tenantId},id.eq.${tenantId}`)\r\n        .limit(1);\r\n      if (tErr) throw tErr;\r\n      const tenant = tenantRows?.[0] || { tenant_id: tenantId, name: tenantId };\r\n\r\n      const INDUSTRY = tenant.industry || body.industry || \"SaaS & Cloud Services\";\r\n      const BUSINESS_MODEL = tenant.business_model || body.business_model || \"B2B\";\r\n      const GEO = tenant.geographic_focus || body.geographic_focus || \"North America\";\r\n      const LOCATION = tenant.major_city && tenant.country ? `${tenant.major_city}, ${tenant.country}` : (tenant.country || GEO);\r\n\r\n      // CRM stats (reuse logic from crm.get_tenant_stats)\r\n      const [accounts, contacts, leads, opps, activities] = await Promise.all([\r\n        supa.from('accounts').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant.tenant_id || tenantId),\r\n        supa.from('contacts').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant.tenant_id || tenantId),\r\n        supa.from('leads').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant.tenant_id || tenantId),\r\n        supa.from('opportunities').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant.tenant_id || tenantId),\r\n        supa.from('activities').select('*', { count: 'exact', head: true }).eq('tenant_id', tenant.tenant_id || tenantId),\r\n      ]);\r\n      const tenantStats = {\r\n        accounts: accounts.count || 0,\r\n        contacts: contacts.count || 0,\r\n        leads: leads.count || 0,\r\n        opportunities: opps.count || 0,\r\n        activities: activities.count || 0,\r\n      };\r\n\r\n      // Wikipedia context (reuse logic from web tools)\r\n      const searchQ = `${INDUSTRY} market ${LOCATION}`;\r\n      const searchResp = await fetch(`https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srlimit=5&srsearch=${encodeURIComponent(searchQ)}`);\r\n      const searchJson = await searchResp.json();\r\n      const searchResults = searchJson?.query?.search || [];\r\n      let overview = \"\";\r\n      if (searchResults.length) {\r\n        const first = searchResults[0];\r\n        const pageid = String(first.pageid);\r\n        try {\r\n          const pageResp = await fetch(`https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&format=json&pageids=${encodeURIComponent(pageid)}`);\r\n          const pageJson = await pageResp.json();\r\n          overview = pageJson?.query?.pages?.[pageid]?.extract || \"\";\r\n        } catch {\r\n          overview = \"\";\r\n        }\r\n      }\r\n\r\n      // Build JSON schema for insights\r\n      const schema = {\r\n        type: \"object\",\r\n        properties: {\r\n          market_overview: { type: \"string\" },\r\n          swot_analysis: {\r\n            type: \"object\",\r\n            properties: {\r\n              strengths: { type: \"array\", items: { type: \"string\" } },\r\n              weaknesses: { type: \"array\", items: { type: \"string\" } },\r\n              opportunities: { type: \"array\", items: { type: \"string\" } },\r\n              threats: { type: \"array\", items: { type: \"string\" } },\r\n            },\r\n            required: [\"strengths\", \"weaknesses\", \"opportunities\", \"threats\"],\r\n          },\r\n          competitive_landscape: {\r\n            type: \"object\",\r\n            properties: {\r\n              overview: { type: \"string\" },\r\n              major_competitors: { type: \"array\", items: { type: \"string\" } },\r\n              market_dynamics: { type: \"string\" },\r\n            },\r\n            required: [\"overview\", \"major_competitors\"],\r\n          },\r\n          major_news: {\r\n            type: \"array\",\r\n            items: {\r\n              type: \"object\",\r\n              properties: {\r\n                title: { type: \"string\" },\r\n                description: { type: \"string\" },\r\n                date: { type: \"string\" },\r\n                impact: { type: \"string\", enum: [\"positive\", \"negative\", \"neutral\"] },\r\n              },\r\n              required: [\"title\", \"description\", \"date\", \"impact\"],\r\n            },\r\n          },\r\n          recommendations: {\r\n            type: \"array\",\r\n            items: {\r\n              type: \"object\",\r\n              properties: {\r\n                title: { type: \"string\" },\r\n                description: { type: \"string\" },\r\n                priority: { type: \"string\", enum: [\"high\", \"medium\", \"low\"] },\r\n              },\r\n              required: [\"title\", \"description\", \"priority\"],\r\n            },\r\n          },\r\n          economic_indicators: {\r\n            type: \"array\",\r\n            items: {\r\n              type: \"object\",\r\n              properties: {\r\n                name: { type: \"string\" },\r\n                current_value: { type: \"number\" },\r\n                trend: { type: \"string\", enum: [\"up\", \"down\", \"stable\"] },\r\n                unit: { type: \"string\" },\r\n              },\r\n              required: [\"name\", \"current_value\", \"trend\", \"unit\"],\r\n            },\r\n          },\r\n        },\r\n        required: [\"market_overview\", \"swot_analysis\", \"competitive_landscape\", \"major_news\", \"recommendations\", \"economic_indicators\"],\r\n      };\r\n\r\n      // Compose prompt and context for the LLM\r\n      const prompt = `Generate a concise JSON market insight for a company in ${INDUSTRY} (${BUSINESS_MODEL}) focused on ${LOCATION}. Use the schema provided. Use tenant CRM stats to tailor recommendations.`;\r\n      const context = [\r\n        `Tenant: ${tenant.name || tenant.tenant_id}`,\r\n        `Industry: ${INDUSTRY}`,\r\n        `Business Model: ${BUSINESS_MODEL}`,\r\n        `Location: ${LOCATION}`,\r\n        `CRM Stats: ${JSON.stringify(tenantStats)}`,\r\n        `Market Overview Seed: ${overview?.slice(0, 1200) || \"\"}`,\r\n        `News: ${(searchResults || []).map(r => `${r.title}: ${r.snippet || ''}`).join(\" | \").slice(0, 1500)}`,\r\n      ];\r\n\r\n      // Generate JSON via LLM MCP tool (internally call our facade directly)\r\n      const apiKey = await resolveOpenAIKey({ explicitKey: body.api_key || null, tenantId });\r\n      if (!apiKey) {\r\n        // Fallback: return a baseline insights object without LLM\r\n        const strip = (s) => String(s || '').replace(/<[^>]+>/g, '').trim();\r\n        const baseline = {\r\n          market_overview: overview || `Market context for ${INDUSTRY} in ${LOCATION}.`,\r\n          swot_analysis: {\r\n            strengths: [\r\n              `${INDUSTRY} demand resilience in ${LOCATION}`,\r\n              `Growing digital adoption in ${LOCATION}`,\r\n            ],\r\n            weaknesses: [\r\n              `Operational costs volatility`,\r\n              `Talent acquisition challenges`,\r\n            ],\r\n            opportunities: [\r\n              `Niche positioning within ${INDUSTRY}`,\r\n              `Automation and AI-driven efficiency`,\r\n            ],\r\n            threats: [\r\n              `Competitive pressure from incumbents and startups`,\r\n              `Regulatory uncertainty`,\r\n            ],\r\n          },\r\n          competitive_landscape: {\r\n            overview: `Competitive environment in ${LOCATION} features both established players and challengers. Differentiate on niche focus and velocity.`,\r\n            major_competitors: (searchResults || []).slice(0, 3).map((r) => r?.title || 'Key competitor'),\r\n            market_dynamics: `Monitor pricing pressure and emerging substitutes; emphasize speed-to-value.`,\r\n          },\r\n          major_news: (searchResults || []).slice(0, 5).map((r) => ({\r\n            title: r?.title || 'Industry update',\r\n            description: strip(r?.snippet || ''),\r\n            date: new Date().toISOString().slice(0, 10),\r\n            impact: 'neutral',\r\n          })),\r\n          recommendations: [\r\n            {\r\n              title: 'Tighten ICP and messaging',\r\n              description: `Focus on segments with strong fit in ${LOCATION}; align outreach with ${INDUSTRY} pain points.`,\r\n              priority: 'high',\r\n            },\r\n            {\r\n              title: 'Double down on pipeline hygiene',\r\n              description: `Improve conversion tracking and deal reviews to increase forecast accuracy.`,\r\n              priority: 'medium',\r\n            },\r\n            ...(tenantStats.activities < 10 ? [{\r\n              title: 'Increase sales activity',\r\n              description: 'Low recent activity detected; run outreach sprints to boost top-of-funnel.',\r\n              priority: 'high',\r\n            }] : []),\r\n            ...(tenantStats.opportunities === 0 ? [{\r\n              title: 'Kickstart opportunities',\r\n              description: 'No active pipeline found; run targeted campaigns and warm intros to seed opportunities.',\r\n              priority: 'high',\r\n            }] : []),\r\n          ],\r\n          economic_indicators: [\r\n            { name: 'GDP Growth', current_value: 2.2, trend: 'up', unit: 'percent' },\r\n            { name: 'Inflation', current_value: 3.1, trend: 'down', unit: 'percent' },\r\n            { name: 'Unemployment', current_value: 4.0, trend: 'stable', unit: 'percent' },\r\n            { name: 'Venture Funding', current_value: 12.5, trend: 'up', unit: 'USD (B)' },\r\n            { name: 'Industry Index', current_value: 108, trend: 'up', unit: 'index' },\r\n          ],\r\n        };\r\n        return res.json({ status: 'success', data: { insights: baseline, model: null, usage: null, fallback: true } });\r\n      }\r\n\r\n      const SYSTEM = `You are a strict JSON generator. Output ONLY JSON matching the schema. No commentary.`;\r\n      const messages = [\r\n        { role: \"system\", content: SYSTEM },\r\n        { role: \"user\", content: `${prompt}\\n\\nSchema:\\n${JSON.stringify(schema)}\\n\\nContext:\\n${context.join(\"\\n\")}` },\r\n      ];\r\n      const model = body.model || process.env.DEFAULT_OPENAI_MODEL || \"gpt-4o-mini\";\r\n      const temperature = typeof body.temperature === \"number\" ? body.temperature : 0.2;\r\n      const result = await createChatCompletion({ messages, model, temperature, apiKey });\r\n      if (result.status === \"error\") {\r\n        const http = /OPENAI_API_KEY|not configured/i.test(result.error || '') ? 501 : 500;\r\n        return res.status(http).json({ status: \"error\", message: result.error });\r\n      }\r\n      let insights = null;\r\n      try { insights = JSON.parse(result.content || \"null\"); } catch { insights = null; }\r\n      if (!insights) {\r\n        // fallback minimal object\r\n        insights = {\r\n          market_overview: overview || `Market context for ${INDUSTRY} in ${LOCATION}.`,\r\n          swot_analysis: { strengths: [], weaknesses: [], opportunities: [], threats: [] },\r\n          competitive_landscape: { overview: \"\", major_competitors: [], market_dynamics: \"\" },\r\n          major_news: [],\r\n          recommendations: [],\r\n          economic_indicators: [],\r\n        };\r\n      }\r\n\r\n      return res.json({ status: \"success\", data: { insights, model: result.model, usage: result.usage } });\r\n    } catch (error) {\r\n      res.status(500).json({ status: \"error\", message: error.message });\r\n    }\r\n  });\r\n\r\n  return router;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\memory.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\metrics.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\modulesettings.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\notes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\notifications.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\opportunities.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\permissions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\reports.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\security.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\storage.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\synchealths.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\system-logs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\system-settings.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\system.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\systembrandings.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\telephony.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\tenant-integrations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\tenant-resolve.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'pgPool' is defined but never used. Allowed unused args must match /^_/u.","line":4,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"pgPool"},"fix":{"range":[214,220],"text":""},"desc":"Remove unused variable 'pgPool'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import express from 'express';\r\nimport { resolveCanonicalTenant, getTenantResolveCacheStats, clearTenantResolveCache } from '../lib/tenantCanonicalResolver.js';\r\n\r\nexport default function createTenantResolveRoutes(pgPool) { // pgPool unused but kept for signature consistency\r\n  const router = express.Router();\r\n\r\n  // GET /api/tenantresolve/metrics - Prometheus-style metrics (must be before /:identifier)\r\n  router.get('/metrics', (req, res) => {\r\n    try {\r\n      const stats = getTenantResolveCacheStats();\r\n      const lines = [\r\n        '# HELP tenant_resolve_cache_size Current number of cached tenant resolutions',\r\n        '# TYPE tenant_resolve_cache_size gauge',\r\n        `tenant_resolve_cache_size ${stats.size}`,\r\n        '',\r\n        '# HELP tenant_resolve_cache_hits_total Total number of cache hits',\r\n        '# TYPE tenant_resolve_cache_hits_total counter',\r\n        `tenant_resolve_cache_hits_total ${stats.hits}`,\r\n        '',\r\n        '# HELP tenant_resolve_cache_misses_total Total number of cache misses',\r\n        '# TYPE tenant_resolve_cache_misses_total counter',\r\n        `tenant_resolve_cache_misses_total ${stats.misses}`,\r\n        '',\r\n        '# HELP tenant_resolve_cache_hit_ratio Current cache hit ratio (0-1)',\r\n        '# TYPE tenant_resolve_cache_hit_ratio gauge',\r\n        `tenant_resolve_cache_hit_ratio ${stats.hitRatio.toFixed(4)}`,\r\n        '',\r\n        '# HELP tenant_resolve_cache_ttl_ms Cache TTL in milliseconds',\r\n        '# TYPE tenant_resolve_cache_ttl_ms gauge',\r\n        `tenant_resolve_cache_ttl_ms ${stats.ttlMs}`,\r\n        '',\r\n      ];\r\n      res.setHeader('Content-Type', 'text/plain; version=0.0.4');\r\n      return res.send(lines.join('\\n'));\r\n    } catch (e) {\r\n      return res.status(500).json({ status: 'error', message: e.message });\r\n    }\r\n  });\r\n\r\n  // POST /api/tenantresolve/reset - clear cache and reset counters (must be before /:identifier)\r\n  router.post('/reset', (req, res) => {\r\n    try {\r\n      clearTenantResolveCache();\r\n      return res.json({ status: 'success', message: 'Tenant resolve cache cleared' });\r\n    } catch (e) {\r\n      return res.status(500).json({ status: 'error', message: e.message });\r\n    }\r\n  });\r\n\r\n  // Batch resolve: /api/tenantresolve?ids=a,b,c&stats=true\r\n  router.get('/', async (req, res) => {\r\n    try {\r\n      const raw = req.query.ids;\r\n      if (!raw) {\r\n        return res.status(400).json({ status: 'error', message: 'ids query parameter required' });\r\n      }\r\n      const parts = String(raw).split(',').map(s => s.trim()).filter(Boolean);\r\n      if (parts.length === 0) {\r\n        return res.status(400).json({ status: 'error', message: 'No valid identifiers provided' });\r\n      }\r\n      const results = [];\r\n      for (const id of parts) {\r\n        const resolved = await resolveCanonicalTenant(id);\r\n        results.push({ input: id, ...resolved });\r\n      }\r\n      const payload = { status: 'success', data: results };\r\n      if (req.query.stats === 'true') {\r\n        payload.cache = getTenantResolveCacheStats();\r\n      }\r\n      return res.json(payload);\r\n    } catch (e) {\r\n      return res.status(500).json({ status: 'error', message: e.message });\r\n    }\r\n  });\r\n\r\n  // GET /api/tenantresolve/:identifier?stats=true - resolve canonical tenant\r\n  router.get('/:identifier', async (req, res) => {\r\n    try {\r\n      const { identifier } = req.params;\r\n      const result = await resolveCanonicalTenant(identifier);\r\n      const payload = { status: 'success', data: result };\r\n      if (req.query.stats === 'true') {\r\n        payload.cache = getTenantResolveCacheStats();\r\n      }\r\n      return res.json(payload);\r\n    } catch (e) {\r\n      return res.status(500).json({ status: 'error', message: e.message });\r\n    }\r\n  });\r\n\r\n  return router;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\tenants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\testing.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\validation.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'keyExpr' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":38,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'values' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":553,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":553,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[20005,20042],"text":""},"desc":"Remove unused variable 'values'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'placeholders' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":554,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":554,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"placeholders"},"fix":{"range":[20054,20124],"text":""},"desc":"Remove unused variable 'placeholders'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'insertData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":556,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":556,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"insertData"},"fix":{"range":[20146,20163],"text":""},"desc":"Remove unused variable 'insertData'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Validation Routes\r\n * Data quality, duplicates, validation\r\n * MIGRATED: Added checkDuplicateBeforeCreate and validateAndImport from functions\r\n */\r\n\r\nimport express from 'express';\r\n\r\n// Helper to normalize strings for duplicate detection\r\nfunction normalizeString(str) {\r\n  if (!str) return '';\r\n  return String(str).toLowerCase().trim().replace(/[^a-z0-9]/g, '');\r\n}\r\n\r\n// Helper: dynamic duplicate finder for a given entity and fields (Postgres only)\r\nasync function findDuplicatesInDbSupabase(supabase, entityTable, tenantId, fields = []) {\r\n  if (!supabase || !entityTable || !tenantId || fields.length === 0) {\r\n    return { total: 0, groups: [] };\r\n  }\r\n\r\n  // Whitelist of allowed columns per entity table\r\n  const allowedColumnsMap = {\r\n    contacts: ['first_name', 'last_name', 'email', 'phone'],\r\n    accounts: ['name', 'industry', 'website'],\r\n    leads: ['first_name', 'last_name', 'email', 'company'],\r\n    opportunities: ['name', 'stage', 'amount'],\r\n    activities: ['type', 'subject', 'date'],\r\n  };\r\n  const allowedColumns = allowedColumnsMap[entityTable] || [];\r\n\r\n  // Validate fields against whitelist\r\n  const safeFields = fields.filter((f) => allowedColumns.includes(f));\r\n  if (safeFields.length === 0) {\r\n    return { total: 0, groups: [] };\r\n  }\r\n\r\n  // Build GROUP BY key: coalesce each field to empty string to avoid null grouping issues\r\n  const keyExpr = safeFields\r\n    .map((f) => `COALESCE(${f}::text, '')`)\r\n    .join(` || '|' || `);\r\n\r\n  // Fetch a capped set of rows and aggregate in-memory to avoid server-side GROUP BY\r\n  // Safety cap to control payload size\r\n  const CAP = 5000;\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from(entityTable)\r\n      .select([...new Set(['id', 'tenant_id', ...safeFields])].join(','))\r\n      .eq('tenant_id', tenantId)\r\n      .limit(CAP);\r\n    if (error) throw new Error(error.message);\r\n    const map = new Map();\r\n    for (const row of data || []) {\r\n      const key = safeFields.map((f) => String(row[f] ?? '')).join('|');\r\n      const count = (map.get(key) || 0) + 1;\r\n      map.set(key, count);\r\n    }\r\n    const groups = Array.from(map.entries())\r\n      .filter(([_, cnt]) => cnt > 1)\r\n      .map(([key, cnt]) => ({ key, count: cnt }))\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, 200);\r\n    return { total: groups.length, groups };\r\n  } catch {\r\n    return { total: 0, groups: [] };\r\n  }\r\n}\r\n\r\nexport default function createValidationRoutes(_pgPool) {\r\n  const router = express.Router();\r\n\r\n  // POST /api/validation/find-duplicates - Find duplicate records\r\n  router.post('/find-duplicates', async (req, res) => {\r\n    try {\r\n      const { tenant_id, entity_type, fields = [] } = req.body || {};\r\n\r\n      if (!entity_type || !tenant_id) {\r\n        return res.status(400).json({ status: 'error', message: 'entity_type and tenant_id are required' });\r\n      }\r\n\r\n      // Map entity type to table name (simple pluralization; adjust as needed)\r\n      const tableMap = {\r\n        Contact: 'contacts',\r\n        Account: 'accounts',\r\n        Lead: 'leads',\r\n        Opportunity: 'opportunities',\r\n        Activity: 'activities',\r\n      };\r\n      const table = tableMap[entity_type] || entity_type.toLowerCase();\r\n\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      const result = await findDuplicatesInDbSupabase(supabase, table, tenant_id, fields);\r\n      res.json({ status: 'success', data: { ...result, fields, tenant_id, entity_type } });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  // POST /api/validation/analyze-data-quality - Analyze data quality\r\n  router.post('/analyze-data-quality', async (req, res) => {\r\n    try {\r\n      const { tenant_id } = req.body || {};\r\n\r\n      if (!tenant_id) {\r\n        return res.status(400).json({ status: 'error', message: 'tenant_id required' });\r\n      }\r\n\r\n      // Fetch all data\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      const [contactsRes, accountsRes, leadsRes, opportunitiesRes] = await Promise.all([\r\n        supabase.from('contacts').select('*').eq('tenant_id', tenant_id),\r\n        supabase.from('accounts').select('*').eq('tenant_id', tenant_id),\r\n        supabase.from('leads').select('*').eq('tenant_id', tenant_id),\r\n        supabase.from('opportunities').select('*').eq('tenant_id', tenant_id),\r\n      ]);\r\n      const contacts = contactsRes.data || [];\r\n      const accounts = accountsRes.data || [];\r\n      const leads = leadsRes.data || [];\r\n      const opportunities = opportunitiesRes.data || [];\r\n\r\n      // Helper to check email validity\r\n      const isValidEmail = (email) => {\r\n        if (!email) return false;\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        return emailRegex.test(email);\r\n      };\r\n\r\n      // Helper to check name has invalid characters\r\n      const hasInvalidNameChars = (name) => {\r\n        if (!name) return false;\r\n        // Allow letters, spaces, hyphens, apostrophes, periods\r\n        const invalidRegex = /[^a-zA-Z\\s\\-'.]/;\r\n        return invalidRegex.test(name);\r\n      };\r\n\r\n      // Analyze Contacts\r\n      const contactsData = contacts;\r\n      const contactsIssues = {\r\n        missing_first_name: 0,\r\n        missing_last_name: 0,\r\n        invalid_email: 0,\r\n        missing_contact_info: 0,\r\n        invalid_name_characters: 0,\r\n      };\r\n\r\n      contactsData.forEach((contact) => {\r\n        if (!contact.first_name) contactsIssues.missing_first_name++;\r\n        if (!contact.last_name) contactsIssues.missing_last_name++;\r\n        if (contact.email && !isValidEmail(contact.email)) contactsIssues.invalid_email++;\r\n        if (!contact.email && !contact.phone && !contact.mobile) contactsIssues.missing_contact_info++;\r\n        if (hasInvalidNameChars(contact.first_name) || hasInvalidNameChars(contact.last_name)) {\r\n          contactsIssues.invalid_name_characters++;\r\n        }\r\n      });\r\n\r\n      const contactsTotal = contactsData.length || 1; // Avoid division by zero\r\n      const contactsIssuesCount = Object.values(contactsIssues).reduce((sum, count) => sum + count, 0);\r\n      const contactsIssuesPercentage = (contactsIssuesCount / contactsTotal) * 100;\r\n\r\n      // Analyze Accounts\r\n      const accountsData = accounts;\r\n      const accountsIssues = {\r\n        invalid_email: 0,\r\n        missing_contact_info: 0,\r\n        invalid_name_characters: 0,\r\n      };\r\n\r\n      accountsData.forEach((account) => {\r\n        if (account.email && !isValidEmail(account.email)) accountsIssues.invalid_email++;\r\n        if (!account.email && !account.phone) accountsIssues.missing_contact_info++;\r\n        if (hasInvalidNameChars(account.name)) accountsIssues.invalid_name_characters++;\r\n      });\r\n\r\n      const accountsTotal = accountsData.length || 1;\r\n      const accountsIssuesCount = Object.values(accountsIssues).reduce((sum, count) => sum + count, 0);\r\n      const accountsIssuesPercentage = (accountsIssuesCount / accountsTotal) * 100;\r\n\r\n      // Analyze Leads\r\n      const leadsData = leads;\r\n      const leadsIssues = {\r\n        missing_first_name: 0,\r\n        missing_last_name: 0,\r\n        invalid_email: 0,\r\n        missing_contact_info: 0,\r\n        invalid_name_characters: 0,\r\n      };\r\n\r\n      leadsData.forEach((lead) => {\r\n        if (!lead.first_name) leadsIssues.missing_first_name++;\r\n        if (!lead.last_name) leadsIssues.missing_last_name++;\r\n        if (lead.email && !isValidEmail(lead.email)) leadsIssues.invalid_email++;\r\n        if (!lead.email && !lead.phone) leadsIssues.missing_contact_info++;\r\n        if (hasInvalidNameChars(lead.first_name) || hasInvalidNameChars(lead.last_name)) {\r\n          leadsIssues.invalid_name_characters++;\r\n        }\r\n      });\r\n\r\n      const leadsTotal = leadsData.length || 1;\r\n      const leadsIssuesCount = Object.values(leadsIssues).reduce((sum, count) => sum + count, 0);\r\n      const leadsIssuesPercentage = (leadsIssuesCount / leadsTotal) * 100;\r\n\r\n      // Analyze Opportunities\r\n      const opportunitiesData = opportunities;\r\n      const opportunitiesIssues = {};\r\n\r\n      const opportunitiesTotal = opportunitiesData.length || 1;\r\n      const opportunitiesIssuesCount = 0;\r\n      const opportunitiesIssuesPercentage = 0;\r\n\r\n      const report = {\r\n        contacts: {\r\n          total: contactsTotal,\r\n          issues: contactsIssues,\r\n          issues_count: contactsIssuesCount,\r\n          issues_percentage: contactsIssuesPercentage,\r\n        },\r\n        accounts: {\r\n          total: accountsTotal,\r\n          issues: accountsIssues,\r\n          issues_count: accountsIssuesCount,\r\n          issues_percentage: accountsIssuesPercentage,\r\n        },\r\n        leads: {\r\n          total: leadsTotal,\r\n          issues: leadsIssues,\r\n          issues_count: leadsIssuesCount,\r\n          issues_percentage: leadsIssuesPercentage,\r\n        },\r\n        opportunities: {\r\n          total: opportunitiesTotal,\r\n          issues: opportunitiesIssues,\r\n          issues_count: opportunitiesIssuesCount,\r\n          issues_percentage: opportunitiesIssuesPercentage,\r\n        },\r\n      };\r\n\r\n      res.json({ status: 'success', data: { report }, tenant_id });\r\n    } catch (error) {\r\n      console.error('analyze-data-quality error:', error);\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  // POST /api/validation/validate-record - Validate single record\r\n  router.post('/validate-record', async (req, res) => {\r\n    try {\r\n      const { tenant_id, entity_type, record: _record } = req.body || {};\r\n\r\n      const validation = {\r\n        valid: true,\r\n        errors: [],\r\n        warnings: [],\r\n      };\r\n\r\n      res.json({ status: 'success', data: validation, tenant_id, entity_type });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  // POST /api/validation/check-duplicate-before-create - Check for duplicates before creating record\r\n  router.post('/check-duplicate-before-create', async (req, res) => {\r\n    try {\r\n      const { entity_type, data, tenant_id } = req.body;\r\n\r\n      if (!entity_type || !['Contact', 'Lead', 'Account'].includes(entity_type)) {\r\n        return res.status(400).json({ status: 'error', message: 'Invalid entity_type' });\r\n      }\r\n\r\n      if (!data) {\r\n        return res.status(400).json({ status: 'error', message: 'Data required' });\r\n      }\r\n\r\n      if (!tenant_id) {\r\n        return res.status(400).json({ status: 'error', message: 'tenant_id required' });\r\n      }\r\n\r\n      const potentialDuplicates = [];\r\n      const tableMap = {\r\n        Contact: 'contacts',\r\n        Lead: 'leads',\r\n        Account: 'accounts',\r\n      };\r\n      const table = tableMap[entity_type];\r\n\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n\r\n      if (entity_type === 'Contact' || entity_type === 'Lead') {\r\n        // Check email\r\n        if (data.email) {\r\n          const { data: emailRows, error } = await supabase\r\n            .from(table)\r\n            .select('*')\r\n            .eq('tenant_id', tenant_id)\r\n            .eq('email', data.email);\r\n          if (error) throw new Error(error.message);\r\n          (emailRows || []).forEach((match) => {\r\n            potentialDuplicates.push({\r\n              ...match,\r\n              reason: 'Same email address',\r\n            });\r\n          });\r\n        }\r\n\r\n        // Check phone\r\n        if (data.phone) {\r\n          const phoneNorm = normalizeString(data.phone);\r\n          const { data: allRecords, error } = await supabase\r\n            .from(table)\r\n            .select('id, phone, mobile, first_name, last_name, email')\r\n            .eq('tenant_id', tenant_id);\r\n          if (error) throw new Error(error.message);\r\n          (allRecords || []).forEach((record) => {\r\n            const recordPhone = normalizeString(record.phone || record.mobile);\r\n            if (recordPhone === phoneNorm && !potentialDuplicates.find((d) => d.id === record.id)) {\r\n              potentialDuplicates.push({\r\n                ...record,\r\n                reason: 'Same phone number',\r\n              });\r\n            }\r\n          });\r\n        }\r\n      } else if (entity_type === 'Account') {\r\n        // Check website\r\n        if (data.website) {\r\n          const { data: websiteRows, error } = await supabase\r\n            .from(table)\r\n            .select('*')\r\n            .eq('tenant_id', tenant_id)\r\n            .eq('website', data.website);\r\n          if (error) throw new Error(error.message);\r\n          (websiteRows || []).forEach((match) => {\r\n            potentialDuplicates.push({\r\n              ...match,\r\n              reason: 'Same website',\r\n            });\r\n          });\r\n        }\r\n\r\n        // Check similar company name\r\n        if (data.name) {\r\n          const { data: allAccounts, error } = await supabase\r\n            .from(table)\r\n            .select('id, name, website, email, phone')\r\n            .eq('tenant_id', tenant_id);\r\n          if (error) throw new Error(error.message);\r\n          const nameNorm = normalizeString(data.name);\r\n\r\n          (allAccounts || []).forEach((account) => {\r\n            const accountNameNorm = normalizeString(account.name);\r\n            if (accountNameNorm === nameNorm && !potentialDuplicates.find((d) => d.id === account.id)) {\r\n              potentialDuplicates.push({\r\n                ...account,\r\n                reason: 'Same company name',\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      res.json({\r\n        status: 'success',\r\n        data: {\r\n          has_duplicates: potentialDuplicates.length > 0,\r\n          duplicates: potentialDuplicates,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      console.error('checkDuplicateBeforeCreate error:', error);\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: error.message,\r\n      });\r\n    }\r\n  });\r\n\r\n  // POST /api/validation/validate-and-import - Validate and import records\r\n  router.post('/validate-and-import', async (req, res) => {\r\n    try {\r\n      const { records, entityType, mapping: _mapping, fileName, accountLinkColumn, tenant_id } = req.body;\r\n\r\n      if (!records || !Array.isArray(records) || records.length === 0) {\r\n        return res.status(400).json({\r\n          status: 'error',\r\n          message: 'No records provided',\r\n          successCount: 0,\r\n          failCount: 0,\r\n          errors: [],\r\n        });\r\n      }\r\n\r\n      if (!tenant_id) {\r\n        return res.status(400).json({\r\n          status: 'error',\r\n          message: 'tenant_id required',\r\n          successCount: 0,\r\n          failCount: 0,\r\n          errors: [],\r\n        });\r\n      }\r\n\r\n      console.log(` Import request: ${records.length} ${entityType} records`);\r\n\r\n      const results = {\r\n        successCount: 0,\r\n        failCount: 0,\r\n        errors: [],\r\n        accountsLinked: 0,\r\n        accountsNotFound: 0,\r\n        matchingDetails: [],\r\n      };\r\n\r\n      // Map entity type to table name\r\n      const tableMap = {\r\n        Contact: 'contacts',\r\n        Account: 'accounts',\r\n        Lead: 'leads',\r\n        Opportunity: 'opportunities',\r\n        Activity: 'activities',\r\n        BizDevSource: 'bizdev_sources',\r\n      };\r\n      const table = tableMap[entityType];\r\n\r\n      if (!table) {\r\n        return res.status(400).json({\r\n          status: 'error',\r\n          message: `Unsupported entity type: ${entityType}`,\r\n          successCount: 0,\r\n          failCount: 0,\r\n          errors: [],\r\n        });\r\n      }\r\n\r\n      // Process account linking for Contacts if applicable\r\n      let accountLookupMap = {};\r\n      const { getSupabaseClient } = await import('../lib/supabase-db.js');\r\n      const supabase = getSupabaseClient();\r\n      if (entityType === 'Contact' && accountLinkColumn) {\r\n        console.log(` Processing account links via column: ${accountLinkColumn}`);\r\n        const { data: accountsData, error: accountsErr } = await supabase\r\n          .from('accounts')\r\n          .select('*')\r\n          .eq('tenant_id', tenant_id);\r\n        if (accountsErr) throw new Error(accountsErr.message);\r\n\r\n        // Build lookup map: company name (lowercase) -> account\r\n        (accountsData || []).forEach((account) => {\r\n          if (account.name) {\r\n            accountLookupMap[account.name.toLowerCase().trim()] = account;\r\n          }\r\n          if (account.legacy_id) {\r\n            accountLookupMap[account.legacy_id.toLowerCase().trim()] = account;\r\n          }\r\n          if (account.id) {\r\n            accountLookupMap[account.id.toLowerCase().trim()] = account;\r\n          }\r\n        });\r\n\r\n        console.log(` Built account lookup with ${Object.keys(accountLookupMap).length} entries`);\r\n      }\r\n\r\n      // Process each record\r\n      for (let i = 0; i < records.length; i++) {\r\n        const record = records[i];\r\n        const rowNumber = i + 2; // +2 for header row and 0-index\r\n\r\n        try {\r\n          // Validate required fields based on entity type\r\n          if (entityType === 'Contact') {\r\n            // Require at least one name field, default the other to 'UNK'\r\n            if (!record.first_name && !record.last_name) {\r\n              results.errors.push({\r\n                row_number: rowNumber,\r\n                error: 'Missing required fields: at least first_name or last_name is required',\r\n              });\r\n              results.failCount++;\r\n              continue;\r\n            }\r\n            // Default missing name to 'UNK'\r\n            if (!record.first_name) record.first_name = 'UNK';\r\n            if (!record.last_name) record.last_name = 'UNK';\r\n          } else if (entityType === 'BizDevSource') {\r\n            if (!record.company_name) {\r\n              results.errors.push({\r\n                row_number: rowNumber,\r\n                error: 'Missing required field: company_name is required',\r\n              });\r\n              results.failCount++;\r\n              continue;\r\n            }\r\n            // Set default source if not provided\r\n            if (!record.source) {\r\n              record.source = fileName || 'CSV Import';\r\n            }\r\n          }\r\n\r\n          // Handle account linking for Contacts\r\n          if (entityType === 'Contact' && record._company_name) {\r\n            const companyValue = record._company_name.trim();\r\n            const companyKey = companyValue.toLowerCase();\r\n\r\n            let matchedAccount = accountLookupMap[companyKey];\r\n            let matchMethod = null;\r\n\r\n            if (matchedAccount) {\r\n              if (matchedAccount.name && matchedAccount.name.toLowerCase() === companyKey) {\r\n                matchMethod = 'Company Name';\r\n              } else if (matchedAccount.legacy_id && matchedAccount.legacy_id.toLowerCase() === companyKey) {\r\n                matchMethod = 'Legacy ID';\r\n              } else if (matchedAccount.id && matchedAccount.id.toLowerCase() === companyKey) {\r\n                matchMethod = 'Account ID';\r\n              }\r\n            }\r\n\r\n            if (matchedAccount) {\r\n              record.account_id = matchedAccount.id;\r\n              results.accountsLinked++;\r\n              results.matchingDetails.push({\r\n                rowNumber,\r\n                companyValue,\r\n                matched: true,\r\n                matchMethod,\r\n              });\r\n            } else {\r\n              results.accountsNotFound++;\r\n              results.matchingDetails.push({\r\n                rowNumber,\r\n                companyValue,\r\n                matched: false,\r\n              });\r\n            }\r\n\r\n            delete record._company_name;\r\n          }\r\n\r\n          // Add tenant_id\r\n          record.tenant_id = tenant_id;\r\n\r\n          // Build INSERT query dynamically\r\n          const fields = Object.keys(record);\r\n          const values = Object.values(record);\r\n          const placeholders = fields.map((_, idx) => `$${idx + 1}`).join(', ');\r\n\r\n          const { data: insertData, error: insertErr } = await supabase\r\n            .from(table)\r\n            .insert([record])\r\n            .select('*')\r\n            .single();\r\n          if (insertErr) throw new Error(insertErr.message);\r\n          results.successCount++;\r\n        } catch (error) {\r\n          console.error(`Row ${rowNumber} failed:`, error);\r\n          results.errors.push({\r\n            row_number: rowNumber,\r\n            error: error.message || 'Unknown error',\r\n          });\r\n          results.failCount++;\r\n        }\r\n      }\r\n\r\n      console.log(` Import complete: ${results.successCount} success, ${results.failCount} failed`);\r\n\r\n      res.json({\r\n        status: 'success',\r\n        data: results,\r\n      });\r\n    } catch (error) {\r\n      console.error(' validateAndImport error:', error);\r\n      res.status(500).json({\r\n        status: 'error',\r\n        message: `An unexpected server error occurred: ${error.message}`,\r\n        successCount: 0,\r\n        failCount: 0,\r\n        errors: [],\r\n      });\r\n    }\r\n  });\r\n\r\n  return router;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\webhooks.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\workflowexecutions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\routes\\workflows.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run-any-migration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run-migration-031.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run-migration-supabase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run-migration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run-perf-indexes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run-revenue-migration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\run_sql.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\check-index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\check-rls-ci.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\cleanup-duplicates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\cleanup-e2e-users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\cleanup-test-data.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\final-validation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\purge-preserve-superadmin.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\query_views.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\run-sql.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\run_braid_tools.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\run_migrations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\run_seed.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\seed-cron-jobs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\seed-demo-workflow.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\sync-user-from-auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\validate_braid_convert.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\validate_braid_create.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\validate_braid_crud.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\validate_braid_notes_crud.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\scripts\\validate_braid_tools.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\seed-test-data.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\seed-test-tenant.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\seed-won-deals.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\server.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\sync-user-to-auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-activities.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-activity-filter.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-ai-campaigns.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-ai-revenue.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-all-metadata.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-cron-system.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-data-counts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-db-connection.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-direct-connection.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-endpoints.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-generate-unique-id.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-key-endpoints.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-mcp-stats.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-metadata-merge.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-name-validation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-supabase-api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-time-deletes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-unique-id-e2e.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test-with-search-path.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\accounts.route.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\activities.filters.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\activities.route.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\contacts.route.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\leads.pagination.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\leads.route.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\notes.route.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\opportunities.route.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\metrics.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\reports.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\system-logs.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\system.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\testing.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\utils.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\test\\routes\\validation.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\tests\\opportunityStageUpdate.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\tests\\superadminCrossTenantAccess.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\tmp-check-accounts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\update-cron-function-names.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\validate-all-schemas.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\verify-function-security.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\verify-indexes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\verify-rls.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\verify-test-user.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\backend\\workers\\emailWorker.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\sdk\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\braid-actors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\braid-adapter.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\braid-parse.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\braid-rt.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\braid-test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\braid-transpile.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\formatter.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\run-policy-tests.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\validate.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-llm-kit\\tools\\verify-schema.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\braid-mcp-node-server\\scripts\\test-mcp-audit.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'data' is assigned a value but never used. Allowed unused vars must match /^(?:React|_)/u.","line":70,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[2327,2332],"text":""},"desc":"Remove unused variable 'data'."}]}],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":18,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":19,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":20,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":21,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":23,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":42,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":24,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":28,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":31,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":32,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":36,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":92,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":151,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":151,"column":73,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":80,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":153,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":153,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":154,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":154,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":190,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":190,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":220,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":220,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":222,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":222,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":227,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":227,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":245,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":245,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/* eslint-env node */\r\n/* eslint-disable no-undef */\r\n/*\r\n  Test script for MCP audit logging.\r\n  - Sends a sample BraidRequestEnvelope with a create action to the local MCP server\r\n  - Waits a short time then queries Supabase `audit_log` for the request_id\r\n\r\n  Requirements in environment:\r\n  - MCP_URL (default http://localhost:8000)\r\n  - SUPABASE_URL\r\n  - SUPABASE_SERVICE_ROLE_KEY\r\n\r\n  Usage:\r\n    node scripts/test-mcp-audit.js\r\n*/\r\n\r\nconst path = require('path');\r\nconst dotenv = require('dotenv');\r\nconst fetch = require('node-fetch');\r\nconst { createClient } = require('@supabase/supabase-js');\r\n\r\nconst backendEnv = path.resolve(__dirname, '..', '..', 'backend', '.env');\r\nconst rootEnv = path.resolve(__dirname, '..', '.env');\r\ndotenv.config({ path: backendEnv, override: false });\r\ndotenv.config({ path: rootEnv, override: false });\r\n\r\nconst MCP_URL = process.env.MCP_URL || 'http://localhost:8000';\r\nconst MCP_RUN = `${MCP_URL.replace(/\\/$/, '')}/mcp/run`;\r\n\r\nconst SUPABASE_URL = process.env.SUPABASE_URL;\r\nconst SUPABASE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\nif (!SUPABASE_URL || !SUPABASE_KEY) {\r\n  console.error('SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY must be set in environment');\r\n  process.exit(1);\r\n}\r\n\r\nconst supa = createClient(SUPABASE_URL, SUPABASE_KEY, { auth: { autoRefreshToken: false, persistSession: false } });\r\n\r\nfunction makeEnvelope(requestId, tenantId) {\r\n  return {\r\n    requestId,\r\n    actor: { id: 'test:user:1', type: 'user', roles: ['tester'] },\r\n    actions: [\r\n      {\r\n        id: 'action-1',\r\n        verb: 'create',\r\n        actor: { id: 'test:user:1', type: 'user' },\r\n        resource: { system: 'crm', kind: 'contacts' },\r\n        payload: { tenant_id: tenantId, first_name: 'MCP', last_name: 'Tester', email: 'mcp-test@example.com' },\r\n        options: { dryRun: false },\r\n        metadata: { requestId, tenant_id: tenantId }\r\n      }\r\n    ],\r\n    createdAt: new Date().toISOString(),\r\n    client: 'mcp-test-script'\r\n  };\r\n}\r\n\r\nasync function sleep(ms) { return new Promise((r) => setTimeout(r, ms)); }\r\n\r\nconst TENANT_TABLE_NAMES = ['tenants', 'tenant'];\r\nlet cachedTenantTable;\r\n\r\nasync function detectTenantTable() {\r\n  if (cachedTenantTable) return cachedTenantTable;\r\n  for (const table of TENANT_TABLE_NAMES) {\r\n    try {\r\n      const { data, error } = await supa.from(table).select('id').limit(1);\r\n      if (!error) {\r\n        cachedTenantTable = table;\r\n        return table;\r\n      }\r\n      if (error && !error.message?.includes('does not exist')) {\r\n        console.warn(`Unexpected error checking table ${table}:`, error.message ?? error);\r\n      }\r\n    } catch (err) {\r\n      if (err && err.message && !err.message.includes('does not exist')) {\r\n        console.warn(`Error probing table ${table}:`, err.message);\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n(async () => {\r\n  const requestId = `test-${Date.now()}`;\r\n  // Attempt to find a tenant to use for this test. The Supabase project used\r\n  // for testing should contain a `tenants` or `tenant` table; otherwise set TENANT_ID\r\n  // env var before running.\r\n  let tenantId = process.env.TENANT_ID;\r\n  // If TENANT_ID provided, it may be either the UUID `id` or the slug `tenant_id`.\r\n  // Try to resolve it to a canonical `id` by looking up `tenant.id` first, then `tenant.tenant_id` (supports both table names).\r\n  async function resolveTenantId(candidate) {\r\n    if (!candidate) return null;\r\n    const table = await detectTenantTable();\r\n    if (!table) return null;\r\n    try {\r\n      // Try match by UUID/id first\r\n      let { data, error } = await supa.from(table).select('id,tenant_id').eq('id', candidate).limit(1);\r\n      if (error) {\r\n        console.warn('Error querying tenants by id:', error.message || error);\r\n      }\r\n      if (data && data.length > 0) return data[0].id;\r\n\r\n      // Next try matching the tenant_id (slug)\r\n      ({ data, error } = await supa.from(table).select('id,tenant_id').eq('tenant_id', candidate).limit(1));\r\n      if (error) {\r\n        console.warn('Error querying tenants by tenant_id:', error.message || error);\r\n      }\r\n      if (data && data.length > 0) return data[0].id;\r\n    } catch (e) {\r\n      console.warn('Could not resolve tenant id from Supabase:', e?.message ?? e);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  if (tenantId) {\r\n    const resolved = await resolveTenantId(tenantId);\r\n    if (resolved) {\r\n      tenantId = resolved;\r\n      console.log('Resolved TENANT_ID to tenant.id:', tenantId);\r\n    } else {\r\n      console.log('TENANT_ID provided but could not resolve to tenant.id; will attempt auto-detect from tenant table.');\r\n      tenantId = null;\r\n    }\r\n  }\r\n\r\n  if (!tenantId) {\r\n    const table = await detectTenantTable();\r\n    if (!table) {\r\n      console.warn('No tenant table detected (checked tenants/tenant).');\r\n    } else {\r\n      try {\r\n        const { data: tenants, error: tErr } = await supa.from(table).select('id').limit(1);\r\n        if (tErr) {\r\n          console.error(`Error querying ${table} table to find a tenant id:`, tErr.message || tErr);\r\n        } else if (tenants && tenants.length > 0) {\r\n          tenantId = tenants[0].id;\r\n          console.log(`Using tenant id from ${table} table:`, tenantId);\r\n        }\r\n      } catch (e) {\r\n        console.warn('Could not auto-detect tenant id from Supabase:', e?.message ?? e);\r\n      }\r\n    }\r\n  }\r\n\r\n  // If still no tenant found, optionally create one in dev/CI when explicitly allowed.\r\n  if (!tenantId) {\r\n    const allowCreate = (process.env.AUTO_CREATE_TENANT === 'true') || (process.env.CI === 'true');\r\n    if (allowCreate) {\r\n      const slug = process.env.AUTO_CREATE_TENANT_SLUG || `auto-tenant-${Date.now()}`;\r\n      const name = process.env.AUTO_CREATE_TENANT_NAME || 'Auto Created Test Tenant';\r\n      console.log('No tenant found  AUTO_CREATE_TENANT enabled, attempting to create tenant with slug:', slug);\r\n      try {\r\n        const table = await detectTenantTable();\r\n        if (!table) {\r\n          console.error('Unable to create tenant because no tenant table could be found (checked tenants/tenant).');\r\n          // Continue without creating a tenant.\r\n        } else {\r\n          const payload = {\r\n            tenant_id: slug,\r\n            name,\r\n            status: 'active',\r\n            subscription_tier: 'free',\r\n            metadata: JSON.stringify({ created_by: 'test-mcp-audit-script', environment: 'ci' })\r\n          };\r\n          const { data: created, error: cErr } = await supa.from(table).insert(payload).select('id').limit(1);\r\n          if (cErr) {\r\n            console.error('Failed to create tenant in Supabase:', cErr.message || cErr);\r\n          } else if (created && created.length > 0) {\r\n            tenantId = created[0].id || created[0];\r\n            console.log('Created tenant id:', tenantId);\r\n          } else if (created && created.id) {\r\n            tenantId = created.id;\r\n            console.log('Created tenant id:', tenantId);\r\n          } else {\r\n            console.warn('Unexpected create response:', created);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Error while attempting to create tenant:', e?.message ?? e);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!tenantId) {\r\n    console.error('No tenant id available. Set TENANT_ID env var or ensure a tenant table exists in Supabase.');\r\n    process.exit(5);\r\n  }\r\n\r\n  const envelope = makeEnvelope(requestId, tenantId);\r\n\r\n  console.log('Sending envelope to MCP:', MCP_RUN);\r\n  const resp = await fetch(MCP_RUN, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(envelope),\r\n  });\r\n  const body = await resp.json().catch(() => null);\r\n  console.log('MCP response status', resp.status, body);\r\n\r\n  // wait a bit for audit insertion\r\n  await sleep(1500);\r\n\r\n  // Query by `request_id` (migration 053 adds this column)\r\n  console.log('Querying Supabase audit_log for request_id=', requestId);\r\n  const { data, error } = await supa\r\n    .from('audit_log')\r\n    .select('id, tenant_id, user_email, action, entity_type, entity_id, changes, ip_address, user_agent, created_at, request_id')\r\n    .eq('request_id', requestId)\r\n    .order('created_at', { ascending: false })\r\n    .limit(5);\r\n\r\n  if (error) {\r\n    console.error('Error querying audit_log:', error.message);\r\n    if (error.message && error.message.includes('column audit_log.request_id does not exist')) {\r\n      console.error('It looks like the `request_id` column is missing. Apply `backend/migrations/053_add_audit_log_request_id.sql` then re-run this test.');\r\n      process.exit(4);\r\n    }\r\n    process.exit(2);\r\n  }\r\n\r\n  if (!data || data.length === 0) {\r\n    console.error('No audit_log entries found for request_id=', requestId);\r\n    process.exit(3);\r\n  }\r\n\r\n  console.log('Found audit_log entries:');\r\n  for (const row of data) {\r\n    console.log(JSON.stringify({\r\n      id: row.id,\r\n      tenant_id: row.tenant_id,\r\n      user_email: row.user_email,\r\n      action: row.action,\r\n      entity_type: row.entity_type,\r\n      entity_id: row.entity_id,\r\n      changes: row.changes,\r\n      ip_address: row.ip_address,\r\n      user_agent: row.user_agent,\r\n      created_at: row.created_at,\r\n    }, null, 2));\r\n  }\r\n  process.exit(0);\r\n})();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\check-log-tenants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\check-tenant-data.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\check-tenants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\create-superadmin.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\create-test-tenant.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\debug-leads.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\dev-frontend.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\playwright.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\backendUrl.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\base44Client.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\conversations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\entities.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\fallbackFunctions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\functions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\integrations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\api\\mockData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\accounts\\AccountCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\accounts\\AccountDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\accounts\\AccountForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\accounts\\BulkActionsMenu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\accounts\\CreateAccountDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\accounts\\__tests__\\AccountForm.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\activities\\AICallActivityForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\activities\\ActivityCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\activities\\ActivityDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\activities\\ActivityForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\activities\\BulkActionsMenu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\agents\\AgentChat.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\agents\\ConversationSidebar.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadList'. Either include it or remove the dependency array.","line":83,"column":6,"nodeType":"ArrayExpression","endLine":83,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [agentName, loadList, tenantId]","fix":{"range":[2961,2982],"text":"[agentName, loadList, tenantId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\AIAssistantWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\AudioPlayerButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\AvatarWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\ChatInterface.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\ChatWindow.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\ClearChatButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\CommandPalette.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\CommandPaletteWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\EnhancedAIAssistant.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\FloatingAIWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\InternetSearchResults.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\MessageBubble.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\MicButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\QuickCreateContactDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\QuickCreateLeadDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\ResearchDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\agentSdkGuard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ai\\chatUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\auth\\ForgotPasswordDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\auth\\PasswordChangeModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\ArchiveIndexViewer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\BizDevSourceCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\BizDevSourceDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\BizDevSourceForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\BulkArchiveDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\BulkDeleteDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\__tests__\\BizDevSourceDetailPanel.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\__tests__\\BizDevSourceForm.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\bizdev\\__tests__\\BizDevSourceWorkflow.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\calendar\\CalendarQuickActions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\calendar\\CalendarToolbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\calendar\\DayView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\calendar\\MonthGrid.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\calendar\\WeekView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\campaigns\\AICampaignDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\campaigns\\AICampaignForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\cashflow\\CashFlowChart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\cashflow\\CashFlowForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\cashflow\\CashFlowSummary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\cashflow\\ReceiptProcessor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\cashflow\\ReceiptSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\contacts\\BulkActionsMenu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\contacts\\ContactCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\contacts\\ContactDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\contacts\\ContactForm.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkForDuplicates'. Either include it or remove the dependency array.","line":295,"column":6,"nodeType":"ArrayExpression","endLine":295,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [checkForDuplicates, contact, user]","fix":{"range":[11733,11748],"text":"[checkForDuplicates, contact, user]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\contacts\\ContactStats.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\contacts\\ContactToLeadDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\DashboardHeader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\EmployeeFilter.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\LazyWidgetLoader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\LeadAgeReport.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\LeadSourceChart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\RecentActivities.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\SalesPipeline.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\StatsGrid.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\TopAccounts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\UserPerformanceCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\dashboard\\WidgetPickerModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\documentation\\GuideRequestAccessSection.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\documentation\\WorkflowGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\documents\\BusinessCardProcessor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\documents\\CashFlowExtractor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\documents\\DocumentExtractor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\documents\\ProcessingHistory.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\employees\\EmployeeDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\employees\\EmployeeForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\employees\\EmployeeInviteDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\employees\\EmployeePermissionsDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\employees\\ResendInviteButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\employees\\__tests__\\EmployeeForm.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\leads\\BulkActionsMenu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\leads\\LeadCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\leads\\LeadConversionDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\leads\\LeadDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\leads\\LeadForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\leads\\__tests__\\LeadForm.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\notifications\\NotificationPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\opportunities\\BulkActionsMenu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\opportunities\\OpportunityCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\opportunities\\OpportunityDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\opportunities\\OpportunityForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\opportunities\\OpportunityKanbanBoard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\opportunities\\OpportunityKanbanCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\AIMarketInsights.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\DataQualityReport.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\ForecastingDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\HistoricalTrends.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\LeadAnalytics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\OverviewStats.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\ProductivityAnalytics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\SalesAnalytics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\reports\\TrendIndicator.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\AIExecutionLogViewer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\ActivityVisibilityDebug.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\AdminOpenAISettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\ApiHealthDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\ApiKeyManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\BillingSettings.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":174,"column":6,"nodeType":"ArrayExpression","endLine":174,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData, user]","fix":{"range":[7523,7529],"text":"[fetchData, user]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\BrandingSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\ClientOffboarding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\ComponentTester.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\CronJobManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\DataConsistencyManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\DataOptimizationDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\DatabaseSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\DenormalizationSync.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\DocumentationSeeder.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\EnhancedUserManagement.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initNavPerms'. Either include it or remove the dependency array.","line":105,"column":8,"nodeType":"ArrayExpression","endLine":105,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [initNavPerms, user]","fix":{"range":[5740,5746],"text":"[initNavPerms, user]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":524,"column":8,"nodeType":"ArrayExpression","endLine":524,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadData]","fix":{"range":[28832,28845],"text":"[currentUser, loadData]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\FieldCustomization.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\FileUploadDiagnostics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\IntegrationSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\IntegrationUsageMonitor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\InternalPerformanceDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\InviteUserDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\LLMUsageMonitor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\LeadVisibilityDiagnostic.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\MCPServerMonitor-enhanced.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^(?:React|_)/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[492,504],"text":""},"desc":"Remove unused variable 'Database'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used. Allowed unused vars must match /^(?:React|_)/u.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"RefreshCw"},"fix":{"range":[551,564],"text":""},"desc":"Remove unused variable 'RefreshCw'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'mcpServerPublic' is defined but never used. Allowed unused vars must match /^(?:React|_)/u.","line":33,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"mcpServerPublic"},"fix":{"range":[630,680],"text":""},"desc":"Remove unused variable 'mcpServerPublic'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'testResults' is assigned a value but never used. Allowed unused vars must match /^(?:React|_)/u.","line":42,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"testResults"},"fix":{"range":[1024,1035],"text":""},"desc":"Remove unused variable 'testResults'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Activity,\n  AlertCircle,\n  AlertTriangle,\n  BarChart3,\n  CheckCircle,\n  CheckCircle2,\n  Clock,\n  Database,\n  Eye,\n  FileText,\n  Globe,\n  Loader2,\n  Lock,\n  RefreshCw,\n  Server,\n  Shield,\n  TrendingUp,\n  Zap,\n} from \"lucide-react\";\nimport { mcpServerPublic } from \"@/api/functions\";\n\nexport default function MCPServerMonitor() {\n  const BRAID_MCP_URL = \"http://localhost:8000\";\n  const BACKEND_URL = import.meta.env.VITE_AISHACRM_BACKEND_URL || \"http://localhost:4001\";\n\n  // State management\n  const [isTesting, setIsTesting] = useState(false);\n  const [isRunningFullTests, setIsRunningFullTests] = useState(false);\n  const [testResults, setTestResults] = useState(null);\n  const [fullTestResults, setFullTestResults] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const logIdCounter = React.useRef(0);\n  const [servers, setServers] = useState([]);\n\n  // Performance metrics\n  const [performanceMetrics, setPerformanceMetrics] = useState({\n    avgResponseTime: 0,\n    uptime: 100,\n    requestsPerMin: 0,\n    errorRate: 0,\n    lastResponseTime: 0\n  });\n\n  // Security & availability\n  const [securityStatus, setSecurityStatus] = useState({\n    tlsEnabled: false,\n    authConfigured: false,\n    directDbAccess: false,\n    lastSecurityCheck: null\n  });\n\n  const [availabilityMetrics, setAvailabilityMetrics] = useState({\n    status: \"unknown\",\n    uptime99: true,\n    lastDowntime: null,\n    consecutiveSuccesses: 0,\n    lastChecked: null\n  });\n\n  const addLog = useCallback((level, message, data = null) => {\n    logIdCounter.current += 1;\n    const newLog = {\n      id: `log-${Date.now()}-${logIdCounter.current}`,\n      timestamp: new Date(),\n      level,\n      message,\n      data,\n    };\n    setLogs((prev) => [newLog, ...prev.slice(0, 99)]);\n  }, []);\n\n  // Helper to execute Braid MCP action\n  const executeBraidAction = async (action) => {\n    const envelope = {\n      requestId: `req-${Date.now()}`,\n      actor: { id: \"user:monitor\", type: \"user\" },\n      createdAt: new Date().toISOString(),\n      actions: [action]\n    };\n\n    const startTime = performance.now();\n    const response = await fetch(`${BRAID_MCP_URL}/mcp/run`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(envelope)\n    });\n    const endTime = performance.now();\n    const responseTime = endTime - startTime;\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    return { result: result.results[0], responseTime };\n  };\n\n  // Comprehensive test suite\n  const runFullTestSuite = async () => {\n    setIsRunningFullTests(true);\n    addLog(\"info\", \" Starting comprehensive MCP test suite...\");\n\n    const tests = [];\n    let passedTests = 0;\n    let failedTests = 0;\n    const startTime = performance.now();\n\n    try {\n      // Test 1: Braid Server Health\n      addLog(\"info\", \"Test 1/9: Braid server health check\");\n      try {\n        const healthStart = performance.now();\n        const healthResp = await fetch(`${BRAID_MCP_URL}/health`);\n        const healthTime = performance.now() - healthStart;\n        const healthData = await healthResp.json();\n\n        if (healthData.status === \"ok\") {\n          tests.push({ name: \"Braid Health\", status: \"pass\", time: healthTime.toFixed(0) });\n          addLog(\"success\", ` Health check passed (${healthTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Health check failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Braid Health\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Health check failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 2: Web Adapter - Wikipedia Search\n      addLog(\"info\", \"Test 2/9: Web adapter - Wikipedia search\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"web\", kind: \"wikipedia-search\" },\n          payload: { q: \"artificial intelligence\" }\n        });\n\n        if (result.status === \"success\" && result.data && result.data.length > 0) {\n          tests.push({ name: \"Wikipedia Search\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} results` });\n          addLog(\"success\", ` Wikipedia search (${responseTime.toFixed(0)}ms, ${result.data.length} results)`);\n          passedTests++;\n        } else {\n          throw new Error(\"No results returned\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Wikipedia Search\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Wikipedia search failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 3: Web Adapter - Get Page\n      addLog(\"info\", \"Test 3/9: Web adapter - Get Wikipedia page\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"read\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"web\", kind: \"wikipedia-page\" },\n          payload: { pageid: \"1\" }\n        });\n\n        if (result.status === \"success\" && result.data) {\n          tests.push({ name: \"Wikipedia Page\", status: \"pass\", time: responseTime.toFixed(0) });\n          addLog(\"success\", ` Wikipedia page retrieval (${responseTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Failed to retrieve page\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Wikipedia Page\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Wikipedia page failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 4: CRM Adapter - Search Accounts\n      addLog(\"info\", \"Test 4/9: CRM adapter - Search accounts\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"accounts\" },\n          metadata: { tenant_id: \"system\" },\n          options: { maxItems: 5 }\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"CRM Accounts\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} records` });\n          addLog(\"success\", ` CRM accounts search (${responseTime.toFixed(0)}ms, ${result.data.length} accounts)`);\n          passedTests++;\n\n          // Update security status\n          setSecurityStatus(prev => ({ ...prev, directDbAccess: true, lastSecurityCheck: new Date().toISOString() }));\n        } else {\n          throw new Error(result.errorMessage || \"Query failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"CRM Accounts\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` CRM accounts failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 5: CRM Adapter - Search Leads\n      addLog(\"info\", \"Test 5/9: CRM adapter - Search leads\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"leads\" },\n          metadata: { tenant_id: \"system\" },\n          options: { maxItems: 5 }\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"CRM Leads\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} records` });\n          addLog(\"success\", ` CRM leads search (${responseTime.toFixed(0)}ms, ${result.data.length} leads)`);\n          passedTests++;\n        } else {\n          throw new Error(result.errorMessage || \"Query failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"CRM Leads\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` CRM leads failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 6: CRM Adapter - Search Contacts\n      addLog(\"info\", \"Test 6/9: CRM adapter - Search contacts\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"contacts\" },\n          metadata: { tenant_id: \"system\" },\n          options: { maxItems: 5 }\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"CRM Contacts\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} records` });\n          addLog(\"success\", ` CRM contacts search (${responseTime.toFixed(0)}ms, ${result.data.length} contacts)`);\n          passedTests++;\n        } else {\n          throw new Error(result.errorMessage || \"Query failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"CRM Contacts\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` CRM contacts failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 7: Mock Adapter\n      addLog(\"info\", \"Test 7/9: Mock adapter\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"read\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"mock\", kind: \"example-entity\" },\n          targetId: \"123\"\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"Mock Adapter\", status: \"pass\", time: responseTime.toFixed(0) });\n          addLog(\"success\", ` Mock adapter (${responseTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(result.errorMessage || \"Mock failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Mock Adapter\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Mock adapter failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 8: Batch Actions\n      addLog(\"info\", \"Test 8/9: Batch actions (CRM + Web)\");\n      try {\n        const envelope = {\n          requestId: `req-${Date.now()}`,\n          actor: { id: \"user:monitor\", type: \"user\" },\n          createdAt: new Date().toISOString(),\n          actions: [\n            {\n              id: \"action-1\",\n              verb: \"search\",\n              actor: { id: \"user:monitor\", type: \"user\" },\n              resource: { system: \"crm\", kind: \"accounts\" },\n              metadata: { tenant_id: \"system\" },\n              options: { maxItems: 2 }\n            },\n            {\n              id: \"action-2\",\n              verb: \"search\",\n              actor: { id: \"user:monitor\", type: \"user\" },\n              resource: { system: \"web\", kind: \"wikipedia-search\" },\n              payload: { q: \"CRM software\" }\n            }\n          ]\n        };\n\n        const batchStart = performance.now();\n        const response = await fetch(`${BRAID_MCP_URL}/mcp/run`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(envelope)\n        });\n        const batchTime = performance.now() - batchStart;\n        const batchResult = await response.json();\n\n        const allSuccess = batchResult.results.every(r => r.status === \"success\");\n\n        if (allSuccess) {\n          tests.push({ name: \"Batch Actions\", status: \"pass\", time: batchTime.toFixed(0), details: \"2 actions\" });\n          addLog(\"success\", ` Batch actions (${batchTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Some batch actions failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Batch Actions\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Batch actions failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 9: Error Handling\n      addLog(\"info\", \"Test 9/9: Error handling validation\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"accounts\" }\n          // Missing tenant_id intentionally\n        });\n\n        if (result.status === \"error\" && result.errorCode === \"MISSING_TENANT\") {\n          tests.push({ name: \"Error Handling\", status: \"pass\", time: responseTime.toFixed(0) });\n          addLog(\"success\", ` Error handling (${responseTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Expected error not returned\");\n        }\n      } catch (error) {\n        // Network errors are failures, validation errors are passes\n        if (error.message.includes(\"Expected error\")) {\n          tests.push({ name: \"Error Handling\", status: \"fail\", error: error.message });\n          addLog(\"error\", ` Error handling failed: ${error.message}`);\n          failedTests++;\n        } else {\n          // Network error during error test\n          tests.push({ name: \"Error Handling\", status: \"fail\", error: error.message });\n          addLog(\"error\", ` Error handling failed: ${error.message}`);\n          failedTests++;\n        }\n      }\n\n      const totalTime = performance.now() - startTime;\n      const avgTime = tests.reduce((acc, t) => acc + (parseFloat(t.time) || 0), 0) / tests.filter(t => t.time).length;\n\n      // Update metrics\n      setPerformanceMetrics({\n        avgResponseTime: avgTime,\n        uptime: passedTests > 0 ? 100 : 0,\n        requestsPerMin: 0,\n        errorRate: (failedTests / (passedTests + failedTests)) * 100,\n        lastResponseTime: avgTime\n      });\n\n      setAvailabilityMetrics({\n        status: failedTests === 0 ? \"healthy\" : failedTests < 3 ? \"degraded\" : \"offline\",\n        uptime99: failedTests === 0,\n        lastDowntime: failedTests > 0 ? new Date().toISOString() : null,\n        consecutiveSuccesses: passedTests,\n        lastChecked: new Date().toISOString()\n      });\n\n      setFullTestResults({\n        tests,\n        passed: passedTests,\n        failed: failedTests,\n        total: passedTests + failedTests,\n        totalTime: totalTime.toFixed(0),\n        avgTime: avgTime.toFixed(0)\n      });\n\n      addLog(\"info\", ` Test suite complete: ${passedTests}/${passedTests + failedTests} passed in ${totalTime.toFixed(0)}ms`);\n    } catch (error) {\n      addLog(\"error\", `Test suite error: ${error.message}`);\n    } finally {\n      setIsRunningFullTests(false);\n    }\n  };\n\n  // Quick health check\n  const testMCPConnection = useCallback(async () => {\n    setIsTesting(true);\n    addLog(\"info\", \"Starting quick health check...\");\n\n    try {\n      // Test Braid server\n      const healthResp = await fetch(`${BRAID_MCP_URL}/health`);\n      const healthData = await healthResp.json();\n\n      if (healthData.status === \"ok\") {\n        addLog(\"success\", \"Braid MCP server is healthy\");\n\n        setAvailabilityMetrics(prev => ({\n          ...prev,\n          status: \"healthy\",\n          consecutiveSuccesses: prev.consecutiveSuccesses + 1,\n          lastChecked: new Date().toISOString()\n        }));\n\n        setTestResults({\n          status: \"success\",\n          message: \"Server is operational\"\n        });\n      } else {\n        throw new Error(\"Health check returned non-OK status\");\n      }\n\n      // Fetch backend MCP servers\n      try {\n        const resp = await fetch(`${BACKEND_URL}/api/mcp/servers`);\n        if (resp.ok) {\n          const json = await resp.json();\n          setServers(json?.data?.servers || []);\n          addLog(\"info\", `Discovered ${json?.data?.servers?.length || 0} backend MCP server(s)`);\n        }\n      } catch (err) {\n        addLog(\"warning\", `Could not fetch backend MCP servers: ${err.message}`);\n      }\n    } catch (error) {\n      addLog(\"error\", `Health check failed: ${error.message}`);\n      setAvailabilityMetrics(prev => ({\n        ...prev,\n        status: \"offline\",\n        consecutiveSuccesses: 0,\n        lastDowntime: new Date().toISOString(),\n        lastChecked: new Date().toISOString()\n      }));\n      setTestResults({\n        status: \"error\",\n        error: error.message\n      });\n    } finally {\n      setIsTesting(false);\n    }\n  }, [BRAID_MCP_URL, BACKEND_URL, addLog]);\n\n  const clearLogs = () => {\n    setLogs([]);\n    addLog(\"info\", \"Logs cleared\");\n  };\n\n  // Run initial health check on mount\n  useEffect(() => {\n    testMCPConnection();\n  }, [testMCPConnection]);\n\n  return (\n    <div className=\"space-y-6\">\n      <Alert className=\"bg-blue-900/30 border-blue-700/50\">\n        <Server className=\"h-4 w-4 text-blue-400\" />\n        <AlertDescription className=\"text-blue-300\">\n          Comprehensive monitoring for the Braid MCP Server - performance, security, availability, and diagnostics.\n        </AlertDescription>\n      </Alert>\n\n      {/* Server Status Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        {/* Availability Status */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <Activity className=\"w-4 h-4\" />\n              Availability\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                {availabilityMetrics.status === \"healthy\" ? (\n                  <>\n                    <CheckCircle2 className=\"w-6 h-6 text-green-500\" />\n                    <span className=\"text-2xl font-bold text-green-400\">Healthy</span>\n                  </>\n                ) : availabilityMetrics.status === \"degraded\" ? (\n                  <>\n                    <AlertTriangle className=\"w-6 h-6 text-yellow-500\" />\n                    <span className=\"text-2xl font-bold text-yellow-400\">Degraded</span>\n                  </>\n                ) : availabilityMetrics.status === \"offline\" ? (\n                  <>\n                    <AlertCircle className=\"w-6 h-6 text-red-500\" />\n                    <span className=\"text-2xl font-bold text-red-400\">Offline</span>\n                  </>\n                ) : (\n                  <>\n                    <Clock className=\"w-6 h-6 text-gray-500\" />\n                    <span className=\"text-2xl font-bold text-gray-400\">Unknown</span>\n                  </>\n                )}\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Last checked: {availabilityMetrics.lastChecked ? new Date(availabilityMetrics.lastChecked).toLocaleTimeString() : \"Never\"}\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Success streak: {availabilityMetrics.consecutiveSuccesses}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Performance Metrics */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <TrendingUp className=\"w-4 h-4\" />\n              Performance\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-baseline gap-2\">\n                <span className=\"text-2xl font-bold text-blue-400\">\n                  {performanceMetrics.avgResponseTime.toFixed(0)}\n                </span>\n                <span className=\"text-sm text-slate-400\">ms avg</span>\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Error rate: {performanceMetrics.errorRate.toFixed(1)}%\n              </div>\n              <Progress value={100 - performanceMetrics.errorRate} className=\"h-1\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Security Status */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <Shield className=\"w-4 h-4\" />\n              Security\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                {securityStatus.directDbAccess ? (\n                  <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                ) : (\n                  <AlertCircle className=\"w-4 h-4 text-gray-500\" />\n                )}\n                <span className=\"text-xs text-slate-300\">Direct DB Access</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Lock className=\"w-4 h-4 text-blue-500\" />\n                <span className=\"text-xs text-slate-300\">Service Role Key</span>\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Tenant isolated \n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Test Results Summary */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <BarChart3 className=\"w-4 h-4\" />\n              Test Results\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {fullTestResults ? (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-2xl font-bold text-green-400\">\n                    {fullTestResults.passed}\n                  </span>\n                  <span className=\"text-sm text-slate-400\">/ {fullTestResults.total}</span>\n                </div>\n                <div className=\"text-xs text-slate-400\">\n                  Avg: {fullTestResults.avgTime}ms\n                </div>\n                <Progress\n                  value={(fullTestResults.passed / fullTestResults.total) * 100}\n                  className=\"h-1\"\n                />\n              </div>\n            ) : (\n              <div className=\"text-sm text-slate-400\">\n                No tests run yet\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Test Controls */}\n      <Card className=\"bg-gray-800 border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center gap-2\">\n            <Zap className=\"w-4 h-4\" />\n            Test Controls\n          </CardTitle>\n          <CardDescription className=\"text-slate-400\">\n            Run diagnostics and comprehensive adapter tests\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex gap-3\">\n            <Button\n              onClick={testMCPConnection}\n              disabled={isTesting || isRunningFullTests}\n              className=\"flex-1\"\n              variant=\"outline\"\n            >\n              {isTesting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Checking...\n                </>\n              ) : (\n                <>\n                  <Activity className=\"w-4 h-4 mr-2\" />\n                  Quick Health Check\n                </>\n              )}\n            </Button>\n\n            <Button\n              onClick={runFullTestSuite}\n              disabled={isTesting || isRunningFullTests}\n              className=\"flex-1\"\n            >\n              {isRunningFullTests ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Running Tests...\n                </>\n              ) : (\n                <>\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  Run Full Test Suite (9 Tests)\n                </>\n              )}\n            </Button>\n          </div>\n\n          {fullTestResults && (\n            <div className=\"mt-4 space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-slate-300 font-medium\">Test Suite Results</span>\n                <Badge className={fullTestResults.failed === 0 ? \"bg-green-600\" : \"bg-yellow-600\"}>\n                  {fullTestResults.passed}/{fullTestResults.total} Passed\n                </Badge>\n              </div>\n              <div className=\"space-y-1\">\n                {fullTestResults.tests.map((test, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex items-center justify-between p-2 bg-slate-900 rounded text-xs\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      {test.status === \"pass\" ? (\n                        <CheckCircle className=\"w-3 h-3 text-green-500\" />\n                      ) : (\n                        <AlertCircle className=\"w-3 h-3 text-red-500\" />\n                      )}\n                      <span className=\"text-slate-300\">{test.name}</span>\n                      {test.details && (\n                        <span className=\"text-slate-500\">({test.details})</span>\n                      )}\n                    </div>\n                    <div className=\"text-slate-400\">\n                      {test.time ? `${test.time}ms` : test.error ? \"Failed\" : \"\"}\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <div className=\"flex items-center justify-between text-xs text-slate-400 pt-2 border-t border-slate-700\">\n                <span>Total execution time</span>\n                <span className=\"font-medium\">{fullTestResults.totalTime}ms</span>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Discovered Backend Servers */}\n      <Card className=\"bg-slate-800 border-slate-700\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-slate-100\">\n            <Globe className=\"w-5 h-5 text-emerald-400\" />\n            <span>Backend MCP Servers (Legacy)</span>\n          </CardTitle>\n          <CardDescription className=\"text-slate-400\">\n            Servers reported by /api/mcp/servers (proxied through backend)\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {servers.length === 0 ? (\n            <p className=\"text-slate-400\">No backend MCP servers configured.</p>\n          ) : (\n            <div className=\"space-y-3\">\n              {servers.map((s) => (\n                <div\n                  key={s.id}\n                  className=\"flex items-center justify-between p-3 bg-slate-900 rounded border border-slate-700\"\n                >\n                  <div className=\"space-y-0.5\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-slate-200 font-medium\">{s.name}</span>\n                      <Badge className={s.configured ? \"bg-green-600\" : \"bg-red-600\"}>\n                        {s.configured ? \"Configured\" : \"Not Configured\"}\n                      </Badge>\n                      <Badge className={s.healthy ? \"bg-green-600\" : \"bg-red-600\"}>\n                        {s.healthy ? \"Healthy\" : \"Offline\"}\n                      </Badge>\n                    </div>\n                    <div className=\"text-xs text-slate-400\">\n                      id: {s.id}  transport: {s.transport}\n                    </div>\n                    {s.identity?.login && (\n                      <div className=\"text-xs text-slate-400\">as @{s.identity.login}</div>\n                    )}\n                    {Array.isArray(s.missing) && s.missing.length > 0 && (\n                      <div className=\"text-xs text-yellow-400\">\n                        Missing: {s.missing.join(\", \")}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Activity Logs */}\n      <Card className=\"bg-gray-800 border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Eye className=\"w-4 h-4\" />\n              Activity Logs\n            </div>\n            <Button variant=\"outline\" size=\"sm\" onClick={clearLogs}>\n              Clear Logs\n            </Button>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n            {logs.length === 0 ? (\n              <div className=\"text-center text-gray-400 py-4\">\n                No logs yet. Run a test to see activity.\n              </div>\n            ) : (\n              logs.map((log) => (\n                <div\n                  key={log.id}\n                  className={`flex items-start gap-3 p-2 rounded text-sm ${\n                    log.level === \"success\"\n                      ? \"bg-green-900/20 text-green-300\"\n                      : log.level === \"error\"\n                      ? \"bg-red-900/20 text-red-300\"\n                      : log.level === \"warning\"\n                      ? \"bg-yellow-900/20 text-yellow-300\"\n                      : \"bg-gray-700 text-gray-300\"\n                  }`}\n                >\n                  <Clock className=\"w-3 h-3 mt-0.5 flex-shrink-0\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs opacity-60\">\n                        {log.timestamp.toLocaleTimeString()}\n                      </span>\n                      <span>{log.message}</span>\n                    </div>\n                    {log.data && (\n                      <pre className=\"text-xs mt-1 opacity-70 whitespace-pre-wrap\">\n                        {JSON.stringify(log.data, null, 2)}\n                      </pre>\n                    )}\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\MCPServerMonitor.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^(?:React|_)/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[492,504],"text":""},"desc":"Remove unused variable 'Database'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used. Allowed unused vars must match /^(?:React|_)/u.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"RefreshCw"},"fix":{"range":[551,564],"text":""},"desc":"Remove unused variable 'RefreshCw'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'mcpServerPublic' is defined but never used. Allowed unused vars must match /^(?:React|_)/u.","line":33,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"mcpServerPublic"},"fix":{"range":[630,680],"text":""},"desc":"Remove unused variable 'mcpServerPublic'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'testResults' is assigned a value but never used. Allowed unused vars must match /^(?:React|_)/u.","line":42,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"testResults"},"fix":{"range":[1024,1035],"text":""},"desc":"Remove unused variable 'testResults'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Activity,\n  AlertCircle,\n  AlertTriangle,\n  BarChart3,\n  CheckCircle,\n  CheckCircle2,\n  Clock,\n  Database,\n  Eye,\n  FileText,\n  Globe,\n  Loader2,\n  Lock,\n  RefreshCw,\n  Server,\n  Shield,\n  TrendingUp,\n  Zap,\n} from \"lucide-react\";\nimport { mcpServerPublic } from \"@/api/functions\";\n\nexport default function MCPServerMonitor() {\n  const BRAID_MCP_URL = \"http://localhost:8000\";\n  const BACKEND_URL = import.meta.env.VITE_AISHACRM_BACKEND_URL || \"http://localhost:4001\";\n\n  // State management\n  const [isTesting, setIsTesting] = useState(false);\n  const [isRunningFullTests, setIsRunningFullTests] = useState(false);\n  const [testResults, setTestResults] = useState(null);\n  const [fullTestResults, setFullTestResults] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const logIdCounter = React.useRef(0);\n  const [servers, setServers] = useState([]);\n\n  // Performance metrics\n  const [performanceMetrics, setPerformanceMetrics] = useState({\n    avgResponseTime: 0,\n    uptime: 100,\n    requestsPerMin: 0,\n    errorRate: 0,\n    lastResponseTime: 0\n  });\n\n  // Security & availability\n  const [securityStatus, setSecurityStatus] = useState({\n    tlsEnabled: false,\n    authConfigured: false,\n    directDbAccess: false,\n    lastSecurityCheck: null\n  });\n\n  const [availabilityMetrics, setAvailabilityMetrics] = useState({\n    status: \"unknown\",\n    uptime99: true,\n    lastDowntime: null,\n    consecutiveSuccesses: 0,\n    lastChecked: null\n  });\n\n  const addLog = useCallback((level, message, data = null) => {\n    logIdCounter.current += 1;\n    const newLog = {\n      id: `log-${Date.now()}-${logIdCounter.current}`,\n      timestamp: new Date(),\n      level,\n      message,\n      data,\n    };\n    setLogs((prev) => [newLog, ...prev.slice(0, 99)]);\n  }, []);\n\n  // Helper to execute Braid MCP action\n  const executeBraidAction = async (action) => {\n    const envelope = {\n      requestId: `req-${Date.now()}`,\n      actor: { id: \"user:monitor\", type: \"user\" },\n      createdAt: new Date().toISOString(),\n      actions: [action]\n    };\n\n    const startTime = performance.now();\n    const response = await fetch(`${BRAID_MCP_URL}/mcp/run`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(envelope)\n    });\n    const endTime = performance.now();\n    const responseTime = endTime - startTime;\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    return { result: result.results[0], responseTime };\n  };\n\n  // Comprehensive test suite\n  const runFullTestSuite = async () => {\n    setIsRunningFullTests(true);\n    addLog(\"info\", \" Starting comprehensive MCP test suite...\");\n\n    const tests = [];\n    let passedTests = 0;\n    let failedTests = 0;\n    const startTime = performance.now();\n\n    try {\n      // Test 1: Braid Server Health\n      addLog(\"info\", \"Test 1/9: Braid server health check\");\n      try {\n        const healthStart = performance.now();\n        const healthResp = await fetch(`${BRAID_MCP_URL}/health`);\n        const healthTime = performance.now() - healthStart;\n        const healthData = await healthResp.json();\n\n        if (healthData.status === \"ok\") {\n          tests.push({ name: \"Braid Health\", status: \"pass\", time: healthTime.toFixed(0) });\n          addLog(\"success\", ` Health check passed (${healthTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Health check failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Braid Health\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Health check failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 2: Web Adapter - Wikipedia Search\n      addLog(\"info\", \"Test 2/9: Web adapter - Wikipedia search\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"web\", kind: \"wikipedia-search\" },\n          payload: { q: \"artificial intelligence\" }\n        });\n\n        if (result.status === \"success\" && result.data && result.data.length > 0) {\n          tests.push({ name: \"Wikipedia Search\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} results` });\n          addLog(\"success\", ` Wikipedia search (${responseTime.toFixed(0)}ms, ${result.data.length} results)`);\n          passedTests++;\n        } else {\n          throw new Error(\"No results returned\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Wikipedia Search\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Wikipedia search failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 3: Web Adapter - Get Page\n      addLog(\"info\", \"Test 3/9: Web adapter - Get Wikipedia page\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"read\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"web\", kind: \"wikipedia-page\" },\n          payload: { pageid: \"1\" }\n        });\n\n        if (result.status === \"success\" && result.data) {\n          tests.push({ name: \"Wikipedia Page\", status: \"pass\", time: responseTime.toFixed(0) });\n          addLog(\"success\", ` Wikipedia page retrieval (${responseTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Failed to retrieve page\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Wikipedia Page\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Wikipedia page failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 4: CRM Adapter - Search Accounts\n      addLog(\"info\", \"Test 4/9: CRM adapter - Search accounts\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"accounts\" },\n          metadata: { tenant_id: \"system\" },\n          options: { maxItems: 5 }\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"CRM Accounts\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} records` });\n          addLog(\"success\", ` CRM accounts search (${responseTime.toFixed(0)}ms, ${result.data.length} accounts)`);\n          passedTests++;\n\n          // Update security status\n          setSecurityStatus(prev => ({ ...prev, directDbAccess: true, lastSecurityCheck: new Date().toISOString() }));\n        } else {\n          throw new Error(result.errorMessage || \"Query failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"CRM Accounts\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` CRM accounts failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 5: CRM Adapter - Search Leads\n      addLog(\"info\", \"Test 5/9: CRM adapter - Search leads\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"leads\" },\n          metadata: { tenant_id: \"system\" },\n          options: { maxItems: 5 }\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"CRM Leads\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} records` });\n          addLog(\"success\", ` CRM leads search (${responseTime.toFixed(0)}ms, ${result.data.length} leads)`);\n          passedTests++;\n        } else {\n          throw new Error(result.errorMessage || \"Query failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"CRM Leads\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` CRM leads failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 6: CRM Adapter - Search Contacts\n      addLog(\"info\", \"Test 6/9: CRM adapter - Search contacts\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"contacts\" },\n          metadata: { tenant_id: \"system\" },\n          options: { maxItems: 5 }\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"CRM Contacts\", status: \"pass\", time: responseTime.toFixed(0), details: `${result.data.length} records` });\n          addLog(\"success\", ` CRM contacts search (${responseTime.toFixed(0)}ms, ${result.data.length} contacts)`);\n          passedTests++;\n        } else {\n          throw new Error(result.errorMessage || \"Query failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"CRM Contacts\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` CRM contacts failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 7: Mock Adapter\n      addLog(\"info\", \"Test 7/9: Mock adapter\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"read\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"mock\", kind: \"example-entity\" },\n          targetId: \"123\"\n        });\n\n        if (result.status === \"success\") {\n          tests.push({ name: \"Mock Adapter\", status: \"pass\", time: responseTime.toFixed(0) });\n          addLog(\"success\", ` Mock adapter (${responseTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(result.errorMessage || \"Mock failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Mock Adapter\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Mock adapter failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 8: Batch Actions\n      addLog(\"info\", \"Test 8/9: Batch actions (CRM + Web)\");\n      try {\n        const envelope = {\n          requestId: `req-${Date.now()}`,\n          actor: { id: \"user:monitor\", type: \"user\" },\n          createdAt: new Date().toISOString(),\n          actions: [\n            {\n              id: \"action-1\",\n              verb: \"search\",\n              actor: { id: \"user:monitor\", type: \"user\" },\n              resource: { system: \"crm\", kind: \"accounts\" },\n              metadata: { tenant_id: \"system\" },\n              options: { maxItems: 2 }\n            },\n            {\n              id: \"action-2\",\n              verb: \"search\",\n              actor: { id: \"user:monitor\", type: \"user\" },\n              resource: { system: \"web\", kind: \"wikipedia-search\" },\n              payload: { q: \"CRM software\" }\n            }\n          ]\n        };\n\n        const batchStart = performance.now();\n        const response = await fetch(`${BRAID_MCP_URL}/mcp/run`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(envelope)\n        });\n        const batchTime = performance.now() - batchStart;\n        const batchResult = await response.json();\n\n        const allSuccess = batchResult.results.every(r => r.status === \"success\");\n\n        if (allSuccess) {\n          tests.push({ name: \"Batch Actions\", status: \"pass\", time: batchTime.toFixed(0), details: \"2 actions\" });\n          addLog(\"success\", ` Batch actions (${batchTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Some batch actions failed\");\n        }\n      } catch (error) {\n        tests.push({ name: \"Batch Actions\", status: \"fail\", error: error.message });\n        addLog(\"error\", ` Batch actions failed: ${error.message}`);\n        failedTests++;\n      }\n\n      // Test 9: Error Handling\n      addLog(\"info\", \"Test 9/9: Error handling validation\");\n      try {\n        const { result, responseTime } = await executeBraidAction({\n          id: \"action-1\",\n          verb: \"search\",\n          actor: { id: \"user:monitor\", type: \"user\" },\n          resource: { system: \"crm\", kind: \"accounts\" }\n          // Missing tenant_id intentionally\n        });\n\n        if (result.status === \"error\" && result.errorCode === \"MISSING_TENANT\") {\n          tests.push({ name: \"Error Handling\", status: \"pass\", time: responseTime.toFixed(0) });\n          addLog(\"success\", ` Error handling (${responseTime.toFixed(0)}ms)`);\n          passedTests++;\n        } else {\n          throw new Error(\"Expected error not returned\");\n        }\n      } catch (error) {\n        // Network errors are failures, validation errors are passes\n        if (error.message.includes(\"Expected error\")) {\n          tests.push({ name: \"Error Handling\", status: \"fail\", error: error.message });\n          addLog(\"error\", ` Error handling failed: ${error.message}`);\n          failedTests++;\n        } else {\n          // Network error during error test\n          tests.push({ name: \"Error Handling\", status: \"fail\", error: error.message });\n          addLog(\"error\", ` Error handling failed: ${error.message}`);\n          failedTests++;\n        }\n      }\n\n      const totalTime = performance.now() - startTime;\n      const avgTime = tests.reduce((acc, t) => acc + (parseFloat(t.time) || 0), 0) / tests.filter(t => t.time).length;\n\n      // Update metrics\n      setPerformanceMetrics({\n        avgResponseTime: avgTime,\n        uptime: passedTests > 0 ? 100 : 0,\n        requestsPerMin: 0,\n        errorRate: (failedTests / (passedTests + failedTests)) * 100,\n        lastResponseTime: avgTime\n      });\n\n      setAvailabilityMetrics({\n        status: failedTests === 0 ? \"healthy\" : failedTests < 3 ? \"degraded\" : \"offline\",\n        uptime99: failedTests === 0,\n        lastDowntime: failedTests > 0 ? new Date().toISOString() : null,\n        consecutiveSuccesses: passedTests,\n        lastChecked: new Date().toISOString()\n      });\n\n      setFullTestResults({\n        tests,\n        passed: passedTests,\n        failed: failedTests,\n        total: passedTests + failedTests,\n        totalTime: totalTime.toFixed(0),\n        avgTime: avgTime.toFixed(0)\n      });\n\n      addLog(\"info\", ` Test suite complete: ${passedTests}/${passedTests + failedTests} passed in ${totalTime.toFixed(0)}ms`);\n    } catch (error) {\n      addLog(\"error\", `Test suite error: ${error.message}`);\n    } finally {\n      setIsRunningFullTests(false);\n    }\n  };\n\n  // Quick health check\n  const testMCPConnection = useCallback(async () => {\n    setIsTesting(true);\n    addLog(\"info\", \"Starting quick health check...\");\n\n    try {\n      // Test Braid server\n      const healthResp = await fetch(`${BRAID_MCP_URL}/health`);\n      const healthData = await healthResp.json();\n\n      if (healthData.status === \"ok\") {\n        addLog(\"success\", \"Braid MCP server is healthy\");\n\n        setAvailabilityMetrics(prev => ({\n          ...prev,\n          status: \"healthy\",\n          consecutiveSuccesses: prev.consecutiveSuccesses + 1,\n          lastChecked: new Date().toISOString()\n        }));\n\n        setTestResults({\n          status: \"success\",\n          message: \"Server is operational\"\n        });\n      } else {\n        throw new Error(\"Health check returned non-OK status\");\n      }\n\n      // Fetch backend MCP servers\n      try {\n        const resp = await fetch(`${BACKEND_URL}/api/mcp/servers`);\n        if (resp.ok) {\n          const json = await resp.json();\n          setServers(json?.data?.servers || []);\n          addLog(\"info\", `Discovered ${json?.data?.servers?.length || 0} backend MCP server(s)`);\n        }\n      } catch (err) {\n        addLog(\"warning\", `Could not fetch backend MCP servers: ${err.message}`);\n      }\n    } catch (error) {\n      addLog(\"error\", `Health check failed: ${error.message}`);\n      setAvailabilityMetrics(prev => ({\n        ...prev,\n        status: \"offline\",\n        consecutiveSuccesses: 0,\n        lastDowntime: new Date().toISOString(),\n        lastChecked: new Date().toISOString()\n      }));\n      setTestResults({\n        status: \"error\",\n        error: error.message\n      });\n    } finally {\n      setIsTesting(false);\n    }\n  }, [BRAID_MCP_URL, BACKEND_URL, addLog]);\n\n  const clearLogs = () => {\n    setLogs([]);\n    addLog(\"info\", \"Logs cleared\");\n  };\n\n  // Run initial health check on mount\n  useEffect(() => {\n    testMCPConnection();\n  }, [testMCPConnection]);\n\n  return (\n    <div className=\"space-y-6\">\n      <Alert className=\"bg-blue-900/30 border-blue-700/50\">\n        <Server className=\"h-4 w-4 text-blue-400\" />\n        <AlertDescription className=\"text-blue-300\">\n          Comprehensive monitoring for the Braid MCP Server - performance, security, availability, and diagnostics.\n        </AlertDescription>\n      </Alert>\n\n      {/* Server Status Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        {/* Availability Status */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <Activity className=\"w-4 h-4\" />\n              Availability\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                {availabilityMetrics.status === \"healthy\" ? (\n                  <>\n                    <CheckCircle2 className=\"w-6 h-6 text-green-500\" />\n                    <span className=\"text-2xl font-bold text-green-400\">Healthy</span>\n                  </>\n                ) : availabilityMetrics.status === \"degraded\" ? (\n                  <>\n                    <AlertTriangle className=\"w-6 h-6 text-yellow-500\" />\n                    <span className=\"text-2xl font-bold text-yellow-400\">Degraded</span>\n                  </>\n                ) : availabilityMetrics.status === \"offline\" ? (\n                  <>\n                    <AlertCircle className=\"w-6 h-6 text-red-500\" />\n                    <span className=\"text-2xl font-bold text-red-400\">Offline</span>\n                  </>\n                ) : (\n                  <>\n                    <Clock className=\"w-6 h-6 text-gray-500\" />\n                    <span className=\"text-2xl font-bold text-gray-400\">Unknown</span>\n                  </>\n                )}\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Last checked: {availabilityMetrics.lastChecked ? new Date(availabilityMetrics.lastChecked).toLocaleTimeString() : \"Never\"}\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Success streak: {availabilityMetrics.consecutiveSuccesses}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Performance Metrics */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <TrendingUp className=\"w-4 h-4\" />\n              Performance\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-baseline gap-2\">\n                <span className=\"text-2xl font-bold text-blue-400\">\n                  {performanceMetrics.avgResponseTime.toFixed(0)}\n                </span>\n                <span className=\"text-sm text-slate-400\">ms avg</span>\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Error rate: {performanceMetrics.errorRate.toFixed(1)}%\n              </div>\n              <Progress value={100 - performanceMetrics.errorRate} className=\"h-1\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Security Status */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <Shield className=\"w-4 h-4\" />\n              Security\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                {securityStatus.directDbAccess ? (\n                  <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                ) : (\n                  <AlertCircle className=\"w-4 h-4 text-gray-500\" />\n                )}\n                <span className=\"text-xs text-slate-300\">Direct DB Access</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Lock className=\"w-4 h-4 text-blue-500\" />\n                <span className=\"text-xs text-slate-300\">Service Role Key</span>\n              </div>\n              <div className=\"text-xs text-slate-400\">\n                Tenant isolated \n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Test Results Summary */}\n        <Card className=\"bg-slate-800 border-slate-700\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-slate-400 flex items-center gap-2\">\n              <BarChart3 className=\"w-4 h-4\" />\n              Test Results\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {fullTestResults ? (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-2xl font-bold text-green-400\">\n                    {fullTestResults.passed}\n                  </span>\n                  <span className=\"text-sm text-slate-400\">/ {fullTestResults.total}</span>\n                </div>\n                <div className=\"text-xs text-slate-400\">\n                  Avg: {fullTestResults.avgTime}ms\n                </div>\n                <Progress\n                  value={(fullTestResults.passed / fullTestResults.total) * 100}\n                  className=\"h-1\"\n                />\n              </div>\n            ) : (\n              <div className=\"text-sm text-slate-400\">\n                No tests run yet\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Test Controls */}\n      <Card className=\"bg-gray-800 border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center gap-2\">\n            <Zap className=\"w-4 h-4\" />\n            Test Controls\n          </CardTitle>\n          <CardDescription className=\"text-slate-400\">\n            Run diagnostics and comprehensive adapter tests\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex gap-3\">\n            <Button\n              onClick={testMCPConnection}\n              disabled={isTesting || isRunningFullTests}\n              className=\"flex-1\"\n              variant=\"outline\"\n            >\n              {isTesting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Checking...\n                </>\n              ) : (\n                <>\n                  <Activity className=\"w-4 h-4 mr-2\" />\n                  Quick Health Check\n                </>\n              )}\n            </Button>\n\n            <Button\n              onClick={runFullTestSuite}\n              disabled={isTesting || isRunningFullTests}\n              className=\"flex-1\"\n            >\n              {isRunningFullTests ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Running Tests...\n                </>\n              ) : (\n                <>\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  Run Full Test Suite (9 Tests)\n                </>\n              )}\n            </Button>\n          </div>\n\n          {fullTestResults && (\n            <div className=\"mt-4 space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-slate-300 font-medium\">Test Suite Results</span>\n                <Badge className={fullTestResults.failed === 0 ? \"bg-green-600\" : \"bg-yellow-600\"}>\n                  {fullTestResults.passed}/{fullTestResults.total} Passed\n                </Badge>\n              </div>\n              <div className=\"space-y-1\">\n                {fullTestResults.tests.map((test, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex items-center justify-between p-2 bg-slate-900 rounded text-xs\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      {test.status === \"pass\" ? (\n                        <CheckCircle className=\"w-3 h-3 text-green-500\" />\n                      ) : (\n                        <AlertCircle className=\"w-3 h-3 text-red-500\" />\n                      )}\n                      <span className=\"text-slate-300\">{test.name}</span>\n                      {test.details && (\n                        <span className=\"text-slate-500\">({test.details})</span>\n                      )}\n                    </div>\n                    <div className=\"text-slate-400\">\n                      {test.time ? `${test.time}ms` : test.error ? \"Failed\" : \"\"}\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <div className=\"flex items-center justify-between text-xs text-slate-400 pt-2 border-t border-slate-700\">\n                <span>Total execution time</span>\n                <span className=\"font-medium\">{fullTestResults.totalTime}ms</span>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Discovered Backend Servers */}\n      <Card className=\"bg-slate-800 border-slate-700\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-slate-100\">\n            <Globe className=\"w-5 h-5 text-emerald-400\" />\n            <span>Backend MCP Servers (Legacy)</span>\n          </CardTitle>\n          <CardDescription className=\"text-slate-400\">\n            Servers reported by /api/mcp/servers (proxied through backend)\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {servers.length === 0 ? (\n            <p className=\"text-slate-400\">No backend MCP servers configured.</p>\n          ) : (\n            <div className=\"space-y-3\">\n              {servers.map((s) => (\n                <div\n                  key={s.id}\n                  className=\"flex items-center justify-between p-3 bg-slate-900 rounded border border-slate-700\"\n                >\n                  <div className=\"space-y-0.5\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-slate-200 font-medium\">{s.name}</span>\n                      <Badge className={s.configured ? \"bg-green-600\" : \"bg-red-600\"}>\n                        {s.configured ? \"Configured\" : \"Not Configured\"}\n                      </Badge>\n                      <Badge className={s.healthy ? \"bg-green-600\" : \"bg-red-600\"}>\n                        {s.healthy ? \"Healthy\" : \"Offline\"}\n                      </Badge>\n                    </div>\n                    <div className=\"text-xs text-slate-400\">\n                      id: {s.id}  transport: {s.transport}\n                    </div>\n                    {s.identity?.login && (\n                      <div className=\"text-xs text-slate-400\">as @{s.identity.login}</div>\n                    )}\n                    {Array.isArray(s.missing) && s.missing.length > 0 && (\n                      <div className=\"text-xs text-yellow-400\">\n                        Missing: {s.missing.join(\", \")}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Activity Logs */}\n      <Card className=\"bg-gray-800 border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-white flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Eye className=\"w-4 h-4\" />\n              Activity Logs\n            </div>\n            <Button variant=\"outline\" size=\"sm\" onClick={clearLogs}>\n              Clear Logs\n            </Button>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n            {logs.length === 0 ? (\n              <div className=\"text-center text-gray-400 py-4\">\n                No logs yet. Run a test to see activity.\n              </div>\n            ) : (\n              logs.map((log) => (\n                <div\n                  key={log.id}\n                  className={`flex items-start gap-3 p-2 rounded text-sm ${\n                    log.level === \"success\"\n                      ? \"bg-green-900/20 text-green-300\"\n                      : log.level === \"error\"\n                      ? \"bg-red-900/20 text-red-300\"\n                      : log.level === \"warning\"\n                      ? \"bg-yellow-900/20 text-yellow-300\"\n                      : \"bg-gray-700 text-gray-300\"\n                  }`}\n                >\n                  <Clock className=\"w-3 h-3 mt-0.5 flex-shrink-0\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs opacity-60\">\n                        {log.timestamp.toLocaleTimeString()}\n                      </span>\n                      <span>{log.message}</span>\n                    </div>\n                    {log.data && (\n                      <pre className=\"text-xs mt-1 opacity-70 whitespace-pre-wrap\">\n                        {JSON.stringify(log.data, null, 2)}\n                      </pre>\n                    )}\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\NavigationPermissions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\PerformanceMonitor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\PerformanceStatusCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\QATestRunner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\QaConsole.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\R2ConfigChecker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SecurityMonitor.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refreshAll'. Either include it or remove the dependency array.","line":148,"column":6,"nodeType":"ArrayExpression","endLine":148,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [refreshAll]","fix":{"range":[4116,4118],"text":"[refreshAll]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SecuritySettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\StripeSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SyncHealthMonitor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SysAdminGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SystemAnnouncements.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SystemHealthDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\SystemLogsViewer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\TenantIntegrationSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\TenantManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\TenantResolveCacheMonitor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\TestDataManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\TimezoneSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\UserDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\UserInfo.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\UserManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\UserPermissions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\UserRecordDiagnostic.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\WebhookEmailSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\WebhookForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\WebhookSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\WebhookSetupGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\settings\\performanceThresholds.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\AICallCenterWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\AIEmailComposer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\AccountSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\AddressFields.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ApiCache.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ApiManager.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":68,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":68,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ApiOptimizer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\BackfillUniqueIdsClient.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\Clock.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ConfirmDialog.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":103,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":103,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ContactSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\CronHeartbeat.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\CsvExportButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\CsvImportDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\DataManagementDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\DatabaseArchitectureGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\DatabaseArchitectureGuide.summary.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\DenormalizationHelper.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\DeploymentGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\DocumentPicker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\EmailTemplateManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\EmployeeScopeContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":134,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":134,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\EmployeeScopeFilter.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\EmployeeSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\EntityAPI.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ErrorLogger.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":12,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":12,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":95,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":95,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":107,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":107,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\FooterBrand.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ForceRefreshButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\FormFields.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\GlobalDetailViewer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\GlobalDomPatches.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\LazyAccountSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\LazyEmployeeSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\LazyPageLoader.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Move your component(s) to a separate file.","line":7,"column":7,"nodeType":"Identifier","messageId":"localComponents","endLine":7,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\LinkContactDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\LoadingManager.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":44,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":44,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\Logger.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":224,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":224,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":241,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":241,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\MCPClient.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":32,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":32,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ModalHost.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ModuleManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\NotesSection.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\NotificationPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\NotifyAdminOnInvite.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\OperationOverlay.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\Pagination.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\PerformanceCache.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\PerformanceTracker.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":6,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":6,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":46,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":46,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\PhoneDisplay.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\PhoneInput.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\PhonePrefixPicker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\PortalRootManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ProductionOptimizations.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":56,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":56,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":69,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":69,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":167,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":167,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\RefactoringDocumentation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\ReferentialIntegrity.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\RefreshButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\RollbackManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\RouteGuard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\SearchableAccountSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\SearchableContactSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\SimpleModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\StatusHelper.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\SummaryButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\SystemStatusIndicator.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\TagFilter.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\TagInput.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\TenantIdViewer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\TenantSetup.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUserAndTenants'. Either include it or remove the dependency array.","line":812,"column":6,"nodeType":"ArrayExpression","endLine":812,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadUserAndTenants]","fix":{"range":[30821,30834],"text":"[currentUser, loadUserAndTenants]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\TenantSwitcher.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\TimezoneContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":38,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":38,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\UniversalDetailPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\UserContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\UserGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\UserPresenceHeartbeat.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\UserSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\WebhookExamples.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\countriesData.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\employeeScopeUtils.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\loggerUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\phoneCountriesData.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\rollback-manager-core.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\statesData.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\tenantContext.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":315,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":315,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\tenantUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\timezoneUtils.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\useBatchedData.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\useEditEntity.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\useLazyLoad.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\useOptimizedQuery.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\useTagFilter.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\useUser.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\shared\\userLoader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\TestRunner.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":48,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":56,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":78,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":86,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'allSuiteNames'. Either include it or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [allSuiteNames]","fix":{"range":[3834,3859],"text":"[allSuiteNames]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":98,"column":7,"nodeType":"CallExpression","endLine":98,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":119,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":126,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":126,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":138,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":336,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":336,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":340,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":340,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":441,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":441,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useState, useRef, useMemo } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport {\n  AlertTriangle,\n  CheckCircle2,\n  Clock,\n  FileText,\n  Play,\n  XCircle,\n} from \"lucide-react\";\nimport { getBackendUrl } from \"@/api/backendUrl\";\nimport { useUser } from '@/components/shared/useUser.js';\n\nconst BACKEND_URL = getBackendUrl();\n\nconst TEST_RESULTS_KEY = 'unit_test_results';\nconst TEST_CONFIG_KEY = 'unit_test_config';\n\nexport default function TestRunner({ testSuites }) {\n  // Initialize results from sessionStorage to survive remounts during test run\n  const [results, setResults] = useState(() => {\n    try {\n      const stored = sessionStorage.getItem(TEST_RESULTS_KEY);\n      if (stored) {\n        console.log('[TestRunner] Initialized from sessionStorage');\n        return JSON.parse(stored);\n      }\n    } catch (e) {\n      console.error('[TestRunner] Failed to restore from sessionStorage:', e);\n    }\n    return [];\n  });\n  // Declare state/refs used by effects BEFORE effects to avoid TDZ/minifier issues\n  const [running, setRunning] = useState(false);\n  const resultsRef = useRef([]);\n  const { user } = useUser();\n  const isSuperadmin = (user?.role || '').toLowerCase() === 'superadmin';\n  const [config, setConfig] = useState(() => {\n    try {\n      const ls = typeof window !== 'undefined' ? window.localStorage?.getItem(TEST_CONFIG_KEY) : null;\n      if (ls) return JSON.parse(ls);\n      const ss = sessionStorage.getItem(TEST_CONFIG_KEY);\n      if (ss) return JSON.parse(ss);\n    } catch (e) { /* ignore config restore error */ }\n    return { workers: 1, rate: 0, delayMs: 0 };\n  });\n  // Named profiles: save/load/delete (persisted to localStorage)\n  const [profiles, setProfiles] = useState(() => {\n    try {\n      const raw = typeof window !== 'undefined' ? window.localStorage?.getItem('unit_test_profiles') : null;\n      if (raw) return JSON.parse(raw) || {};\n    } catch (e) { /* ignore */ }\n    return {};\n  });\n  const [activeProfile, setActiveProfile] = useState('');\n  const [profileNameInput, setProfileNameInput] = useState('');\n  const [hasStoredResults, setHasStoredResults] = useState(false);\n  const syncIntervalRef = useRef(null);\n  const runIdRef = useRef(0);\n  const pollIntervalRef = useRef(null);\n  const startAtRef = useRef(0);\n  const rateLimited429Ref = useRef(0);\n  const [uiStats, setUiStats] = useState({ avgRps: 0, rateLimited429: 0 });\n\n  // Category selection (suites) with persistence\n  const allSuiteNames = useMemo(() => testSuites.map((s) => s.name), [testSuites]);\n  const [selectedCategories, setSelectedCategories] = useState(() => {\n    try {\n      const raw = typeof window !== 'undefined' ? window.localStorage?.getItem('unit_test_selected_categories') : null;\n      if (raw) {\n        const arr = JSON.parse(raw);\n        if (Array.isArray(arr)) return new Set(arr);\n      }\n    } catch (e) { /* ignore */ }\n    return new Set(allSuiteNames);\n  });\n  useEffect(() => {\n    try {\n      if (typeof window !== 'undefined') {\n        window.localStorage?.setItem('unit_test_selected_categories', JSON.stringify(Array.from(selectedCategories)));\n      }\n    } catch (e) { /* ignore */ }\n  }, [selectedCategories]);\n  // Keep selection in sync if suites change\n  useEffect(() => {\n    setSelectedCategories((prev) => {\n      const next = new Set(prev);\n      // Add any new suites\n      for (const n of allSuiteNames) next.add(n);\n      // Remove suites that no longer exist\n      for (const n of Array.from(next)) if (!allSuiteNames.includes(n)) next.delete(n);\n      return next;\n    });\n  }, [allSuiteNames.join('|')]);\n\n  const effectiveSuites = useMemo(() => testSuites.filter((s) => selectedCategories.has(s.name)), [testSuites, selectedCategories]);\n\n  // Detect presence of stored results (for manual restore)\n  useEffect(() => {\n    try {\n      const stored = sessionStorage.getItem(TEST_RESULTS_KEY);\n      setHasStoredResults(!!stored);\n    } catch {\n      setHasStoredResults(false);\n    }\n  }, [results.length]);\n\n  // Persist test config locally for convenience\n  useEffect(() => {\n    try {\n      sessionStorage.setItem(TEST_CONFIG_KEY, JSON.stringify(config));\n      if (typeof window !== 'undefined') {\n        window.localStorage?.setItem(TEST_CONFIG_KEY, JSON.stringify(config));\n      }\n    } catch (e) { /* ignore config persist error */ }\n  }, [config]);\n  useEffect(() => {\n    try {\n      if (typeof window !== 'undefined') {\n        window.localStorage?.setItem('unit_test_profiles', JSON.stringify(profiles));\n      }\n    } catch (e) { /* ignore */ }\n  }, [profiles]);\n\n  const loadProfile = useCallback((name) => {\n    try {\n      const p = profiles?.[name];\n      if (!p) return;\n      setConfig((c) => ({ ...c, workers: p.workers ?? c.workers, rate: p.rate ?? c.rate, delayMs: p.delayMs ?? c.delayMs }));\n      if (Array.isArray(p.categories) && p.categories.length > 0) {\n        setSelectedCategories(new Set(p.categories));\n      }\n      setActiveProfile(name);\n    } catch (e) { /* ignore */ }\n  }, [profiles]);\n\n  const saveProfile = useCallback(() => {\n    const name = profileNameInput?.trim();\n    if (!name) return;\n    const payload = { workers: config.workers, rate: config.rate, delayMs: config.delayMs, categories: Array.from(selectedCategories) };\n    setProfiles((prev) => ({ ...prev, [name]: payload }));\n    setActiveProfile(name);\n  }, [profileNameInput, config, selectedCategories]);\n\n  const deleteProfile = useCallback(() => {\n    const name = activeProfile?.trim();\n    if (!name) return;\n    setProfiles((prev) => {\n      const next = { ...prev };\n      delete next[name];\n      return next;\n    });\n    setActiveProfile('');\n  }, [activeProfile]);\n\n  // Poll for test run completion if we detect an active run on mount\n  useEffect(() => {\n    const runningFlag = sessionStorage.getItem('test_runner_active');\n    if (runningFlag === 'true' && !running) {\n      console.log('[TestRunner] Detected active test run in another component instance, polling for updates...');\n      \n      // Poll sessionStorage for updates\n      const pollInterval = setInterval(() => {\n        try {\n          const stillRunning = sessionStorage.getItem('test_runner_active');\n          if (stillRunning !== 'true') {\n            console.log('[TestRunner] Test run completed, syncing final results');\n            const stored = sessionStorage.getItem(TEST_RESULTS_KEY);\n            if (stored) {\n              const parsed = JSON.parse(stored);\n              setResults(parsed);\n              resultsRef.current = parsed;\n            }\n            clearInterval(pollInterval);\n            if (pollIntervalRef.current) {\n              pollIntervalRef.current = null;\n            }\n          } else {\n            // Sync intermediate results\n            const stored = sessionStorage.getItem(TEST_RESULTS_KEY);\n            if (stored) {\n              const parsed = JSON.parse(stored);\n              setResults((currentResults) => {\n                if (parsed.length !== currentResults.length) {\n                  console.log('[TestRunner] Polling sync: updating to', parsed.length, 'tests');\n                  resultsRef.current = parsed;\n                  return parsed;\n                }\n                return currentResults;\n              });\n            }\n          }\n        } catch (e) {\n          console.error('[TestRunner] Polling error:', e);\n        }\n      }, 500); // Poll every 500ms\n\n      pollIntervalRef.current = pollInterval;\n      \n      return () => {\n        if (pollIntervalRef.current) {\n          clearInterval(pollIntervalRef.current);\n          pollIntervalRef.current = null;\n        }\n      };\n    }\n  }, [running]); // Only depend on running state\n\n  const restoreResults = () => {\n    try {\n      const stored = sessionStorage.getItem(TEST_RESULTS_KEY);\n      if (!stored) return;\n      const parsed = JSON.parse(stored);\n      if (Array.isArray(parsed)) {\n        resultsRef.current = parsed;\n        setResults(parsed);\n        console.log('[TestRunner] Restored previous results from sessionStorage:', parsed.length);\n      }\n    } catch (e) {\n      console.warn('[TestRunner] Failed to restore previous results:', e.message);\n    }\n  };\n  const [currentTest, setCurrentTest] = useState(null);\n  const [preflight, setPreflight] = useState({\n    status: \"unknown\",\n    message: null,\n    database: \"unknown\",\n  });\n  const [checking, setChecking] = useState(true);\n\n  // Preflight check function\n  const checkBackend = useCallback(async () => {\n    setChecking(true);\n    try {\n      // Prefer the deeper system status that actually hits the DB\n      let resp = await fetch(`${BACKEND_URL}/api/system/status`);\n      if (!resp.ok) throw new Error(`Status ${resp.status}`);\n      const sys = await resp.json();\n      const dbStatus = sys?.data?.database || \"unknown\";\n      if (dbStatus === \"connected\") {\n        setPreflight({\n          status: \"ok\",\n          message: \"Backend online\",\n          database: \"connected\",\n        });\n      } else {\n        setPreflight({\n          status: \"error\",\n          message: `Database not ready: ${dbStatus}`,\n          database: dbStatus,\n        });\n      }\n    } catch {\n      try {\n        // Fallback to lightweight health check\n        const resp = await fetch(`${BACKEND_URL}/health`);\n        if (!resp.ok) throw new Error(`Status ${resp.status}`);\n        const data = await resp.json();\n        // Health may say connected = based on pool exist; keep conservative\n        setPreflight({\n          status: data?.database === \"connected\" ? \"ok\" : \"error\",\n          message: data?.database === \"connected\"\n            ? \"Backend online\"\n            : \"Database not ready\",\n          database: data?.database || \"unknown\",\n        });\n      } catch {\n        setPreflight({\n          status: \"error\",\n          message: `Backend not reachable at ${BACKEND_URL}`,\n          database: \"unknown\",\n        });\n      }\n    } finally {\n      setChecking(false);\n    }\n  }, []);\n\n  // Run preflight check on mount\n  useEffect(() => {\n    checkBackend();\n  }, [checkBackend]);\n\n  // Compute totals from selected suites\n  const totalTests = effectiveSuites.reduce(\n    (sum, suite) => sum + suite.tests.length,\n    0,\n  );\n\n  const runTests = async () => {\n    // Prevent concurrent runs - check both state AND sessionStorage\n    const runningFlag = sessionStorage.getItem('test_runner_active');\n    if (running || runningFlag === 'true') {\n      console.log('[TestRunner] Already running (running=' + running + ', sessionStorage=' + runningFlag + '), ignoring duplicate runTests call');\n      return;\n    }\n    \n    // Mark as running in BOTH locations\n    setRunning(true);\n    sessionStorage.setItem('test_runner_active', 'true');\n    \n    const allResults = [];\n    resultsRef.current = [];\n    console.log('[TestRunner] CLEARING results at start of run');\n    setResults([]);\n    sessionStorage.removeItem(TEST_RESULTS_KEY);\n    // Flag unit test mode for API monitor suppression\n    if (typeof window !== 'undefined') {\n      window.__UNIT_TEST_MODE = true;\n      window.__UNIT_TEST_SUPPRESS_CODES = ['400']; // suppress validation error noise\n    }\n    runIdRef.current += 1;\n    console.log('[TestRunner] Starting run ID:', runIdRef.current);\n\n    console.log('[TestRunner] Starting test run with', effectiveSuites.length, 'suites');\n    let testIndex = 0;\n    let completed = 0;\n    const TEST_TIMEOUT_MS = 15000; // prevent hangs that reduce completed count\n\n    // Live stats instrumentation\n    startAtRef.current = Date.now();\n    const originalFetch = (typeof window !== 'undefined' && window.fetch) ? window.fetch : null;\n    rateLimited429Ref.current = 0;\n    try {\n      if (typeof window !== 'undefined' && originalFetch) {\n        window.fetch = async (...args) => {\n          const res = await originalFetch(...args);\n          try {\n            if (res && res.status === 429) {\n              rateLimited429Ref.current = (rateLimited429Ref.current || 0) + 1;\n            }\n          } catch (_) { /* ignore */ }\n          return res;\n        };\n      }\n    } catch (_) { /* ignore */ }\n\n    const flushResults = () => {\n      // Batch UI/state updates to reduce flicker\n      resultsRef.current = [...allResults];\n      console.log('[TestRunner] flushResults called - setting results to length:', allResults.length);\n      setResults([...allResults]);\n      try {\n        sessionStorage.setItem(TEST_RESULTS_KEY, JSON.stringify(allResults));\n      } catch (e) {\n        console.error('[TestRunner] Failed to store results:', e);\n      }\n      const elapsed = Math.max(1, Date.now() - (startAtRef.current || Date.now()));\n      const avgRpsNum = Number((allResults.length / (elapsed / 1000)).toFixed(1));\n      setUiStats({ avgRps: avgRpsNum, rateLimited429: rateLimited429Ref.current || 0 });\n    };\n    const sleep = (ms) => new Promise((res) => setTimeout(res, ms));\n\n    // Flatten jobs for scheduling\n    const jobs = [];\n    for (const suite of effectiveSuites) {\n      for (const test of suite.tests) {\n        jobs.push({ suite, test });\n      }\n    }\n\n    const maxWorkers = Math.max(1, Number(config.workers) || 1);\n    const rate = Math.max(0, Number(config.rate) || 0); // ops/sec, 0 = unlimited\n    const startGapMs = rate > 0 ? Math.floor(1000 / rate) : 0;\n    const delayAfterMs = Math.max(0, Number(config.delayMs) || 0);\n    let queueIndex = 0;\n    let nextAllowedStart = 0;\n\n    setCurrentTest(`Running with ${maxWorkers} worker${maxWorkers > 1 ? 's' : ''}${rate ? ` @ ${rate}/s` : ''}${delayAfterMs ? ` + ${delayAfterMs}ms delay` : ''}`);\n\n    const runOne = async (_workerId) => {\n      while (true) {\n        if (queueIndex >= jobs.length) return;\n        const myIdx = queueIndex++;\n        const { suite, test } = jobs[myIdx];\n\n        // Rate gate across workers\n        const now = Date.now();\n        if (startGapMs > 0 && now < nextAllowedStart) {\n          await sleep(nextAllowedStart - now);\n        }\n        nextAllowedStart = (Date.now()) + startGapMs;\n\n        testIndex++;\n        setCurrentTest(`${suite.name} - ${test.name}`);\n        const startTime = Date.now();\n        const result = {\n          suite: suite.name,\n          test: test.name,\n          status: 'running',\n          duration: 0,\n          error: null,\n        };\n\n        const execPromise = (async () => { await test.fn(); })();\n        const timeoutPromise = new Promise((_, reject) => {\n          setTimeout(() => reject(new Error(`Timeout after ${TEST_TIMEOUT_MS}ms`)), TEST_TIMEOUT_MS);\n        });\n\n        try {\n          await Promise.race([execPromise, timeoutPromise]);\n          result.status = 'passed';\n        } catch (error) {\n          result.status = 'failed';\n          result.error = error.message;\n          console.error(`[TestRunner]  Test ${testIndex} failed:`, error.message);\n        } finally {\n          result.duration = Date.now() - startTime;\n        }\n\n        allResults.push(result);\n        completed++;\n        if (completed <= 5 || completed % 5 === 0 || completed === totalTests) {\n          flushResults();\n        }\n\n        if (delayAfterMs > 0) {\n          await sleep(delayAfterMs);\n        }\n      }\n    };\n\n    try {\n      const workers = Array.from({ length: maxWorkers }, (_, i) => runOne(i + 1));\n      await Promise.all(workers);\n      console.log('[TestRunner] All tests completed:', allResults.length, 'total');\n    } catch (error) {\n      console.error('[TestRunner] FATAL ERROR during test execution:', error);\n      console.error('[TestRunner] Stack:', error.stack);\n      alert(`Test runner crashed at test ${testIndex}: ${error.message}\\n\\nCheck console for details.`);\n    } finally {\n      // Restore fetch and log simple stats\n      try {\n        if (typeof window !== 'undefined' && originalFetch && window.fetch !== originalFetch) {\n          window.fetch = originalFetch;\n        }\n      } catch (_) { /* ignore */ }\n      const elapsed = Math.max(1, Date.now() - (startAtRef.current || Date.now()));\n      const avgRps = (allResults.length / (elapsed / 1000)).toFixed(1);\n      console.log(`[TestRunner] Stats: completed=${allResults.length}, rps_avg=${avgRps}, rate_limited_429=${rateLimited429Ref.current || 0}`);\n      setUiStats({ avgRps: Number(avgRps), rateLimited429: rateLimited429Ref.current || 0 });\n      flushResults();\n      setCurrentTest(null);\n      setRunning(false);\n      sessionStorage.removeItem('test_runner_active'); // Clear running flag\n      console.log('[TestRunner] Test run finished. Results:', allResults.length);\n      // Remove suppression flags\n      if (typeof window !== 'undefined') {\n        delete window.__UNIT_TEST_MODE;\n        delete window.__UNIT_TEST_SUPPRESS_CODES;\n      }\n      if (allResults.length !== totalTests) {\n        console.warn(`[TestRunner] WARNING: Expected ${totalTests} tests, but only ${allResults.length} completed.`);\n      }\n    }\n  };\n\n  // Periodic sync to recover from accidental unmount/remount or lost state during a run\n  // DISABLED: This was causing double-run issues by restoring state mid-run\n  // If we need recovery, use the manual restore button instead\n  useEffect(() => {\n    // Cleanup any existing interval on unmount\n    return () => {\n      if (syncIntervalRef.current) {\n        clearInterval(syncIntervalRef.current);\n        syncIntervalRef.current = null;\n      }\n    };\n  }, []);\n\n  // REMOVED: Auto-restore was causing double-run issues\n  // Use the manual \"Restore Previous Results\" button instead\n  const passedTests = results.filter((r) => r.status === \"passed\").length;\n  const failedTests = results.filter((r) => r.status === \"failed\").length;\n  const completedTests = results.length;\n  const passRate = completedTests > 0\n    ? ((passedTests / completedTests) * 100).toFixed(1)\n    : 0;\n\n  console.log('[TestRunner] Render - results.length:', results.length, 'passed:', passedTests, 'failed:', failedTests);\n\n  const [cleaning, setCleaning] = useState(false);\n  const clearResults = async () => {\n    // Clear UI/test results first\n    console.log('[TestRunner] CLEARING results via clearResults button');\n    setResults([]);\n    resultsRef.current = [];\n    try {\n      sessionStorage.removeItem(TEST_RESULTS_KEY);\n      console.log('[TestRunner] Results cleared');\n    } catch (e) {\n      console.error('[TestRunner] Failed to clear results:', e);\n    }\n\n    // Proactively clean up test data created with test tenant\n    // This helps when a run aborts before Delete tests execute\n    const TEST_TENANT_ID = '6cb4c008-4847-426a-9a2e-918ad70e7b69';\n    const BACKEND_URL = getBackendUrl();\n    const cleanupSpecs = [\n      {\n        endpoint: 'contacts', key: 'contacts', matcher: (r) =>\n          (r.email && r.email.includes('@unittest.local')) || r.first_name === 'Test'\n      },\n      {\n        endpoint: 'leads', key: 'leads', matcher: (r) =>\n          (r.email && r.email.includes('@unittest.local')) || r.first_name === 'Test'\n      },\n      {\n        endpoint: 'accounts', key: 'accounts', matcher: (r) =>\n          r.name && r.name.startsWith('Test Account ')\n      },\n      {\n        endpoint: 'system-logs', key: 'system-logs', matcher: (r) =>\n          r.source === 'UnitTests:SystemLogs'\n      }\n    ];\n\n    setCleaning(true);\n    const summary = [];\n    for (const spec of cleanupSpecs) {\n      try {\n        const listResp = await fetch(`${BACKEND_URL}/api/${spec.endpoint}?tenant_id=${encodeURIComponent(TEST_TENANT_ID)}&limit=200`);\n        if (!listResp.ok) {\n          console.warn(`[Cleanup] Skip ${spec.endpoint}: status ${listResp.status}`);\n          continue;\n        }\n        const listJson = await listResp.json();\n        const raw = listJson?.data?.[spec.key] || [];\n        const targets = raw.filter(spec.matcher);\n        let deleted = 0;\n        for (const item of targets) {\n          if (!item.id) continue;\n          try {\n            const del = await fetch(`${BACKEND_URL}/api/${spec.endpoint}/${item.id}?tenant_id=${encodeURIComponent(TEST_TENANT_ID)}`, { method: 'DELETE' });\n            if (del.ok) deleted++;\n          } catch (e) {\n            console.warn(`[Cleanup] Failed delete ${spec.endpoint} ${item.id}:`, e.message);\n          }\n        }\n        summary.push(`${spec.endpoint}:${deleted}/${targets.length}`);\n      } catch (e) {\n        console.warn(`[Cleanup] Error processing ${spec.endpoint}:`, e.message);\n      }\n    }\n    setCleaning(false);\n    console.log('[Cleanup] Test data cleanup summary ->', summary.join(', '));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"bg-slate-800 border-slate-700\">\n        <CardHeader>\n          <CardTitle className=\"text-slate-100 flex items-center justify-between\">\n            <span>Test Suite Runner</span>\n            <div className=\"flex items-center gap-2\">\n              {isSuperadmin && (\n                <div className=\"flex items-center gap-2 mr-2\">\n                  <div className=\"flex items-center gap-1\">\n                    <span className=\"text-slate-400 text-xs\">Workers</span>\n                    <Input\n                      type=\"number\"\n                      min={1}\n                      max={32}\n                      value={config.workers}\n                      disabled={running}\n                      onChange={(e) => setConfig((c) => ({ ...c, workers: Math.max(1, Number(e.target.value) || 1) }))}\n                      className=\"w-20 bg-slate-700 border-slate-600 h-8 text-slate-100\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <span className=\"text-slate-400 text-xs\">Rate/s</span>\n                    <Input\n                      type=\"number\"\n                      min={0}\n                      max={1000}\n                      value={config.rate}\n                      disabled={running}\n                      onChange={(e) => setConfig((c) => ({ ...c, rate: Math.max(0, Number(e.target.value) || 0) }))}\n                      className=\"w-24 bg-slate-700 border-slate-600 h-8 text-slate-100\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <span className=\"text-slate-400 text-xs\">Delay(ms)</span>\n                    <Input\n                      type=\"number\"\n                      min={0}\n                      max={60000}\n                      value={config.delayMs}\n                      disabled={running}\n                      onChange={(e) => setConfig((c) => ({ ...c, delayMs: Math.max(0, Number(e.target.value) || 0) }))}\n                      className=\"w-28 bg-slate-700 border-slate-600 h-8 text-slate-100\"\n                    />\n                  </div>\n                </div>\n              )}\n              {isSuperadmin && (\n                <div className=\"hidden xl:flex items-center gap-2 mr-2\">\n                  <select\n                    className=\"bg-slate-700 border border-slate-600 text-slate-100 text-xs h-8 px-2 rounded\"\n                    value={activeProfile}\n                    onChange={(e) => loadProfile(e.target.value)}\n                    disabled={running}\n                  >\n                    <option value=\"\">Profiles</option>\n                    {Object.keys(profiles).map((name) => (\n                      <option key={name} value={name}>{name}</option>\n                    ))}\n                  </select>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Profile name\"\n                    className=\"bg-slate-700 border border-slate-600 text-slate-100 text-xs h-8 px-2 rounded w-36\"\n                    value={profileNameInput}\n                    onChange={(e) => setProfileNameInput(e.target.value)}\n                    disabled={running}\n                  />\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-8 px-2 text-xs\"\n                    disabled={running || !profileNameInput.trim()}\n                    onClick={saveProfile}\n                  >Save</Button>\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-8 px-2 text-xs\"\n                    disabled={running || !activeProfile}\n                    onClick={deleteProfile}\n                  >Delete</Button>\n                </div>\n              )}\n              {isSuperadmin && (\n                <div className=\"hidden md:flex items-center gap-2 mr-2\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-8 px-2 text-xs\"\n                    disabled={running}\n                    onClick={() => setConfig({ workers: 2, rate: 5, delayMs: 25 })}\n                  >Balanced</Button>\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-8 px-2 text-xs\"\n                    disabled={running}\n                    onClick={() => setConfig({ workers: 4, rate: 15, delayMs: 0 })}\n                  >Fast</Button>\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-8 px-2 text-xs\"\n                    disabled={running}\n                    onClick={() => setConfig({ workers: 8, rate: 0, delayMs: 0 })}\n                  >Max</Button>\n                </div>\n              )}\n              <Button\n                onClick={checkBackend}\n                variant=\"outline\"\n                className=\"bg-slate-700 border-slate-600\"\n                disabled={checking}\n              >\n                {checking\n                  ? <Clock className=\"w-4 h-4 mr-2 animate-spin\" />\n                  : <FileText className=\"w-4 h-4 mr-2\" />}\n                Check Backend\n              </Button>\n              {(results.length > 0 || !running) && (\n                <Button\n                  onClick={clearResults}\n                  variant=\"outline\"\n                  className=\"bg-slate-700 border-slate-600 hover:bg-red-900/30\"\n                  disabled={running || cleaning}\n                >\n                  <XCircle className=\"w-4 h-4 mr-2\" />\n                  {cleaning ? 'Clearing' : 'Clear Results + Data'}\n                </Button>\n              )}\n              {results.length === 0 && !running && hasStoredResults && (\n                <Button\n                  onClick={restoreResults}\n                  variant=\"outline\"\n                  className=\"bg-slate-700 border-slate-600\"\n                  disabled={running}\n                >\n                  <Clock className=\"w-4 h-4 mr-2\" />\n                  Restore Last Results\n                </Button>\n              )}\n              <Button\n                onClick={runTests}\n                disabled={running || checking || preflight.status !== \"ok\" || effectiveSuites.length === 0}\n                className=\"bg-blue-600 hover:bg-blue-700\"\n              >\n                {running\n                  ? (\n                    <>\n                      <Clock className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Running...\n                    </>\n                  )\n                  : (\n                    <>\n                      <Play className=\"w-4 h-4 mr-2\" />\n                      Run All Tests\n                    </>\n                  )}\n              </Button>\n            </div>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {/* Preflight banner */}\n          {checking\n            ? (\n              <Alert className=\"mb-4 bg-blue-900/30 border-blue-700\">\n                <Clock className=\"h-4 w-4 animate-spin\" />\n                <AlertDescription className=\"text-blue-300\">\n                  Checking backend status\n                </AlertDescription>\n              </Alert>\n            )\n            : preflight.status !== \"ok\"\n            ? (\n              <Alert className=\"mb-4 bg-red-900/30 border-red-700\">\n                <AlertTriangle className=\"h-4 w-4 text-red-400\" />\n                <AlertDescription className=\"text-red-300\">\n                  {preflight.message}. Tests are disabled until the backend is\n                  reachable.\n                </AlertDescription>\n              </Alert>\n            )\n            : (\n              <Alert className=\"mb-4 bg-green-900/30 border-green-700\">\n                <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                <AlertDescription className=\"text-green-300\">\n                  Backend online (database:{\" \"}\n                  {preflight.database}). You can run the tests.\n                </AlertDescription>\n              </Alert>\n            )}\n\n          {isSuperadmin && (\n            <div className=\"mb-4 p-3 rounded border border-slate-700 bg-slate-800/60\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"text-slate-300 text-sm font-medium\">Suites</div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-7 px-2 text-xs\"\n                    disabled={running}\n                    onClick={() => setSelectedCategories(new Set(allSuiteNames))}\n                  >Select All</Button>\n                  <Button\n                    variant=\"outline\"\n                    className=\"bg-slate-700 border-slate-600 h-7 px-2 text-xs\"\n                    disabled={running}\n                    onClick={() => setSelectedCategories(new Set())}\n                  >Select None</Button>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2\">\n                {testSuites.map((suite) => (\n                  <label key={suite.name} className=\"flex items-center gap-2 text-slate-200 text-sm\">\n                    <input\n                      type=\"checkbox\"\n                      className=\"accent-blue-500 h-4 w-4\"\n                      checked={selectedCategories.has(suite.name)}\n                      disabled={running}\n                      onChange={(e) => {\n                        const next = new Set(selectedCategories);\n                        if (e.target.checked) next.add(suite.name); else next.delete(suite.name);\n                        setSelectedCategories(next);\n                      }}\n                    />\n                    <span>{suite.name}</span>\n                    <span className=\"text-xs text-slate-400\">({suite.tests.length})</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {running && currentTest && (\n            <Alert className=\"mb-4 bg-blue-900/30 border-blue-700\">\n              <Clock className=\"h-4 w-4 animate-spin\" />\n              <AlertDescription className=\"text-blue-300\">\n                Running: {currentTest}\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {(running || results.length > 0) && (\n            <div className=\"mb-4 grid grid-cols-3 gap-2\">\n              <Card className=\"bg-slate-700 border-slate-600\">\n                <CardContent className=\"p-3\">\n                  <div className=\"text-xs text-slate-400\">Avg RPS</div>\n                  <div className=\"text-lg font-semibold text-slate-100\">{uiStats.avgRps}</div>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-slate-700 border-slate-600\">\n                <CardContent className=\"p-3\">\n                  <div className=\"text-xs text-slate-400\">429 Count</div>\n                  <div className=\"text-lg font-semibold text-slate-100\">{uiStats.rateLimited429}</div>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-slate-700 border-slate-600\">\n                <CardContent className=\"p-3\">\n                  <div className=\"text-xs text-slate-400\">Config</div>\n                  <div className=\"text-xs text-slate-200\">w:{config.workers} r:{config.rate}/s d:{config.delayMs}ms</div>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {results.length > 0 && (\n            <div className=\"grid grid-cols-4 gap-4 mb-6\">\n              <Card className=\"bg-slate-700 border-slate-600\">\n                <CardContent className=\"p-4\">\n                  <div className=\"text-sm text-slate-400\">Completed</div>\n                  <div className=\"text-2xl font-bold text-slate-100\">\n                    {completedTests} / {totalTests}\n                  </div>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-green-900/30 border-green-700\">\n                <CardContent className=\"p-4\">\n                  <div className=\"text-sm text-green-400\">Passed</div>\n                  <div className=\"text-2xl font-bold text-green-300\">\n                    {passedTests}\n                  </div>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-red-900/30 border-red-700\">\n                <CardContent className=\"p-4\">\n                  <div className=\"text-sm text-red-400\">Failed</div>\n                  <div className=\"text-2xl font-bold text-red-300\">\n                    {failedTests}\n                  </div>\n                </CardContent>\n              </Card>\n              <Card className=\"bg-blue-900/30 border-blue-700\">\n                <CardContent className=\"p-4\">\n                  <div className=\"text-sm text-blue-400\">Pass Rate</div>\n                  <div className=\"text-2xl font-bold text-blue-300\">\n                    {passRate}%\n                  </div>\n                </CardContent>\n              </Card>\n              {completedTests > 0 && completedTests !== totalTests && !running && (\n                <Card className=\"bg-yellow-900/30 border-yellow-700 col-span-4\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"text-sm text-yellow-400\">Integrity Warning</div>\n                    <div className=\"text-sm text-yellow-300 mt-1\">Missing tests detected: expected {totalTests} but only {completedTests} completed. This usually indicates a component remount or early abort. Results were auto-recovered from storage if possible.</div>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          )}\n\n          <div className=\"space-y-2\">\n            {results.map((result, index) => (\n              <div\n                key={index}\n                className={`p-4 rounded-lg border ${\n                  result.status === \"passed\"\n                    ? \"bg-green-900/20 border-green-700\"\n                    : \"bg-red-900/20 border-red-700\"\n                }`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    {result.status === \"passed\"\n                      ? <CheckCircle2 className=\"w-5 h-5 text-green-400\" />\n                      : <XCircle className=\"w-5 h-5 text-red-400\" />}\n                    <div>\n                      <div className=\"font-medium text-slate-200\">\n                        {result.suite} - {result.test}\n                      </div>\n                      {result.error && (\n                        <div className=\"text-sm text-red-400 mt-1\">\n                          Error: {result.error}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <Badge variant=\"outline\" className=\"text-slate-400\">\n                    {result.duration}ms\n                  </Badge>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\apiHealthMonitorTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\crudTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\dataIntegrityTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\employeeScopeTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\errorLoggerTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\formValidationTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\schemaValidationTests.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\systemLogsTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\testUtils.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\userContextTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\userMigrationIntegrationTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\testing\\utilityFunctionTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\accordion.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\alert-dialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\alert.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\aspect-ratio.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\avatar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\badge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\breadcrumb.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\button-variants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\button.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\calendar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\carousel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\chart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\checkbox.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\collapsible.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\command.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\context-menu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\dialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\drawer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\dropdown-menu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\form.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\hover-card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\input-otp.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\input.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\label.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\menubar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\navigation-menu-variants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\navigation-menu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\pagination.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\popover.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\progress.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\radio-group.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\resizable.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\scroll-area.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\select.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\separator.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\sheet.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\sidebar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\skeleton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\slider.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\sonner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\switch.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\table.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\tabs.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\textarea.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\toast.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\toaster.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\toggle-group.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\toggle-variants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\tooltip.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\ui\\use-toast.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\utils\\apiTimer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\workflows\\NodeLibrary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\workflows\\WorkflowBuilder.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\workflows\\WorkflowCanvas.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getNodeType' is assigned a value but never used. Allowed unused vars must match /^(?:React|_)/u.","line":27,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"getNodeType"},"fix":{"range":[781,870],"text":""},"desc":"Remove unused variable 'getNodeType'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport WorkflowNode from './WorkflowNode';\nimport { ArrowDown, ArrowDownRight, ArrowDownLeft } from 'lucide-react';\n\nexport default function WorkflowCanvas({ nodes, connections, onUpdateNode, onDeleteNode, onConnect, onSelectNode, selectedNodeId }) {\n  const [connectingFrom, setConnectingFrom] = useState(null);\n\n  const handleNodeClick = (nodeId) => {\n    if (connectingFrom) {\n      if (connectingFrom !== nodeId) {\n        onConnect(connectingFrom, nodeId);\n      }\n      setConnectingFrom(null);\n    } else {\n      onSelectNode(nodeId);\n    }\n  };\n\n  const handleStartConnect = (nodeId) => {\n    setConnectingFrom(nodeId);\n  };\n\n  const getNodeConnections = (nodeId) => {\n    return connections.filter(c => c.from === nodeId);\n  };\n\n  const getNodeType = (nodeId) => {\n    return nodes.find(n => n.id === nodeId)?.type;\n  };\n\n  const renderConnector = (node, nodeConnections) => {\n    if (!nodeConnections || nodeConnections.length === 0) return null;\n\n    const isCondition = node.type === 'condition';\n\n    if (isCondition && nodeConnections.length >= 2) {\n      // Render decision branches with labeled paths\n      return (\n        <div className=\"flex justify-center items-center gap-6 my-2\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <span className=\"text-xs font-semibold text-green-400 bg-green-900/30 px-2 py-1 rounded\">TRUE</span>\n              <ArrowDownLeft className=\"w-4 h-4 text-green-400\" />\n            </div>\n            <div className=\"w-px h-6 bg-gradient-to-b from-green-400 to-transparent\" />\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <ArrowDownRight className=\"w-4 h-4 text-red-400\" />\n              <span className=\"text-xs font-semibold text-red-400 bg-red-900/30 px-2 py-1 rounded\">FALSE</span>\n            </div>\n            <div className=\"w-px h-6 bg-gradient-to-b from-red-400 to-transparent\" />\n          </div>\n        </div>\n      );\n    } else if (nodeConnections.length === 1) {\n      // Single connection arrow\n      return (\n        <div className=\"flex justify-center my-2\">\n          <div className=\"flex flex-col items-center\">\n            <ArrowDown className=\"w-5 h-5 text-purple-400 animate-pulse\" />\n            <div className=\"w-px h-6 bg-gradient-to-b from-purple-400 to-transparent\" />\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <div className=\"workflow-canvas relative p-4 min-h-0 overflow-auto\" style={{\n      scrollbarWidth: 'thin',\n      scrollbarColor: '#6b7280 #1e293b'\n    }}>\n      <style>{`\n        .workflow-canvas::-webkit-scrollbar {\n          width: 12px;\n        }\n        .workflow-canvas::-webkit-scrollbar-track {\n          background: #1e293b;\n          border-radius: 6px;\n        }\n        .workflow-canvas::-webkit-scrollbar-thumb {\n          background: #6b7280;\n          border-radius: 6px;\n        }\n        .workflow-canvas::-webkit-scrollbar-thumb:hover {\n          background: #9ca3af;\n        }\n      `}</style>\n      {connectingFrom && (\n        <div className=\"fixed top-4 left-1/2 transform -translate-x-1/2 bg-purple-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-bounce\">\n           Click on another node to connect\n        </div>\n      )}\n\n      {/* Render nodes with connectors */}\n      <div className=\"space-y-1\">\n        {nodes.map((node, _index) => {\n          const nodeConnections = getNodeConnections(node.id);\n          \n          return (\n            <React.Fragment key={node.id}>\n              <WorkflowNode\n                node={node}\n                isSelected={selectedNodeId === node.id}\n                isConnecting={connectingFrom === node.id}\n                onClick={() => handleNodeClick(node.id)}\n                onUpdate={(updates) => onUpdateNode(node.id, updates)}\n                onDelete={() => onDeleteNode(node.id)}\n                onStartConnect={() => handleStartConnect(node.id)}\n              />\n              \n              {/* Render connector arrows */}\n              {renderConnector(node, nodeConnections)}\n            </React.Fragment>\n          );\n        })}\n      </div>\n\n      {/* Empty state hint */}\n      {nodes.length === 1 && (\n        <div className=\"mt-8 text-center p-6 border-2 border-dashed border-slate-700 rounded-lg\">\n          <p className=\"text-slate-400 text-sm\">\n             Add more nodes from the library on the left\n          </p>\n          <p className=\"text-slate-500 text-xs mt-2\">\n            Then click the link button on nodes to connect them\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\components\\workflows\\WorkflowNode.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\config\\ai.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\AICampaign.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Account.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Activity.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Announcement.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\ApiKey.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\ArchiveIndex.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\AuditLog.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\BizDevSource.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Cache.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\CashFlow.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Checkpoint.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\ClientRequirement.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Contact.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\ContactHistory.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\CronJob.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\DailySalesMetrics.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\DataManagementSettings.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Documentation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\EmailTemplate.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Employee.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\FieldCustomization.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\File.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\GuideContent.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\ImportLog.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\IndustryMarketData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Lead.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\LeadHistory.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\ModuleSettings.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\MonthlyPerformance.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Note.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Notification.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Opportunity.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\OpportunityHistory.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\PerformanceLog.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\SubscriptionPlan.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\SubscriptionWebhook.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\SyncHealth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\SystemBranding.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\SystemLog.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Tenant.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\TenantIntegration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\TestReport.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\UserInvitation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\UserPerformance.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\Workflow.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\WorkflowExecution.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\entities\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\hooks\\use-mobile.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\hooks\\useApiOptimizer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\hooks\\useEntityForm.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\lib\\supabase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\lib\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\AICampaigns.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Accounts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Activities.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Agent.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\AuditLog.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":31,"column":6,"nodeType":"ArrayExpression","endLine":31,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [userLoading, currentUser, loadData]","fix":{"range":[1449,1475],"text":"[userLoading, currentUser, loadData]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\BizDevSources.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Calendar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\CashFlow.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\ClientOnboarding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\ClientRequirements.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Contacts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Dashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\DataDiagnostics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\DataQualityReport.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'runAnalysis'. Either include it or remove the dependency array.","line":55,"column":6,"nodeType":"ArrayExpression","endLine":55,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, runAnalysis, selectedTenantId]","fix":{"range":[1421,1452],"text":"[currentUser, runAnalysis, selectedTenantId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\DocumentManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\DocumentProcessing.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Documentation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\DuplicateAccounts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\DuplicateContacts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Employees.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Integrations.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Layout.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'currentTenantData?.id' and 'currentTenantData?.name'. Either include them or remove the dependency array.","line":1155,"column":6,"nodeType":"ArrayExpression","endLine":1162,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [effectiveTenantId, currentPageName, cachedRequest, setSelectedTenantId, user, selectedTenantId, currentTenantData?.name, currentTenantData?.id]","fix":{"range":[41205,41330],"text":"[effectiveTenantId, currentPageName, cachedRequest, setSelectedTenantId, user, selectedTenantId, currentTenantData?.name, currentTenantData?.id]"}}],"suppressions":[{"kind":"directive","justification":"currentTenantData is logged for debugging only, not used in logic"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Leads.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Opportunities.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\PaymentPortal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\PrivacyPolicy.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Reports.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\ResetPassword.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Settings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\SystemLogs.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\TenantDataDebug.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Tenants.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\TermsConditions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\UnitTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Utilities.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\WorkflowGuide.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\Workflows.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\pages\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\test\\setup.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\utils\\apiHealthMonitor.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\utils\\auditLog.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\utils\\fetchWithBackoff.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\utils\\normalizeUser.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\src\\utils\\permissions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\test-dashboard-stats.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\test-db-connection.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\api-schema-validation.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\api-docs.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\auth.setup.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\crud-operations.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\crud-simple.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\data-consistency.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\security.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\setup-helpers.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\user-management-crud.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\e2e\\user-management-permissions.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\tests\\form-validation.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\verify-test-counts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\andre\\Documents\\GitHub\\ai-sha-crm-copy-c872be53\\vitest.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]