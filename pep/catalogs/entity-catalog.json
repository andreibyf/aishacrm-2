{
  "version": "1.0.0",
  "entities": [
    {
      "id": "CashFlowTransaction",
      "description": "A financial transaction record (income or expense)",
      "aisha_binding": {
        "table": "cash_flow",
        "route": "/api/cashflow"
      },
      "attributes": {
        "id": { "type": "String", "required": false },
        "tenant_id": { "type": "String", "required": true },
        "transaction_type": { "type": "String", "enum": ["income", "expense"], "required": true },
        "amount": { "type": "Number", "required": true },
        "transaction_date": { "type": "String", "format": "date", "required": true },
        "category": { "type": "String", "required": true },
        "description": { "type": "String", "required": true },
        "is_recurring": { "type": "Boolean", "default": false },
        "recurrence_pattern": {
          "type": "String",
          "enum": ["weekly", "monthly", "quarterly", "annually"]
        },
        "status": { "type": "String", "enum": ["actual", "projected", "pending", "cancelled"] },
        "entry_method": {
          "type": "String",
          "enum": ["manual", "crm_auto", "document_extracted", "recurring_auto"]
        }
      },
      "events": {
        "TransactionCreated": "Fired when a new cash_flow record is inserted",
        "TransactionUpdated": "Fired when a cash_flow record is updated",
        "RecurringTransactionDue": "Fired when is_recurring=true and next date has been reached"
      }
    }
  ]
}
